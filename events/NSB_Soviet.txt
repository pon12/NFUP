###########################
# NSB Soviet Events
###########################

add_namespace = NSB_soviet_paranoia_system_events
add_namespace = NSB_soviet_propaganda_capmaign_events
add_namespace = NSB_soviet_foreign_politics_events
add_namespace = NSB_soviet_five_year_plan
add_namespace = NSB_soviet_great_patriotic_war
add_namespace = NSB_soviet_spanish_civil_war


#########################
### INTRO TO PARANOIA ###
#########################

### PARANOIA SYSTEM STARTS ###
country_event = {
	id = NSB_soviet_paranoia_system_events.01
	title = NSB_soviet_paranoia_system_events.01.t
	desc = NSB_soviet_paranoia_system_events.01.desc
	picture = GFX_report_event_stalin_01
	
	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
		hidden_effect = {
			SOV_initiate_paranoia_effect = yes
		}
	}

	trigger = {
		NOT = { has_completed_focus = SOV_the_bloc_of_rights_and_trotskyites }
	}

	option = { #GOOD TO KNOW, THANKS
		name = NSB_soviet_paranoia_system_events.01.a
		
		custom_effect_tooltip = SOV_paranoia_system_intro_tt
		unlock_decision_category_tooltip = SOV_paranoia_system

		#Stalin gets paranoid
		effect_tooltip = {
			add_country_leader_trait = stalin_political_paranoia
		}

		#NKVD chiefs will make Political Paranoia worse
		custom_effect_tooltip = SOV_paranoia_system_nkvd_trait_tt
	}
}

####################
### ADMIN PURGES ###
####################

### ADVISOR ACCUSED OF TREASON - ADMIN ###
country_event = {
	id = NSB_soviet_paranoia_system_events.11
	title = NSB_soviet_paranoia_system_events.11.t
	desc = NSB_soviet_paranoia_system_events.11.desc
	picture = GFX_report_event_soviet_purge_trial
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			SOV_paranoia_increase_purge_counter_regular = yes
		}
	}

	option = { #PURGE MODE ON
		name = NSB_soviet_paranoia_system_events.11.a
		ai_chance = {
			base = 10
		}
		hidden_effect = {
			every_character = {
				limit = {
					is_character_slot = political_advisor
					has_character_flag = SOV_targeted_for_purge_flag
				}
				SOV_purge_character_effect = yes
			}
		}

		custom_effect_tooltip = SOV_characters_will_be_purged_tt
		character_list_tooltip = {
			limit = {
				has_character_flag = SOV_targeted_for_purge_flag
			}
		}

		#Update purged portraits in UI
		hidden_effect = {
			SOV_paranoia_update_portraits_ui = yes
		}

		#PARANOIA decreases
		SOV_paranoia_high_decrease_effect = yes

		if = {
			limit = {
				has_political_power < SOV_purge_event_pp_to_avoid_regular
			}
			custom_effect_tooltip = SOV_purge_event_not_enough_pp_to_avoid_regular_tt
		}

		clear_variable = SOV_purged_character_for_loc
	}

	option = { #PURGE MODE OFF
		name = NSB_soviet_paranoia_system_events.11.b
		ai_chance = {
			base = 1
			#modifier = { #Don't purge historically-not-purged people on historical # SOV_historically_not_purged_flag not implemented for now -> Adds more randomness
			#	factor = 100
			#	SOV_is_going_historical_stalinist = yes
			#	any_character = {
			#		has_character_flag = SOV_targeted_for_purge_flag
			#		has_character_flag = SOV_historically_not_purged_flag
			#	}
			#}
			modifier = { #Don't go to negative PP please
				factor = 0
				has_political_power < SOV_purge_event_pp_to_avoid_regular_pay
			}
		}

		trigger = {
			NOT = { has_political_power < SOV_purge_event_pp_to_avoid_regular }
		}

		add_political_power = SOV_purge_event_pp_to_avoid_regular_pay

		#PARANOIA increases
		SOV_paranoia_low_increase_effect = yes

		#CLEAN EVERYTHING THANKS
		SOV_clean_purge_targets_effect = yes
		clear_variable = SOV_purged_character_for_loc
	}
}

### NKVD PURGED - ADMIN ###
country_event = {
	id = NSB_soviet_paranoia_system_events.13
	title = NSB_soviet_paranoia_system_events.13.t
	desc = NSB_soviet_paranoia_system_events.13.desc
	picture = GFX_report_event_soviet_purge_trial

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			SOV_paranoia_increase_purge_counter_regular = yes
		}
	}

	option = {
		name = NSB_soviet_paranoia_system_events.13.a
		ai_chance = {
			base = 10
		}

		if = {
			limit = {
				has_idea = SOV_genrikh_yagoda
			}
			hidden_effect = {
				SOV_genrikh_yagoda = {
					SOV_purge_character_effect = yes
				}
			}

			custom_effect_tooltip = SOV_characters_will_be_purged_tt
			character_list_tooltip = {
				limit = {
					is_character = SOV_genrikh_yagoda
				}
			}

			activate_advisor = SOV_nikolay_yezhov
		}
		else_if = {
			limit = {
				has_idea = SOV_nikolay_yezhov
			}
			hidden_effect = {
				SOV_nikolay_yezhov = {
					SOV_purge_character_effect = yes
				}
			}
			custom_effect_tooltip = SOV_characters_will_be_purged_tt
			character_list_tooltip = {
				limit = {
					is_character = SOV_nikolay_yezhov
				}
			}

			activate_advisor = SOV_lavrenty_beriya
		}

		#Update purged portraits in UI
		hidden_effect = {
			SOV_paranoia_update_portraits_ui = yes
		}

		#PARANOIA decreases
		SOV_paranoia_high_decrease_effect = yes

		if = {
			limit = {
				has_political_power < SOV_purge_event_pp_to_avoid_regular
			}
			custom_effect_tooltip = SOV_purge_event_not_enough_pp_to_avoid_regular_tt
		}
	}

	option = {
		name = NSB_soviet_paranoia_system_events.13.b
		ai_chance = {
			base = 1
			modifier = { #Don't go to negative PP please
				factor = 0
				has_political_power < SOV_purge_event_pp_to_avoid_regular_pay
			}
		}

		trigger = {
			NOT = { has_political_power < SOV_purge_event_pp_to_avoid_regular }
		}

		add_political_power = SOV_purge_event_pp_to_avoid_regular_pay

		#PARANOIA increases
		SOV_paranoia_low_increase_effect = yes
	}
}

### GREAT PURGE - MOSCOW TRIALS - ADMIN ###
country_event = {
	id = NSB_soviet_paranoia_system_events.19
	title = NSB_soviet_paranoia_system_events.19.t
	desc = {
		text = NSB_soviet_paranoia_system_events.19.desc_1 #first Moscow trial 
		trigger = {
			has_country_flag = SOV_purge_event_unavoidable_flag
			check_variable = { SOV_moscow_trial_index < 2 }
		}
	}
	desc = {
		text = NSB_soviet_paranoia_system_events.19.desc_2 #second Moscow trial 
		trigger = {
			has_country_flag = SOV_purge_event_unavoidable_flag
			check_variable = { SOV_moscow_trial_index > 1 } 
			check_variable = { SOV_moscow_trial_index < 3 } 
		}
	}
	desc = {
		text = NSB_soviet_paranoia_system_events.19.desc_3 #last Moscow trial 
		trigger = {
			has_country_flag = SOV_purge_event_unavoidable_flag
			check_variable = { SOV_moscow_trial_index > 2 }
		}
	}
	desc = {
		text = NSB_soviet_paranoia_system_events.19.desc_4 #Generic Purge
		trigger = { NOT = { has_country_flag = SOV_purge_event_unavoidable_flag } }
	}

	picture = GFX_report_event_SOV_purge_administration
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			SOV_paranoia_increase_purge_counter_great = yes
		}
	}

	option = { #PURGE MODE ON
		name = NSB_soviet_paranoia_system_events.19.a
		ai_chance = {
			base = 10
		}

		hidden_effect = {
			every_character = {
				limit = {
					is_character_slot = political_advisor
					has_character_flag = SOV_targeted_for_purge_flag
				}
				SOV_purge_character_effect = yes
				
			}
		}

		#Update purged portraits in UI
		hidden_effect = {
			SOV_paranoia_update_portraits_ui = yes
		}

		custom_effect_tooltip = SOV_characters_will_be_purged_tt
		character_list_tooltip = {
			limit = {
				has_character_flag = SOV_targeted_for_purge_flag
			}
		}

		#PARANOIA decreases
		SOV_paranoia_very_high_decrease_effect = yes

		#Increase moscow trial index by 1 for next event title
		add_to_variable = { SOV_moscow_trial_index = 1 }

		if = {
			limit = {
				has_country_flag = SOV_purge_event_unavoidable_flag
			}
			custom_effect_tooltip = SOV_purge_event_unavoidable_purge_great_tt
		}
		else_if = {
			limit = {
				has_political_power < SOV_purge_event_pp_to_avoid_great
			}
			custom_effect_tooltip = SOV_purge_event_not_enough_pp_to_avoid_great_tt
		}

		#Clear flags forbidding the "avoid purge" option from showing up
		SOV_clear_unavoidable_purge_flags_effect = yes
	}

	option = { #PURGE MODE OFF
		name = NSB_soviet_paranoia_system_events.19.b
		ai_chance = {
			base = 1
			modifier = { #Don't go to negative PP please
				factor = 0
				has_political_power < SOV_purge_event_pp_to_avoid_great_pay
			}
		}

		trigger = {
			NOT = { has_political_power < SOV_purge_event_pp_to_avoid_great }
			NOT = { has_country_flag = SOV_purge_event_unavoidable_flag } #Used for historical purges triggered via focus
		}

		add_political_power = SOV_purge_event_pp_to_avoid_great_pay

		#PARANOIA increases
		SOV_paranoia_very_high_increase_effect = yes

		#CLEAN EVERYTHING THANKS
		SOV_clean_purge_targets_effect = yes

		#Increase moscow trial index by 1 for next event title
		add_to_variable = { SOV_moscow_trial_index = 1 }
	}
}

###################
### ARMY PURGES ###
###################

### GENERAL ACCUSED OF TREASON - ARMY ###
unit_leader_event = {
	id = NSB_soviet_paranoia_system_events.21
	title = NSB_soviet_paranoia_system_events.21.t
	desc = NSB_soviet_paranoia_system_events.21.desc
	picture = GFX_report_event_soviet_purge_officers_02
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			SOV_paranoia_increase_purge_counter_regular = yes
		}
	}

	option = { #PURGE
		name = NSB_soviet_paranoia_system_events.21.a
		ai_chance = {
			base = 10
		}

		hidden_effect = {
			random_army_leader = {
				limit = {
					has_character_flag = SOV_targeted_for_purge_flag
				}
				SOV_purge_character_effect = yes
			}
		}
		#custom_effect_tooltip = SOV_retire_purged_character_tt

		custom_effect_tooltip = SOV_characters_will_be_purged_tt
		character_list_tooltip = {
			limit = {
				has_character_flag = SOV_targeted_for_purge_flag
			}
		}

		#Update purged portraits in UI
		hidden_effect = {
			SOV_paranoia_update_portraits_ui = yes
		}

		#RANDOM GENERALS COWED
		SOV_paranoia_daunt_generals_minor_effect = yes

		#PARANOIA DECREASES based on general's level
		set_variable = { SOV_unit_leader_level = SOV_accused_unit_leader_level } #Set the appropriate var used in the scripted effect
		SOV_paranoia_decrease_based_on_unit_leader_level_effect = yes
		custom_effect_tooltip = NSB_soviet_paranoia_system_events.24_paranoia_accused_decrease_tt

		if = {
			limit = {
				has_political_power < SOV_purge_event_pp_to_avoid_regular
			}
			custom_effect_tooltip = SOV_purge_event_not_enough_pp_to_avoid_regular_tt
		}
		clear_variable = SOV_purged_character_for_loc
	}

	option = { #NO WAIT! Let's Think about it
		name = NSB_soviet_paranoia_system_events.21.b
		ai_chance = {
			base = 1
			modifier = { #Don't go to negative PP please
				factor = 0
				has_political_power < SOV_purge_event_pp_to_avoid_regular_pay
			}
		}

		trigger = {
			NOT = { has_political_power < SOV_purge_event_pp_to_avoid_regular }
		}

		add_political_power = SOV_purge_event_pp_to_avoid_regular_pay

		SOV_paranoia_increase_based_on_unit_leader_level_effect = yes

		#PARANOIA INCREASES
		set_variable = { SOV_unit_leader_level = SOV_accused_unit_leader_level } #Set the appropriate var used in the scripted effect
		SOV_paranoia_increase_based_on_unit_leader_level_effect = yes
		custom_effect_tooltip = NSB_soviet_paranoia_system_events.24_paranoia_accused_increase_tt

		#CLEAN EVERYTHING THANKS
		SOV_clean_purge_targets_effect = yes
		clear_variable = SOV_purged_character_for_loc
	}
}

### CONSPIRACY IN THE ACADEMY - ARMY ###
country_event = {
	id = NSB_soviet_paranoia_system_events.22
	title = NSB_soviet_paranoia_system_events.22.t
	desc = NSB_soviet_paranoia_system_events.22.desc
	picture = GFX_report_event_SOV_purge_administration
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			SOV_paranoia_increase_purge_counter_regular = yes
		}
	}

	option = { #PURGE
		name = NSB_soviet_paranoia_system_events.22.a
		ai_chance = {
			base = 10
		}

		add_ideas = SOV_anti_soviet_military_thinking_banned_army

		#Update purged portraits in UI
		hidden_effect = {
			SOV_paranoia_update_portraits_ui = yes
		}

		#PARANOIA decreases
		SOV_paranoia_low_decrease_effect = yes

		if = {
			limit = {
				has_political_power < SOV_purge_event_pp_to_avoid_regular
			}
			custom_effect_tooltip = SOV_purge_event_not_enough_pp_to_avoid_regular_tt
		}
	}

	option = { #NO WAIT! Let's Think about it
		name = NSB_soviet_paranoia_system_events.22.b
		ai_chance = {
			base = 1
			modifier = { #Don't go to negative PP please
				factor = 0
				has_political_power < SOV_purge_event_pp_to_avoid_regular_pay
			}
		}

		trigger = {
			NOT = { has_political_power < SOV_purge_event_pp_to_avoid_regular }
		}

		add_political_power = SOV_purge_event_pp_to_avoid_regular_pay

		#PARANOIA increases
		SOV_paranoia_low_increase_effect = yes
	}
}

### ANTI-SABOTEUR CAMPAIGN - ARMY ###
country_event = {
	id = NSB_soviet_paranoia_system_events.23
	title = NSB_soviet_paranoia_system_events.23.t
	desc = NSB_soviet_paranoia_system_events.23.desc
	picture = GFX_report_event_soviet_soldiers_tank
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			SOV_paranoia_increase_purge_counter_regular = yes
		}
	}

	option = { #PURGE
		name = NSB_soviet_paranoia_system_events.23.a
		ai_chance = {
			base = 10
		}

		add_timed_idea = {
			idea = SOV_training_activities_curtailed
			days = 365
		}

		#Update purged portraits in UI
		hidden_effect = {
			SOV_paranoia_update_portraits_ui = yes
		}

		#PARANOIA decreases
		SOV_paranoia_low_decrease_effect = yes

		if = {
			limit = {
				has_political_power < SOV_purge_event_pp_to_avoid_regular
			}
			custom_effect_tooltip = SOV_purge_event_not_enough_pp_to_avoid_regular_tt
		} 
	}

	option = { #NO WAIT! Let's Think about it
		name = NSB_soviet_paranoia_system_events.23.b
		ai_chance = {
			base = 1
			modifier = { #Don't go to negative PP please
				factor = 0
				has_political_power < SOV_purge_event_pp_to_avoid_regular_pay
			}
		}

		trigger = {
			NOT = { has_political_power < SOV_purge_event_pp_to_avoid_regular }
		}

		add_political_power = SOV_purge_event_pp_to_avoid_regular_pay

		#PARANOIA increases
		SOV_paranoia_low_increase_effect = yes
	}
}

### GENERAL ACCUSES GENERAL - ARMY ###
unit_leader_event = {
	id = NSB_soviet_paranoia_system_events.24
	title = NSB_soviet_paranoia_system_events.24.t
	desc = NSB_soviet_paranoia_system_events.24.desc
	picture = GFX_report_event_soviet_purge_officers_02
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			SOV_paranoia_increase_purge_counter_regular = yes
		}
	}

	option = { #PURGE ACCUSED
		name = NSB_soviet_paranoia_system_events.24.a
		ai_chance = {
			base = 10
		}

		hidden_effect = {
			random_army_leader = {
				limit = {
					has_character_flag = SOV_purge_accused_flag
				}
				SOV_purge_character_effect = yes
			}
		}
		#custom_effect_tooltip = SOV_retire_accused_character_tt
		custom_effect_tooltip = SOV_characters_will_be_purged_tt
		character_list_tooltip = {
			limit = {
				has_character_flag = SOV_purge_accused_flag
			}
		}

		#Update purged portraits in UI
		hidden_effect = {
			SOV_paranoia_update_portraits_ui = yes
		}

		#RANDOM GENERALS COWED
		SOV_paranoia_daunt_generals_minor_effect = yes
		
		#PARANOIA decreases based on general's level
		set_variable = { SOV_unit_leader_level = SOV_accused_unit_leader_level } #Set the appropriate var used in the scripted effect
		SOV_paranoia_decrease_based_on_unit_leader_level_effect = yes
		custom_effect_tooltip = NSB_soviet_paranoia_system_events.24_paranoia_accused_decrease_tt

		#CLEAN EVERYTHING THANKS
		hidden_effect = {
			clear_variable = SOV_accused_unit_leader_level
			clear_variable = SOV_accuser_unit_leader_level
			clear_variable = SOV_accused_character_for_loc
			clear_variable = SOV_accuser_character_for_loc
			every_army_leader = {
				limit = {
					has_character_flag = SOV_purge_accuser_flag
				}
				clr_character_flag = SOV_purge_accuser_flag
			}
		}

		if = {
			limit = {
				has_political_power < SOV_purge_event_pp_to_avoid_regular
			}
			custom_effect_tooltip = SOV_purge_event_not_enough_pp_to_avoid_regular_tt
		}
	}

	option = { #PURGE ACCUSER 
		name = NSB_soviet_paranoia_system_events.24.b
		ai_chance = {
			base = 5
			modifier = {
				factor = 2
				SOV_is_going_historical_stalinist = no
			}
		}

		hidden_effect = {
			random_army_leader = {
				limit = {
					has_character_flag = SOV_purge_accuser_flag
				}
				SOV_purge_character_effect = yes
			}
		}
		#custom_effect_tooltip = SOV_retire_accuser_character_tt
		custom_effect_tooltip = SOV_characters_will_be_purged_tt
		character_list_tooltip = {
			limit = {
				has_character_flag = SOV_purge_accuser_flag
			}
		}

		#RANDOM GENERALS COWED
		SOV_paranoia_daunt_generals_minor_effect = yes

		#PARANOIA decreases based on general's level
		set_variable = { SOV_unit_leader_level = SOV_accuser_unit_leader_level } #Set the appropriate var used in the scripted effect and clean vars and flags
		SOV_paranoia_decrease_based_on_unit_leader_level_effect = yes
		custom_effect_tooltip = NSB_soviet_paranoia_system_events.24_paranoia_accused_decrease_tt

		#CLEAN EVERYTHING THANKS
		hidden_effect = {
			clear_variable = SOV_accused_unit_leader_level
			clear_variable = SOV_accuser_unit_leader_level
			clear_variable = SOV_accused_character_for_loc
			clear_variable = SOV_accuser_character_for_loc
			every_army_leader = {
				limit = {
					has_character_flag = SOV_purge_accused_flag
				}
				clr_character_flag = SOV_purge_accused_flag
			}
		}

		if = {
			limit = {
				has_political_power < SOV_purge_event_pp_to_avoid_regular
			}
			custom_effect_tooltip = SOV_purge_event_not_enough_pp_to_avoid_regular_tt
		}
	}

	option = { #NO WAIT! Let's Think about it
		name = NSB_soviet_paranoia_system_events.24.c
		ai_chance = {
			base = 2
			modifier = { #Don't go to negative PP please
				factor = 0
				has_political_power < SOV_purge_event_pp_to_avoid_regular_pay
			}
		}

		trigger = {
			NOT = { has_political_power < SOV_purge_event_pp_to_avoid_regular }
		}

		add_political_power = SOV_purge_event_pp_to_avoid_regular_pay

		#PARANOIA INCREASES
		set_variable = { SOV_unit_leader_level = SOV_accused_unit_leader_level } #Set the appropriate var used in the scripted effect and clean vars and flags
		add_to_variable = { SOV_unit_leader_level = SOV_accuser_unit_leader_level }
		SOV_paranoia_increase_based_on_unit_leader_level_effect = yes
		custom_effect_tooltip = NSB_soviet_paranoia_system_events.24_paranoia_both_increase_tt

		#CLEAN EVERYTHING THANKS
		hidden_effect = {
			clear_variable = SOV_accused_unit_leader_level
			clear_variable = SOV_accuser_unit_leader_level
			clear_variable = SOV_accused_character_for_loc
			clear_variable = SOV_accuser_character_for_loc
			random_army_leader = {
				limit = {
					has_character_flag = SOV_purge_accused_flag
				}
				clr_character_flag = SOV_purge_accused_flag
			}
			random_army_leader = {
				limit = {
					has_character_flag = SOV_purge_accuser_flag
				}
				clr_character_flag = SOV_purge_accuser_flag
			}
		}
	}
}

### GREAT PURGE OF JUNIOR ARMY OFFICERS - ARMY ###
country_event = {
	id = NSB_soviet_paranoia_system_events.28
	title = NSB_soviet_paranoia_system_events.28.t
	desc = NSB_soviet_paranoia_system_events.28.desc
	picture = GFX_report_event_SOV_purge_young_officers
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			SOV_paranoia_increase_purge_counter_great = yes
		}
	}

	option = { #PURGE THEM!!
		name = NSB_soviet_paranoia_system_events.28.a
		ai_chance = {
			base = 10
		}

		if = {
			limit = {
				has_idea = SOV_purged_junior_army_officers_3
			}
			#NOTHING HAPPENS, but this should not be a possibility
			log = "I CAN'T MAKE THIS WORSE FOR GODS SAKE!"
		}
		else_if = {
			limit = {
				has_idea = SOV_purged_junior_army_officers_2
			}
			swap_ideas = {
				remove_idea = SOV_purged_junior_army_officers_2
				add_idea = SOV_purged_junior_army_officers_3
			}
		}
		else_if = {
			limit = {
				has_idea = SOV_purged_junior_army_officers_1
			}
			swap_ideas = {
				remove_idea = SOV_purged_junior_army_officers_1
				add_idea = SOV_purged_junior_army_officers_2
			}
		}
		else = {
			add_ideas = SOV_purged_junior_army_officers_1
		}

		#Update purged portraits in UI
		hidden_effect = {
			SOV_paranoia_update_portraits_ui = yes
		}
		
		#PARANOIA decreases
		SOV_paranoia_medium_decrease_effect = yes

		if = {
			limit = {
				has_country_flag = SOV_purge_event_unavoidable_flag
			}
			custom_effect_tooltip = SOV_purge_event_unavoidable_purge_great_tt
		}
		else_if = {
			limit = {
				has_political_power < SOV_purge_event_pp_to_avoid_great
			}
			custom_effect_tooltip = SOV_purge_event_not_enough_pp_to_avoid_great_tt
		}

		#Clear flags forbidding the "avoid purge" option from showing up
		SOV_clear_unavoidable_purge_flags_effect = yes
	}

	option = { #NO WAIT! Let's Think about it
		name = NSB_soviet_paranoia_system_events.28.b
		ai_chance = {
			base = 1
			modifier = { #Don't go to negative PP please
				factor = 0
				has_political_power < SOV_purge_event_pp_to_avoid_great_pay
			}
		}

		trigger = {
			NOT = { has_political_power < SOV_purge_event_pp_to_avoid_great }
			NOT = { has_country_flag = SOV_purge_event_unavoidable_flag } #Used for historical purges triggered via focus
		}

		add_political_power = SOV_purge_event_pp_to_avoid_great_pay

		#PARANOIA INCREASES
		SOV_paranoia_high_increase_effect = yes
	}
}

### GREAT PURGE TRIAL OF THE GENERALS - ARMY ###
country_event = {
	id = NSB_soviet_paranoia_system_events.29
	title = NSB_soviet_paranoia_system_events.29.t
	desc = NSB_soviet_paranoia_system_events.29.desc
	picture = GFX_report_event_soviet_purge_officers_01
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			SOV_paranoia_increase_purge_counter_great = yes
		}
	}

	option = { #PURGE THEM!!
		name = NSB_soviet_paranoia_system_events.29.a
		ai_chance = {
			base = 10
		}

		hidden_effect = {
			#Purge any Advisors
			every_character = {
				limit = {
					has_army_ledger = yes
					has_character_flag = SOV_targeted_for_purge_flag
				}
				SOV_purge_character_effect = yes	
				log = "Hey I am [THIS.GetName] I am in the Event!"
			}

			#Purge any Marshals/Generals #This is a duplicate as a workaround for tooltip purposes
			every_army_leader = {
				limit = {
					OR = {
						is_field_marshal = yes
						is_corps_commander = yes
					}
					has_character_flag = SOV_targeted_for_purge_flag
				}
				SOV_purge_character_effect = yes	
				log = "Hey I am [THIS.GetName] I am in the Event!"
			}
		}

		#Update purged portraits in UI
		hidden_effect = {
			SOV_paranoia_update_portraits_ui = yes
		}

		custom_effect_tooltip = SOV_characters_will_be_purged_tt
		character_list_tooltip = {
			limit = {
				has_character_flag = SOV_targeted_for_purge_flag
			}
		}

		#RANDOM GENERALS COWED
		SOV_paranoia_daunt_generals_effect = yes

		#PARANOIA decreases
		SOV_paranoia_very_high_decrease_effect = yes

		if = {
			limit = {
				has_country_flag = SOV_purge_event_unavoidable_flag
			}
			custom_effect_tooltip = SOV_purge_event_unavoidable_purge_great_tt
		}
		else_if = {
			limit = {
				has_political_power < SOV_purge_event_pp_to_avoid_great
			}
			custom_effect_tooltip = SOV_purge_event_not_enough_pp_to_avoid_great_tt
		}

		#Clear flags forbidding the "avoid purge" option from showing up
		SOV_clear_unavoidable_purge_flags_effect = yes 
	}

	option = { #NO WAIT! Let's Think about it
		name = NSB_soviet_paranoia_system_events.29.b
		ai_chance = {
			base = 1
			modifier = { #Don't go to negative PP please
				factor = 0
				has_political_power < SOV_purge_event_pp_to_avoid_great_pay
			}
		}

		trigger = {
			NOT = { has_political_power < SOV_purge_event_pp_to_avoid_great }
			NOT = { has_country_flag = SOV_purge_event_unavoidable_flag } #Used for historical purges triggered via focus
		}

		add_political_power = SOV_purge_event_pp_to_avoid_great_pay

		#PARANOIA INCREASES
		SOV_paranoia_very_high_increase_effect = yes

		#CLEAN EVERYTHING THANKS
		SOV_clean_purge_targets_effect = yes
	}
}

###################
### NAVY PURGES ###
###################

### ADMIRAL ACCUSED OF TREASON - NAVY ###
unit_leader_event = {
	id = NSB_soviet_paranoia_system_events.31
	title = NSB_soviet_paranoia_system_events.31.t
	desc = NSB_soviet_paranoia_system_events.31.desc
	picture = GFX_report_event_soviet_purge_trial
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			SOV_paranoia_increase_purge_counter_regular = yes
		}
	}

	option = { #PURGE
		name = NSB_soviet_paranoia_system_events.31.a
		ai_chance = {
			base = 10
		}

		hidden_effect = {
			random_navy_leader = {
				limit = {
					has_character_flag = SOV_targeted_for_purge_flag
				}
				SOV_purge_character_effect = yes
			}
		}
		#custom_effect_tooltip = SOV_retire_purged_character_tt
		custom_effect_tooltip = SOV_characters_will_be_purged_tt
		character_list_tooltip = {
			limit = {
				has_character_flag = SOV_targeted_for_purge_flag
			}
		}

		#Update purged portraits in UI
		hidden_effect = {
			SOV_paranoia_update_portraits_ui = yes
		}

		#RANDOM ADMIRALS COWED
		SOV_paranoia_daunt_admirals_minor_effect = yes

		#PARANOIA DECREASES based on general's level
		set_variable = { SOV_unit_leader_level = SOV_accused_unit_leader_level } #Set the appropriate var used in the scripted effect
		SOV_paranoia_decrease_based_on_unit_leader_level_effect = yes
		custom_effect_tooltip = NSB_soviet_paranoia_system_events.24_paranoia_accused_decrease_tt

		if = {
			limit = {
				has_political_power < SOV_purge_event_pp_to_avoid_regular
			}
			custom_effect_tooltip = SOV_purge_event_not_enough_pp_to_avoid_regular_tt
		}
		clear_variable = SOV_purged_character_for_loc 
	}

	option = { #NO WAIT! Let's Think about it
		name = NSB_soviet_paranoia_system_events.21.b
		ai_chance = {
			base = 1
			modifier = { #Don't go to negative PP please
				factor = 0
				has_political_power < SOV_purge_event_pp_to_avoid_regular_pay
			}
		}

		trigger = {
			NOT = { has_political_power < SOV_purge_event_pp_to_avoid_regular }
		}

		add_political_power = SOV_purge_event_pp_to_avoid_regular_pay

		#PARANOIA INCREASES
		set_variable = { SOV_unit_leader_level = SOV_accused_unit_leader_level } #Set the appropriate var used in the scripted effect
		SOV_paranoia_increase_based_on_unit_leader_level_effect = yes
		custom_effect_tooltip = NSB_soviet_paranoia_system_events.24_paranoia_accused_increase_tt

		#CLEAN EVERYTHING THANKS
		SOV_clean_purge_targets_effect = yes
		clear_variable = SOV_purged_character_for_loc
	}
}

### CONSPIRACY IN THE ACADEMY - NAVY ###
#Loc taken from the Army event
country_event = {
	id = NSB_soviet_paranoia_system_events.32
	title = NSB_soviet_paranoia_system_events.22.t
	desc = NSB_soviet_paranoia_system_events.22.desc
	picture = GFX_report_event_SOV_purge_administration
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			SOV_paranoia_increase_purge_counter_regular = yes
		}
	}

	option = { #PURGE
		name = NSB_soviet_paranoia_system_events.22.a
		ai_chance = {
			base = 10
		}

		add_ideas = SOV_anti_soviet_military_thinking_banned_navy

		#Update purged portraits in UI
		hidden_effect = {
			SOV_paranoia_update_portraits_ui = yes
		}

		#PARANOIA decreases
		SOV_paranoia_medium_decrease_effect = yes

		if = {
			limit = {
				has_political_power < SOV_purge_event_pp_to_avoid_regular
			}
			custom_effect_tooltip = SOV_purge_event_not_enough_pp_to_avoid_regular_tt
		}	
	}

	option = { #NO WAIT! Let's Think about it
		name = NSB_soviet_paranoia_system_events.22.b
		ai_chance = {
			base = 1
			modifier = { #Don't go to negative PP please
				factor = 0
				has_political_power < SOV_purge_event_pp_to_avoid_regular_pay
			}
		}

		trigger = {
			NOT = { has_political_power < SOV_purge_event_pp_to_avoid_regular }
		}

		add_political_power = SOV_purge_event_pp_to_avoid_regular_pay

		#PARANOIA increases
		SOV_paranoia_low_increase_effect = yes

		#CLEAN EVERYTHING THANKS
		SOV_clean_purge_targets_effect = yes
	}
}

### ANTI-SABOTEUR CAMPAIGN - NAVY ###
country_event = {
	id = NSB_soviet_paranoia_system_events.33
	title = NSB_soviet_paranoia_system_events.23.t
	desc = NSB_soviet_paranoia_system_events.33.desc
	picture = GFX_report_event_SOV_purge_navy
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			SOV_paranoia_increase_purge_counter_regular = yes
		}
	}

	option = { #PURGE
		name = NSB_soviet_paranoia_system_events.23.a
		ai_chance = {
			base = 10
		}

		add_timed_idea = {
			idea = SOV_shipyard_staff_purged
			days = 365
		}

		#Update purged portraits in UI
		hidden_effect = {
			SOV_paranoia_update_portraits_ui = yes
		}

		#PARANOIA decreases
		SOV_paranoia_medium_decrease_effect = yes

		if = {
			limit = {
				has_political_power < SOV_purge_event_pp_to_avoid_regular
			}
			custom_effect_tooltip = SOV_purge_event_not_enough_pp_to_avoid_regular_tt
		}

		# Increase opposition Navy Support 
	}

	option = { #NO WAIT! Let's Think about it
		name = NSB_soviet_paranoia_system_events.23.b
		ai_chance = {
			base = 1
			modifier = { #Don't go to negative PP please
				factor = 0
				has_political_power < SOV_purge_event_pp_to_avoid_regular_pay
			}
		}

		trigger = {
			NOT = { has_political_power < SOV_purge_event_pp_to_avoid_regular }
		}

		add_political_power = SOV_purge_event_pp_to_avoid_regular_pay

		#PARANOIA increases
		SOV_paranoia_low_increase_effect = yes

		#CLEAN EVERYTHING THANKS
		SOV_clean_purge_targets_effect = yes
	}
}

### GREAT PURGE - JUNIOR NAVY OFFICERS - NAVY ###
country_event = {
	id = NSB_soviet_paranoia_system_events.38
	title = NSB_soviet_paranoia_system_events.38.t
	desc = NSB_soviet_paranoia_system_events.38.desc
	picture = GFX_report_event_SOV_purge_young_officers
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			SOV_paranoia_increase_purge_counter_great = yes
		}
	}

	option = { #PURGE
		name = NSB_soviet_paranoia_system_events.28.a
		ai_chance = {
			base = 10
		}

		if = {
			limit = {
				has_idea = SOV_purged_junior_navy_officers_3
			}
			# NOTHING HAPPENS, but this should not be a possibility
			log = "I CAN'T MAKE THIS WORSE FOR GODS SAKE!"
		}
		else_if = {
			limit = {
				has_idea = SOV_purged_junior_navy_officers_2
			}
			swap_ideas = {
				remove_idea = SOV_purged_junior_navy_officers_2
				add_idea = SOV_purged_junior_navy_officers_3
			}
		}
		else_if = {
			limit = {
				has_idea = SOV_purged_junior_navy_officers_1
			}
			swap_ideas = {
				remove_idea = SOV_purged_junior_navy_officers_1
				add_idea = SOV_purged_junior_navy_officers_2
			}
		}
		else = {
			add_ideas = SOV_purged_junior_navy_officers_1
		}

		#Update purged portraits in UI
		hidden_effect = {
			SOV_paranoia_update_portraits_ui = yes
		}

		#PARANOIA decreases
		SOV_paranoia_low_decrease_effect = yes

		if = {
			limit = {
				has_country_flag = SOV_purge_event_unavoidable_flag
			}
			custom_effect_tooltip = SOV_purge_event_unavoidable_purge_great_tt
		}
		else_if = {
			limit = {
				has_political_power < SOV_purge_event_pp_to_avoid_great
			}
			custom_effect_tooltip = SOV_purge_event_not_enough_pp_to_avoid_great_tt
		}

		#Clear flags forbidding the "avoid purge" option from showing up
		SOV_clear_unavoidable_purge_flags_effect = yes	

		# Increase opposition Navy Support 
	}

	option = { #NO WAIT! Let's Think about it
		name = NSB_soviet_paranoia_system_events.28.b
		ai_chance = {
			base = 1
			modifier = { #Don't go to negative PP please
				factor = 0
				has_political_power < SOV_purge_event_pp_to_avoid_great_pay
			}
		}

		trigger = {
			NOT = { has_political_power < SOV_purge_event_pp_to_avoid_great }
			NOT = { has_country_flag = SOV_purge_event_unavoidable_flag } #Used for historical purges triggered via focus
		}

		add_political_power = SOV_purge_event_pp_to_avoid_great_pay

		#PARANOIA increases
		SOV_paranoia_high_increase_effect = yes
	}
}

### GREAT PURGE - TRIAL OF THE ADMIRALS - NAVY ###
country_event = {
	id = NSB_soviet_paranoia_system_events.39
	title = NSB_soviet_paranoia_system_events.39.t
	desc = NSB_soviet_paranoia_system_events.39.desc
	picture = GFX_report_event_SOV_purge_navy
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			SOV_paranoia_increase_purge_counter_great = yes
		}
	}

	option = { #PURGE
		name = NSB_soviet_paranoia_system_events.29.a
		ai_chance = {
			base = 10
		}

		hidden_effect = {
			#Purge any Advisors
			every_character = {
				limit = {
					has_navy_ledger = yes
					has_character_flag = SOV_targeted_for_purge_flag
				}
				SOV_purge_character_effect = yes	
			}

			#Purge any Admirals # This is a duplicate as a workaround for tooltip purposes
			every_navy_leader = {
				limit = {
					has_character_flag = SOV_targeted_for_purge_flag
				}
				SOV_purge_character_effect = yes	
			}
		}

		#Update purged portraits in UI
		hidden_effect = {
			SOV_paranoia_update_portraits_ui = yes
		}

		custom_effect_tooltip = SOV_characters_will_be_purged_tt
		character_list_tooltip = {
			limit = {
				has_character_flag = SOV_targeted_for_purge_flag
			}
		}

		#RANDOM ADMIRALS COWED
		SOV_paranoia_daunt_admirals_effect = yes

		#PARANOIA decreases
		SOV_paranoia_very_high_decrease_effect = yes

		if = {
			limit = {
				has_country_flag = SOV_purge_event_unavoidable_flag
			}
			custom_effect_tooltip = SOV_purge_event_unavoidable_purge_great_tt
		}
		else_if = {
			limit = {
				has_political_power < SOV_purge_event_pp_to_avoid_great
			}
			custom_effect_tooltip = SOV_purge_event_not_enough_pp_to_avoid_great_tt
		}

		#Clear flags forbidding the "avoid purge" option from showing up
		SOV_clear_unavoidable_purge_flags_effect = yes 
	}

	option = { #NO WAIT! Let's Think about it
		name = NSB_soviet_paranoia_system_events.29.b
		ai_chance = {
			base = 1
			modifier = { #Don't go to negative PP please
				factor = 0
				has_political_power < SOV_purge_event_pp_to_avoid_great_pay
			}
		}

		trigger = {
			NOT = { has_political_power < SOV_purge_event_pp_to_avoid_great }
			NOT = { has_country_flag = SOV_purge_event_unavoidable_flag } #Used for historical purges triggered via focus
		}

		add_political_power = SOV_purge_event_pp_to_avoid_great_pay

		#PARANOIA increases
		SOV_paranoia_very_high_increase_effect = yes

		#CLEAN EVERYTHING THANKS
		SOV_clean_purge_targets_effect = yes
	}
}


#######################
### AIRFORCE PURGES ###
#######################

### CONSPIRACY IN THE ACADEMY - AIRFORCE ###
country_event = {
	id = NSB_soviet_paranoia_system_events.41
	title = NSB_soviet_paranoia_system_events.22.t
	desc = NSB_soviet_paranoia_system_events.22.desc
	picture = GFX_report_event_SOV_purge_administration
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			SOV_paranoia_increase_purge_counter_regular = yes
		}
	}

	option = {
		name = NSB_soviet_paranoia_system_events.22.a
		ai_chance = {
			base = 10
		}

		add_ideas = SOV_anti_soviet_military_thinking_banned_airforce

		#Update purged portraits in UI
		hidden_effect = {
			SOV_paranoia_update_portraits_ui = yes
		}

		#PARANOIA decreases
		SOV_paranoia_medium_decrease_effect = yes

		if = {
			limit = {
				has_political_power < SOV_purge_event_pp_to_avoid_regular
			}
			custom_effect_tooltip = SOV_purge_event_not_enough_pp_to_avoid_regular_tt
		}
	}

	option = {
		name = NSB_soviet_paranoia_system_events.22.b
		ai_chance = {
			base = 1
			modifier = { #Don't go to negative PP please
				factor = 0
				has_political_power < SOV_purge_event_pp_to_avoid_regular_pay
			}
		}

		trigger = {
			NOT = { has_political_power < SOV_purge_event_pp_to_avoid_regular }
		}

		add_political_power = SOV_purge_event_pp_to_avoid_regular_pay

		#PARANOIA increases
		SOV_paranoia_low_increase_effect = yes
	}
}

#### ANTI-SABOTEUR CAMPAIGN - AIRFORCE ###
country_event = {
	id = NSB_soviet_paranoia_system_events.42
	title = NSB_soviet_paranoia_system_events.23.t
	desc = NSB_soviet_paranoia_system_events.42.desc
	picture = GFX_report_event_SOV_purge_aircraft_2
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			SOV_paranoia_increase_purge_counter_regular = yes
		}
	}

	option = {
		name = NSB_soviet_paranoia_system_events.23.a
		ai_chance = {
			base = 10
		}

		add_timed_idea = {
			idea = SOV_ground_based_training
			days = 365
		}

		#Update purged portraits in UI
		hidden_effect = {
			SOV_paranoia_update_portraits_ui = yes
		}

		#PARANOIA decreases
		SOV_paranoia_medium_decrease_effect = yes

		if = {
			limit = {
				has_political_power < SOV_purge_event_pp_to_avoid_regular
			}
			custom_effect_tooltip = SOV_purge_event_not_enough_pp_to_avoid_regular_tt
		}	
	}

	option = {
		name = NSB_soviet_paranoia_system_events.23.b
		ai_chance = {
			base = 1
			modifier = { #Don't go to negative PP please
				factor = 0
				has_political_power < SOV_purge_event_pp_to_avoid_regular_pay
			}
		}

		trigger = {
			NOT = { has_political_power < SOV_purge_event_pp_to_avoid_regular }
		}

		add_political_power = SOV_purge_event_pp_to_avoid_regular_pay

		#PARANOIA increases
		SOV_paranoia_low_increase_effect = yes
	}
}

### GREAT PURGE - DESIGN BUREAU DISSOLVED - AIRFORCE ###
country_event = {
	id = NSB_soviet_paranoia_system_events.48
	title = NSB_soviet_paranoia_system_events.48.t
	desc = NSB_soviet_paranoia_system_events.48.desc
	picture = GFX_report_event_SOV_purge_aircraft_1
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			SOV_paranoia_increase_purge_counter_great = yes
		}
	}

	option = {
		name = NSB_soviet_paranoia_system_events.48.a
		ai_chance = {
			base = 10
		}

		if = {
			limit = { # MIG
				check_variable = {
					var = SOV_random_bureau_to_dissolve
					value = 0.75
					compare = greater_than_or_equals 
				}
			}
			remove_ideas = SOV_mig_design_bureau
			set_country_flag = SOV_mig_design_bureau_dissolved_flag
			unlock_decision_tooltip = SOV_reinstate_mig_design_bureau
		}
		else_if = {
			limit = { # ILYUSHIN
				check_variable = {
					var = SOV_random_bureau_to_dissolve
					value = 0.5
					compare = greater_than_or_equals 
				}
			}
			remove_ideas = SOV_ilyushin_design_bureau
			set_country_flag = SOV_ilyushin_design_bureau_dissolved_flag
			unlock_decision_tooltip = SOV_reinstate_ilyushin_design_bureau
		}
		else_if = {
			limit = { # TUPOLEV
				check_variable = {
					var = SOV_random_bureau_to_dissolve
					value = 0.25
					compare = greater_than_or_equals 
				}
			}
			remove_ideas = SOV_tupolev_design_bureau
			set_country_flag = SOV_tupolev_design_bureau_dissolved_flag
			unlock_decision_tooltip = SOV_reinstate_tupolev_design_bureau
		}
		else= { #YAKOVLEV
			remove_ideas = SOV_yakovlev_design_bureau
			set_country_flag = SOV_yakovlev_design_bureau_dissolved_flag
			unlock_decision_tooltip = SOV_reinstate_yakovlev_design_bureau
		}

		#Update purged portraits in UI
		hidden_effect = {
			SOV_paranoia_update_portraits_ui = yes
		}

		#PARANOIA decreases
		SOV_paranoia_very_high_decrease_effect = yes

		if = {
			limit = {
				has_country_flag = SOV_purge_event_unavoidable_flag
			}
			custom_effect_tooltip = SOV_purge_event_unavoidable_purge_great_tt
		}
		else_if = {
			limit = {
				has_political_power < SOV_purge_event_pp_to_avoid_great
			}
			custom_effect_tooltip = SOV_purge_event_not_enough_pp_to_avoid_great_tt
		}
		
		#Clear flags forbidding the "avoid purge" option from showing up
		SOV_clear_unavoidable_purge_flags_effect = yes
	}

	option = {
		name = NSB_soviet_paranoia_system_events.48.b
		ai_chance = {
			base = 1
			modifier = { #Don't go to negative PP please
				factor = 0
				has_political_power < SOV_purge_event_pp_to_avoid_great_pay
			}
		}

		trigger = {
			NOT = { has_political_power < SOV_purge_event_pp_to_avoid_great }
			NOT = { has_country_flag = SOV_purge_event_unavoidable_flag } #Used for historical purges triggered via focus
		}

		add_political_power = SOV_purge_event_pp_to_avoid_great_pay

		#PARANOIA increases
		SOV_paranoia_very_high_increase_effect = yes
	}
}

### GREAT PURGE - AIRFORCE CHIEFS - AIRFORCE ###
country_event = {
	id = NSB_soviet_paranoia_system_events.49
	title = NSB_soviet_paranoia_system_events.49.t
	desc = NSB_soviet_paranoia_system_events.49.desc
	picture = GFX_report_event_soviet_purge_trial
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_country_flag = SOV_purged_airforce_chiefs_flag }
				}
				set_country_flag = SOV_purged_airforce_chiefs_flag
			}		
			SOV_paranoia_increase_purge_counter_great = yes
		}
	}

	option = { #PURGE MODE ON
		name = NSB_soviet_paranoia_system_events.49.a
		ai_chance = {
			base = 10
		}

		hidden_effect = {
			every_character = {
				limit = {
					has_character_flag = SOV_targeted_for_purge_flag
					has_air_ledger = yes
				}
				SOV_purge_character_effect = yes
			}
		}

		#Update purged portraits in UI
		hidden_effect = {
			SOV_paranoia_update_portraits_ui = yes
		}

		custom_effect_tooltip = SOV_characters_will_be_purged_tt
		character_list_tooltip = {
			limit = {
				has_character_flag = SOV_targeted_for_purge_flag
			}
		}

		#PARANOIA decreases
		SOV_paranoia_high_decrease_effect = yes

		if = {
			limit = {
				has_political_power < SOV_purge_event_pp_to_avoid_great
			}
			custom_effect_tooltip = SOV_purge_event_not_enough_pp_to_avoid_great_tt
		}
	}

	option = { #PURGE MODE OFF
		name = NSB_soviet_paranoia_system_events.49.b
		ai_chance = {
			base = 1
			modifier = { #Don't go to negative PP please
				factor = 0
				has_political_power < SOV_purge_event_pp_to_avoid_great_pay
			}
		}

		trigger = {
			NOT = { has_political_power < SOV_purge_event_pp_to_avoid_great }
		}

		add_political_power = SOV_purge_event_pp_to_avoid_great_pay

		#PARANOIA increases
		SOV_paranoia_low_increase_effect = yes

		#CLEAN EVERYTHING THANKS
		SOV_clean_purge_targets_effect = yes
	}
}



########  ########   #######  ########     ###     ######      ###    ##    ## ########     ###    
##     ## ##     ## ##     ## ##     ##   ## ##   ##    ##    ## ##   ###   ## ##     ##   ## ##   
##     ## ##     ## ##     ## ##     ##  ##   ##  ##         ##   ##  ####  ## ##     ##  ##   ##  
########  ########  ##     ## ########  ##     ## ##   #### ##     ## ## ## ## ##     ## ##     ## 
##        ##   ##   ##     ## ##        ######### ##    ##  ######### ##  #### ##     ## ######### 
##        ##    ##  ##     ## ##        ##     ## ##    ##  ##     ## ##   ### ##     ## ##     ## 
##        ##     ##  #######  ##        ##     ##  ######   ##     ## ##    ## ########  ##     ## 


#Propaganda Dispatcher - Left Slot - Used to update Campaign GFX when it's old.
country_event = {
	id = NSB_soviet_propaganda_capmaign_events.101
	title = NSB_soviet_propaganda_capmaign_events.101.t
	desc = NSB_soviet_propaganda_capmaign_events.101.desc
	
	is_triggered_only = yes

	trigger = {
		check_variable = { SOV_propaganda_left_poster_to_age = SOV_poster_left_icon_frame } #So that this does not happen if a propaganda is cancelled, breaking everything
	}

	hidden = yes

	immediate = {
		set_country_flag = SOV_propaganda_left_slot_is_old_flag
		#log = "I AM HERE: LEFT FRAME IS [?SOV_poster_left_icon_frame] // POSTER TO AGE IS [?SOV_propaganda_left_poster_to_age]" #Debug
	}
}

#Propaganda Dispatcher - Center Slot - Used to update Campaign GFX when it's old.
country_event = {
	id = NSB_soviet_propaganda_capmaign_events.102
	title = NSB_soviet_propaganda_capmaign_events.102.t
	desc = NSB_soviet_propaganda_capmaign_events.102.desc
	
	is_triggered_only = yes

	trigger = {
		check_variable = { SOV_propaganda_center_poster_to_age = SOV_poster_center_icon_frame } #So that this does not happen if a propaganda is cancelled, breaking everything
	}

	hidden = yes

	immediate = {
		set_country_flag = SOV_propaganda_center_slot_is_old_flag
		#log = "I AM HERE: CENTER FRAME IS [?SOV_poster_center_icon_frame] // POSTER TO AGE IS [?SOV_propaganda_center_poster_to_age]" #Debug
	}
}

#Propaganda Dispatcher - Right Slot - Used to update Campaign GFX when it's old.
country_event = {
	id = NSB_soviet_propaganda_capmaign_events.103
	title = NSB_soviet_propaganda_capmaign_events.103.t
	desc = NSB_soviet_propaganda_capmaign_events.103.desc
	
	is_triggered_only = yes

	trigger = {
		check_variable = { SOV_propaganda_right_poster_to_age = SOV_poster_right_icon_frame } #So that this does not happen if a propaganda is cancelled, breaking everything
	}

	hidden = yes

	immediate = {
		set_country_flag = SOV_propaganda_right_slot_is_old_flag
		#log = "I AM HERE: RIGHT FRAME IS [?SOV_poster_right_icon_frame] // POSTER TO AGE IS [?SOV_propaganda_right_poster_to_age]" #Debug
	}
}

# YOUNG BUILDERS OF COMMUNISM - event for SOV's puppets
country_event = {
	id = NSB_soviet_propaganda_capmaign_events.1
	title = NSB_soviet_propaganda_capmaign_events.1.t
	desc = NSB_soviet_propaganda_capmaign_events.1.desc
	picture = GFX_report_event_SOV_young_builders_of_communism
	
	is_triggered_only = yes

	option = { #OK
		name = NSB_soviet_propaganda_capmaign_events.1.a

		add_timed_idea = {
			idea = SOV_young_builders_of_communism
			days = SOV.SOV_default_propaganda_campaign_duration
		}
	}
}

# LONG LIVE TO PEACE - event for SOV (peace broken as attacker)
country_event = {
	id = NSB_soviet_propaganda_capmaign_events.2
	title = NSB_soviet_propaganda_capmaign_events.2.t
	desc = NSB_soviet_propaganda_capmaign_events.2.desc
	picture = GFX_report_event_SOV_young_builders_of_communism
	
	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
		hidden_effect = {
			set_country_flag = SOV_punished_for_breaking_flag
			add_timed_idea = {
				idea = SOV_broken_peace_dreams_attacker
				days = 180
			}
			#RESET PROPAGANDA CAMPAIGN
			set_rule = { can_send_volunteers = yes }
			clr_country_flag = SOV_propaganda_peace_active_flag
			set_variable = { SOV_propaganda_campaign_to_remove = 25 }
			SOV_reset_propaganda_campaign_slot_effect = yes
		}
	}

	option = { #OK
		name = NSB_soviet_propaganda_capmaign_events.2.a

		effect_tooltip = {
			add_timed_idea = {
				idea = SOV_broken_peace_dreams_attacker
				days = 180
			}
		}
	}
}

# LONG LIVE TO PEACE - event for SOV (peace broken as defender)
country_event = {
	id = NSB_soviet_propaganda_capmaign_events.3
	title = NSB_soviet_propaganda_capmaign_events.2.t
	desc = NSB_soviet_propaganda_capmaign_events.3.desc
	picture = GFX_report_event_SOV_young_builders_of_communism

	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
		hidden_effect = {
			set_country_flag = SOV_punished_for_breaking_flag
			add_timed_idea = {
				idea = SOV_broken_peace_dreams_defender
				days = 180
			}
			#RESET PROPAGANDA CAMPAIGN
			set_rule = { can_send_volunteers = yes }
			clr_country_flag = SOV_propaganda_peace_active_flag
			set_variable = { SOV_propaganda_campaign_to_remove = 25 }
			SOV_reset_propaganda_campaign_slot_effect = yes
		}
	}

	option = { #OK
		name = NSB_soviet_propaganda_capmaign_events.3.a

		effect_tooltip = {
			add_timed_idea = {
				idea = SOV_broken_peace_dreams_defender
				days = 180
			}
		}
	}
}


########  #######  ########  ######## ####  ######   ##    ##    ########   #######  ##       #### ######## ####  ######   ######  
##       ##     ## ##     ## ##        ##  ##    ##  ###   ##    ##     ## ##     ## ##        ##     ##     ##  ##    ## ##    ## 
##       ##     ## ##     ## ##        ##  ##        ####  ##    ##     ## ##     ## ##        ##     ##     ##  ##       ##       
######   ##     ## ########  ######    ##  ##   #### ## ## ##    ########  ##     ## ##        ##     ##     ##  ##        ######  
##       ##     ## ##   ##   ##        ##  ##    ##  ##  ####    ##        ##     ## ##        ##     ##     ##  ##             ## 
##       ##     ## ##    ##  ##        ##  ##    ##  ##   ###    ##        ##     ## ##        ##     ##     ##  ##    ## ##    ## 
##        #######  ##     ## ######## ####  ######   ##    ##    ##         #######  ######## ####    ##    ####  ######   ######  

# SOV sends military advisors - Event for SPR
country_event = {
	id = NSB_soviet_foreign_politics_events.20
	title = NSB_soviet_foreign_politics_events.20.t
	desc = NSB_soviet_foreign_politics_events.20.desc
	picture = GFX_report_event_spr_spanish_civil_war

	is_triggered_only = yes
			
	option = { #Ok
		name = NSB_soviet_foreign_politics_events.20.a
		
		add_timed_idea = {idea = SOV_soviet_advisors_spr days = 1095 }
		effect_tooltip = {
			FROM = {
				add_timed_idea = {idea = SOV_military_advisors_in_spain days = 1095 }
			}
		}
	}
}
######################
### FIVE YEAR PLAN ###
######################

### THIRD FIVE YEAR PLAN CANCELED ###
country_event = {
	id = NSB_soviet_five_year_plan.01
	title = NSB_soviet_five_year_plan.01.t
	desc = NSB_soviet_five_year_plan.01.desc
	picture = GFX_report_event_stalin_01
	
	is_triggered_only = yes

	fire_only_once = yes

	option = { #VAYA POR DIOS
		name = NSB_soviet_five_year_plan.01.a
		
		custom_effect_tooltip = NSB_soviet_five_year_plan_tt
	}
}



######################
######## MISC ########
######################

### Kuznetsov becomes an Operative -> Fired when SOV loses control over a Ukrainian state 
country_event = {
	id = NSB_soviet_great_patriotic_war.01
	title = NSB_soviet_great_patriotic_war.01.t
	desc = NSB_soviet_great_patriotic_war.01.desc
	picture = GFX_report_event_SOV_tank_column
	
	is_triggered_only = yes

	fire_only_once = yes

	option = { #WELCOME TO THE NKVD
		name = NSB_soviet_great_patriotic_war.01.a
	}
}


#########################
### SPANISH CIVIL WAR ###
#########################

#REPUBLICAN SPAIN / POUM LOSES THE SCW -> LÍSTER / EL CAMPESINO / ROVIRA JOINS SOV -> Event for SOV
unit_leader_event = {
	id = NSB_soviet_spanish_civil_war.1
	title = NSB_soviet_spanish_civil_war.1.t
	desc = NSB_soviet_spanish_civil_war.1.desc
	
	is_triggered_only = yes
	hidden = no

	option = {
		name = NSB_soviet_spanish_civil_war.1.a
		effect_tooltip = {
			var:SOV.SOV_spanish_general = { set_nationality = SOV }
		}
	}
}