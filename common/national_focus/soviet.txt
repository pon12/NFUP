### search_filters = {FOCUS_FILTER_POLITICAL}
### search_filters = {FOCUS_FILTER_RESEARCH}
### search_filters = {FOCUS_FILTER_INDUSTRY}
### search_filters = {FOCUS_FILTER_STABILITY}
### search_filters = {FOCUS_FILTER_WAR_SUPPORT}
### search_filters = {FOCUS_FILTER_MANPOWER}
### search_filters = {FOCUS_FILTER_ANNEXATION}
### search_filters = {FOCUS_FILTER_SOV_POLITICAL_PARANOIA}
### search_filters = {FOCUS_FILTER_PROPAGANDA}
### search_filters = {FOCUS_FILTER_ARMY_XP}
### search_filters = {FOCUS_FILTER_NAVY_XP}
### search_filters = {FOCUS_FILTER_AIR_XP}
# Reminder that focus filters prio has to be handled in the generic focus file :

focus_tree = {
	id = soviet_focus

	country = {
		factor = 0
		
		modifier = {
			add = 10
			tag = SOV
		}
	}
	
	default = no

	continuous_focus_position = { x = 55 y = 1500 }


##    ##  #######      ######  ######## ######## ########     ########     ###     ######  ##    ## 
###   ## ##     ##    ##    ##    ##    ##       ##     ##    ##     ##   ## ##   ##    ## ##   ##  
####  ## ##     ##    ##          ##    ##       ##     ##    ##     ##  ##   ##  ##       ##  ##   
## ## ## ##     ##     ######     ##    ######   ########     ########  ##     ## ##       #####    
##  #### ##     ##          ##    ##    ##       ##           ##     ## ######### ##       ##  ##   
##   ### ##     ##    ##    ##    ##    ##       ##           ##     ## ##     ## ##    ## ##   ##  
##    ##  #######      ######     ##    ######## ##           ########  ##     ##  ######  ##    ## 



 ######  #### ##     ## #### ##       ####    ###    ##    ##    #### ##    ## ########  ##     ##  ######  ######## ########  ##    ## 
##    ##  ##  ##     ##  ##  ##        ##    ## ##   ###   ##     ##  ###   ## ##     ## ##     ## ##    ##    ##    ##     ##  ##  ##  
##        ##  ##     ##  ##  ##        ##   ##   ##  ####  ##     ##  ####  ## ##     ## ##     ## ##          ##    ##     ##   ####   
##        ##  ##     ##  ##  ##        ##  ##     ## ## ## ##     ##  ## ## ## ##     ## ##     ##  ######     ##    ########     ##    
##        ##   ##   ##   ##  ##        ##  ######### ##  ####     ##  ##  #### ##     ## ##     ##       ##    ##    ##   ##      ##    
##    ##  ##    ## ##    ##  ##        ##  ##     ## ##   ###     ##  ##   ### ##     ## ##     ## ##    ##    ##    ##    ##     ##    
 ######  ####    ###    #### ######## #### ##     ## ##    ##    #### ##    ## ########   #######   ######     ##    ##     ##    ##    


	focus = {
		id = SOV_infrastructure_effort_nsb

		icon = GFX_goal_generic_construction
		x = 1
		y = 0
		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			651 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
			653 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
			652 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
			255 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}
	}
	focus = {
		id = Mongolia_labor
		icon = GFX_goal_generic_production2
		prerequisite = { focus = SOV_heavy_industry }
		x = 1
		y = 1
	    relative_position_id = SOV_heavy_industry
		cost = 5
		
				completion_reward = {
		
		      255 = {
 add_extra_state_shared_building_slots = 5
add_building_construction = {
                                type = industrial_complex
                                level = 5
                                instant_build = yes
                            }
} 
			   }
			}
	focus = {
		id = SOV_heavy_industry

		icon = GFX_goal_construction_of_communism_boris
		x = 2
		y = 0
		relative_position_id = SOV_infrastructure_effort_nsb
		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		complete_tooltip = {
			every_state = {
				limit = { 
					has_state_flag = SOV_finish_five_year_plan_2IC 
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}

		completion_reward = { #TODO_Manu: This is just copy-pasted from the old focus -> Is this what we want?
			IF = {
				limit = {
					any_owned_state = {
						is_controlled_by = ROOT 
						industrial_complex > 0
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
						NOT = { has_state_flag = SOV_finish_five_year_plan_2IC }
					}
				}
				random_owned_controlled_state = {
					limit = {
						industrial_complex > 0
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 5
					add_building_construction = {
						type = industrial_complex
						level = 5
						instant_build = yes
					}
					set_state_flag = SOV_finish_five_year_plan_2IC
				}
			}
			ELSE = {
				random_owned_controlled_state = {
					limit = {
						# industrial_complex > 0
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					set_state_flag = SOV_finish_five_year_plan_2IC
				}
			}
			IF = {
				limit = {
					check_variable = { num_owned_states > 1}
					any_owned_state = {
						is_controlled_by = ROOT 
						industrial_complex > 0
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
						NOT = { has_state_flag = SOV_finish_five_year_plan_2IC }
					}
				}
				random_owned_controlled_state = {
					limit = {
						industrial_complex > 0
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
						NOT = { has_state_flag = SOV_finish_five_year_plan_2IC }
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					set_state_flag = SOV_finish_five_year_plan_2IC
				}
			}
			ELSE_IF = {
				limit = {
					check_variable = { num_owned_states > 1 }
				}
				random_owned_controlled_state = {
					limit = {
						# industrial_complex > 0
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
						NOT = { has_state_flag = SOV_finish_five_year_plan_2IC }
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					set_state_flag = SOV_finish_five_year_plan_2IC
				}
			}
		}
	}

	focus = {
		id = SOV_finish_the_five_year_plan

		icon = GFX_FOCUS_SOV_FIVEYEARPLAN
		prerequisite = { focus = SOV_infrastructure_effort_nsb }
		prerequisite = { focus = SOV_heavy_industry }
		x = 1
		y = 1
		relative_position_id = SOV_infrastructure_effort_nsb
		cost = 10

		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_fyp_controlled_factories_tier_1_tt
				NOT = { num_of_controlled_factories < SOV_fyp_factory_requirement_tier_1 }
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SOV_finish_five_year_plan_2IC }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}

		completion_reward = { #TODO_Manu: This is just copy-pasted from the old focus -> Is this what we want?
			random_owned_controlled_state = {
				limit = {
					industrial_complex > 0
					free_building_slots = {
						building = industrial_complex
						size > 2
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = industrial_complex
					level = 4
					instant_build = yes
				}
				set_state_flag = SOV_finish_five_year_plan_2IC
			}
			random_owned_controlled_state = {
				limit = {
					industrial_complex > 0
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
				set_state_flag = SOV_finish_five_year_plan_2IC
			}

			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = SOV_lazar_kaganovich
		}
	}

	focus = {
		id = SOV_improve_railway_network

		icon = GFX_goal_train2_captainluck
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		x = -2
		y = 1
		relative_position_id = SOV_finish_the_five_year_plan
		cost = 3

		ai_will_do = {
			factor = 1
		}

		available = {

		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			# Moscow - Rostov on Don
			build_railway = {
				path = { 9330 3356 6279 6230 6398 6341 413 3527 11475 11412 6591 3540 3519 11459 11450 11434 9417 }
			}
			# Stalingrad-Rostov on Don
			build_railway = {
				path = { 3529 9504 533 9516 509 500 11459 } #(Stalingrad - Conjunction near Millerovo)
			}
			# Stalingrad-Mikhaylovka 
			build_railway = {
				path = { 9504 3582 9436 11485 3539 9564 11408 } #(Conjunction right next to Stalingrad - Conjunction in West Saratov)
			}
			# Stalingrad - Astrakhan
			build_railway = {
				path = { 3529 11474 520 6516 6486 9455 11429 6620 9753 }
			}
			# Tbilisi - Yerevan
			build_railway = {
				path = { 1599 9702 12441 3564 12320 }
			}

			#Supply Hub in Yerevan
			230 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 12320
					instant_build = yes
				}
			}
			#Supply Hub in Kandalaksha
			213 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 6181
					instant_build = yes
				}
			}

			custom_effect_tooltip = available_designer
			show_ideas_tooltip = SOV_soviet_railways
		}
	}

	focus = {
		id = SOV_third_five_year_plan

		icon = GFX_goal_five_year_plan_captainluck
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		x = 0
		y = 1
		relative_position_id = SOV_finish_the_five_year_plan
		cost = 6

		available = {
			SOV_third_five_year_plan_available = yes
			custom_trigger_tooltip = {
				tooltip = SOV_fyp_controlled_factories_tier_2_tt
				NOT = { num_of_controlled_factories < SOV_fyp_factory_requirement_tier_2 }
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			hidden_effect = {
				add_to_variable = { SOV_fyp_production_factory_efficiency_gain_factor = 0.5 }
				add_to_variable = { SOV_fyp_consumer_goods_factor = 0.10 }
			}
			if = {
				limit = {
					has_government = communism
				}
				hidden_effect = {
					#Swap dynamic modifier to change icon
					remove_dynamic_modifier = { modifier = SOV_second_five_year_plan_dynamic_modifier }
					add_dynamic_modifier = { modifier = SOV_third_five_year_plan_dynamic_modifier }
				}
				custom_effect_tooltip = SOV_third_five_year_plan_ns_tt

				add_tech_bonus = {
					name = SOV_third_five_year_plan_default
					bonus = 0.75
					uses = 2
					category = construction_tech
				}
			}
			else = {
				custom_effect_tooltip = SOV_third_five_year_plan_ns_alt_tt
				hidden_effect = {
					#Swap dynamic modifier to change icon
					remove_dynamic_modifier = { modifier = SOV_second_five_year_plan_dynamic_modifier }
					add_dynamic_modifier = { modifier = SOV_third_five_year_plan_dynamic_modifier_alt }
				}

				add_tech_bonus = {
					name = SOV_third_five_year_plan_alt
					bonus = 0.75
					uses = 2
					category = construction_tech
				}
			}
		}
	}

	focus = {
		id = SOV_reorganize_the_pc_of_heavy_industry

		icon = GFX_goal_generic_production2
		prerequisite = { focus = SOV_third_five_year_plan }
		x = -2
		y = 2
		relative_position_id = SOV_third_five_year_plan
		cost = 10

		mutually_exclusive = { focus = SOV_shift_to_armaments_production }

		available = {
			SOV_third_five_year_plan_available = yes
			custom_trigger_tooltip = {
				tooltip = SOV_fyp_controlled_factories_tier_3_tt
				NOT = { num_of_controlled_factories < SOV_fyp_factory_requirement_tier_3 }
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			hidden_effect = {
				add_to_variable = { SOV_fyp_consumer_goods_factor = -0.02 }
			}
			custom_effect_tooltip = SOV_reorganize_the_pc_of_heavy_industry_ns_tt
			if = {
				limit = {
					has_government = communism
				}
				hidden_effect = {
					#Swap dynamic modifier to change icon
					remove_dynamic_modifier = { modifier = SOV_third_five_year_plan_dynamic_modifier }
					add_dynamic_modifier = { modifier = SOV_third_five_year_plan_civilian_dynamic_modifier }
				}

				add_tech_bonus = {
					name = SOV_reorganize_the_pc_of_heavy_industry_name_default
					bonus = 1.0
					uses = 2
					category = industry
				}
			}
			else = {
				hidden_effect = {
					#Swap dynamic modifier to change icon
					remove_dynamic_modifier = { modifier = SOV_third_five_year_plan_dynamic_modifier_alt}
					add_dynamic_modifier = { modifier = SOV_third_five_year_plan_civilian_dynamic_modifier_alt }
				}

				add_tech_bonus = {
					name = SOV_reorganize_the_pc_of_heavy_industry_name_alt
					bonus = 1.0
					uses = 2
					category = industry
					category = electronics
				}
			}
		}
	}

	focus = {
		id = SOV_industrial_modernization

		icon = GFX_goal_reichsautobahn
		prerequisite = { focus = SOV_reorganize_the_pc_of_heavy_industry }
		x = 0
		y = 3
		relative_position_id = SOV_reorganize_the_pc_of_heavy_industry
		cost = 10

		available = {
			SOV_third_five_year_plan_available = yes
			custom_trigger_tooltip = {
				tooltip = SOV_fyp_controlled_factories_tier_4_tt
				NOT = { num_of_controlled_factories < SOV_fyp_factory_requirement_tier_4 }
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_to_variable = { SOV_fyp_production_factory_max_efficiency_factor = 0.02 }
			add_to_variable = { SOV_fyp_line_change_production_efficiency_factor = 0.1 }
			custom_effect_tooltip = SOV_industrial_modernization_ns_tt

			add_tech_bonus = {
				name = SOV_industrial_modernization
				ahead_reduction = 2
				bonus = 1.0
				uses = 1
				category = industry
			}
		}
	}

	focus = {
		id = SOV_increase_state_reserves

		icon = GFX_goal_generic_construction2
		prerequisite = { focus = SOV_third_five_year_plan }
		x = 0
		y = 1
		relative_position_id = SOV_third_five_year_plan
		cost = 5

		available = {
			SOV_third_five_year_plan_available = yes
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			#Modify Third Year Plan NS
			set_variable = { SOV_fyp_local_resources_factor = 0.1 }
			custom_effect_tooltip = SOV_increase_state_reserves_ns_tt

			custom_effect_tooltip = SOV_increase_state_reserves_silo_tt
			set_temp_variable = { temp_targets_index = 0 }
			
			while_loop_effect = {
				limit = {
					check_variable = { temp_targets_index = 3 compare = less_than }
					any_owned_state = {
						infrastructure < 3
						free_building_slots = {
							building = fuel_silo
							size > 0
							include_locked = yes
						}
						NOT = { has_state_flag = SOV_increase_state_reserves_flag }
					}
				}
				if = { #If possible, prio low-infrastructure states for silos
					limit = {
						any_owned_state = {
							infrastructure < 3
							free_building_slots = {
								building = fuel_silo
								size > 0
								include_locked = yes
							}
							NOT = { has_state_flag = SOV_increase_state_reserves_flag }
						}
					}
					random_owned_controlled_state = {
						limit = {
							infrastructure < 3
							free_building_slots = {
								building = fuel_silo
								size > 0
								include_locked = yes
							}
							NOT = { has_state_flag = SOV_increase_state_reserves_flag }
						}
						set_state_flag = SOV_increase_state_reserves_flag
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = fuel_silo
							level = 1
							instant_build = yes
						}
					}
				}
				else = {
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = fuel_silo
								size > 0
								include_locked = yes
							}
							NOT = { has_state_flag = SOV_increase_state_reserves_flag }
						}
						set_state_flag = SOV_increase_state_reserves_flag
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = fuel_silo
							level = 1
							instant_build = yes
						}
					}
				}
				add_to_temp_variable = { temp_targets_index = 1 }
			}
			every_owned_state = { #Tooltip purposes (lets you know which states have been selected once the focus is completed)
				limit = {
					has_state_flag = SOV_increase_state_reserves_flag
				}
			}
		}
	}

	focus = {
		id = SOV_shift_to_armaments_production

		icon = GFX_focus_generic_combined_arms
		prerequisite = { focus = SOV_third_five_year_plan }
		x = 2
		y = 2
		relative_position_id = SOV_third_five_year_plan
		cost = 10

		mutually_exclusive = { focus = SOV_reorganize_the_pc_of_heavy_industry}

		available = {
			SOV_third_five_year_plan_available = yes
			custom_trigger_tooltip = {
				tooltip = SOV_fyp_controlled_factories_tier_3_tt
				NOT = { num_of_controlled_factories < SOV_fyp_factory_requirement_tier_3 }
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			hidden_effect = {
				set_variable = { SOV_fyp_production_speed_industrial_complex_factor = 0 } #Remove Civ constr speed
			}
			hidden_effect = {
				#Swap dynamic modifier to change icon
				remove_dynamic_modifier = { modifier = SOV_third_five_year_plan_dynamic_modifier }
				add_dynamic_modifier = { modifier = SOV_third_five_year_plan_military_dynamic_modifier }
			}
			custom_effect_tooltip = SOV_shift_to_armaments_production_ns_tt

			add_tech_bonus = {
				name = SOV_shift_to_armaments_production
				bonus = 1.0
				uses = 2
				category = cat_production
			}
		}
	}

	focus = {
		id = SOV_optimize_production_lines

		icon = GFX_focus_generic_tank_production
		prerequisite = { focus = SOV_shift_to_armaments_production }
		x = 0
		y = 3
		relative_position_id = SOV_shift_to_armaments_production
		cost = 10

		available = {
			SOV_third_five_year_plan_available = yes
			custom_trigger_tooltip = {
				tooltip = SOV_fyp_controlled_factories_tier_4_tt
				NOT = { num_of_controlled_factories < SOV_fyp_factory_requirement_tier_4 }
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_to_variable = { SOV_fyp_production_factory_efficiency_gain_factor = 0.1 } #Add efficiency gain
			add_to_variable = { SOV_fyp_production_factory_start_efficiency_factor = 0.1 } #Add efficiency start
			add_to_variable = { SOV_fyp_industrial_capacity_factory = 0.05 } #Add small output bonus
			custom_effect_tooltip = SOV_optimize_production_lines_ns_tt

			add_tech_bonus = {
				name = SOV_optimize_production_lines
				bonus = 1
				uses = 2
				category = industry
			}
		}
	}

	focus = {
		id = SOV_steel_casting_industry

		icon = GFX_focus_generic_steel
		prerequisite = { focus = SOV_reorganize_the_pc_of_heavy_industry focus = SOV_shift_to_armaments_production }
		x = 2
		y = 1
		relative_position_id = SOV_reorganize_the_pc_of_heavy_industry
		cost = 10

		available = {
			any_owned_state = {
				has_resources_amount = {
					resource = steel
					amount > 0
				}
				free_building_slots = {
					building = industrial_complex
					size > 1
					include_locked = yes
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			set_variable = { SOV_fyp_industrial_capacity_factory = 0.05 }
			set_variable = { SOV_fyp_industrial_capacity_dockyard = 0.05 }

			custom_effect_tooltip = SOV_steel_casting_industry_ns_tt

			random_owned_controlled_state = {
				limit = {
					has_resources_amount = {
						resource = steel
						amount > 0
					}
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_resource = {
					type = steel
					amount = 5
				}
				set_state_flag = SOV_steel_casting_industry_flag
			}
			if = {
				limit = {
					any_owned_state = {
						has_resources_amount = {
							resource = steel
							amount > 0
						}
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
						NOT = {	has_state_flag = SOV_steel_casting_industry_flag }
					}
				}
				random_owned_controlled_state = {
					limit = {
						has_resources_amount = {
							resource = steel
							amount > 0
						}
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
						NOT = {	has_state_flag = SOV_steel_casting_industry_flag }
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					add_resource = {
						type = steel
						amount = 5
					}
					set_state_flag = SOV_steel_casting_industry_flag
				}
			}
		}
	}

	focus = {
		id = SOV_synthetic_rubber

		icon = GFX_focus_generic_rubber
		prerequisite = { focus = SOV_steel_casting_industry }
		x = -1
		y = 1
		relative_position_id = SOV_steel_casting_industry
		cost = 5

		available = {
			NOT = {
				AND = {
					672 = { is_controlled_by = ENG }
					334 = { is_controlled_by = ENG }
					336 = { is_controlled_by = ENG }
				}
				OR = {
					335 = { is_controlled_by = ENG }
					422 = { is_controlled_by = ENG }
				}
			}
			has_full_control_of_state = 651 
			has_full_control_of_state = 582
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_tech_bonus = {
				name = "Soviet Emergency Rubber"
				bonus = 3.0
				uses = 2
				category = synth_resources
			}
			651 = {
				add_resource = {
					type = rubber
					amount = 40
				}
			}
			add_timed_idea = { idea = JFU_soviet_synthetics days = 100}
		}
	}

	focus = {
		id = SOV_oil_production

		icon = GFX_goal_generic_oil_refinery
		prerequisite = { focus = SOV_steel_casting_industry }
		x = 1
		y = 1
		relative_position_id = SOV_steel_casting_industry
		cost = 5

		available = {
			SOV_third_five_year_plan_available = yes
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			set_variable = { SOV_fyp_fuel_gain_factor_from_states = 0.05 }
			set_variable = { SOV_fyp_production_oil_factor = 0.05 }
			custom_effect_tooltip = SOV_oil_production_ns_tt
			
			set_temp_variable = { SOV_silos_from_focus = 0 }
			every_owned_state = {
				limit ={
					is_fully_controlled_by = ROOT
					has_resources_amount = {
						resource = oil
						amount > 0
					}
					infrastructure < 3
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes						
				}
				hidden_effect = {
					if = {
						limit = {
							check_variable = { SOV_silos_from_focus = 2 compare = less_than_or_equals }
						}				
						add_building_construction = {
							type = fuel_silo
							level = 1
							instant_build = yes						
						}
						add_to_temp_variable = { SOV_silos_from_focus = 1 }
					}
				}
				custom_effect_tooltip = SOV_oil_production_silo_tt
			}
			#Build Railways in Caucasus
			if = {
				limit = {
					has_full_control_of_state = 229 #BAKU
					has_full_control_of_state = 230 #ARMENIA
					has_full_control_of_state = 231 #GEORGIA
				}
				# Baku - Tbilisi
				build_railway = {
					path = { 7661 1536 4614 4477 11645 11674 1539 11708 1599 }
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 232 #DAGESTAN
					has_full_control_of_state = 821 #CHECHNYA-INGUSHETIA
				}
				# Makhachkala (Hub province) - Grozny
				build_railway = {
					path = { 3668 3682 3672 }
				}
			}
		}
	}

	focus = {
		id = SOV_national_specialists

		icon = GFX_goal_generic_consumer_goods
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		x = 3
		y = 1
		relative_position_id = SOV_finish_the_five_year_plan
		cost = 5

		mutually_exclusive = { focus = SOV_foreign_experts }

		available = {

		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			custom_effect_tooltip = SOV_national_specialists_tt

			SOV_replace_industrial_designer = yes #"National" Industrial Designers get +5% research bonus
			hidden_effect = {
				add_ideas = SOV_national_specialists_ns
			}
		}
	}

	focus = {
		id = SOV_foreign_experts

		icon = GFX_focus_spa_the_spanish_miracle
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		x = 2
		y = 0
		relative_position_id = SOV_national_specialists
		cost = 5

		mutually_exclusive = { focus = SOV_national_specialists }

		available = {

		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = SOV_gosproyektstroy_1
		}
	}

	focus = {
		id = SOV_eastern_development

		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = SOV_national_specialists focus = SOV_foreign_experts }
		x = 0
		y = 1
		relative_position_id = SOV_national_specialists
		cost = 5

		bypass = {
			408 = { #VLADIVOSTOK
				is_fully_controlled_by = ROOT
				NOT = {
					infrastructure < 5
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
			}
			409 = { #KHABAROVSK
				is_fully_controlled_by = ROOT
				is_fully_controlled_by = ROOT
				NOT = {
					infrastructure < 5
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
			}
			566 = { #IRKUTSK
				is_fully_controlled_by = ROOT
				is_fully_controlled_by = ROOT
				NOT = {
					infrastructure < 5
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
			}
			564 = { #ULAN UDE
				is_fully_controlled_by = ROOT
				is_fully_controlled_by = ROOT
				NOT = {
					infrastructure < 5
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
			}
		}

		available = {
			OR = {
				408 = { #VLADIVOSTOK
					is_fully_controlled_by = ROOT
				}
				409 = { #KHABAROVSK
					is_fully_controlled_by = ROOT
				}
				566 = { #IRKUTSK
					is_fully_controlled_by = ROOT
				}
				564 = { #ULAN UDE
					is_fully_controlled_by = ROOT
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			set_temp_variable = { SOV_states_targeted_eastern_development = 0 } #Used this way to prioritize between desirable states
			if = {
				limit = {
					408 = { #VLADIVOSTOK
						is_fully_controlled_by = ROOT
						infrastructure < 5
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
				}
				408 = { #VLADIVOSTOK
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 6
					add_building_construction = {
						type = industrial_complex
						level = 6
						instant_build = yes
					}
				}
				add_to_temp_variable = { SOV_states_targeted_eastern_development = 1 }
			}
			else_if = { #Irkutsk replaces Vladivostok if necessary
				limit = {
					check_variable = { SOV_states_targeted_eastern_development = 2 compare = less_than_or_equals }
					566 = { #IRKUTSK
						is_fully_controlled_by = ROOT
						infrastructure < 5
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
				}
				566 = { #IRKUTSK
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}

			if = {
				limit = {
					409 = { #KHABAROVSK
						is_fully_controlled_by = ROOT
						infrastructure < 5
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
				}
				409 = { #KHABAROVSK
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				add_to_temp_variable = { SOV_states_targeted_eastern_development = 1 }
			}
			else_if = { #Ulan Ude replaces Khabarovsk if necessary
				limit = {
					check_variable = { SOV_states_targeted_eastern_development = 2 compare = less_than_or_equals }
					564 = { #ULAN UDE
						is_fully_controlled_by = ROOT
						infrastructure < 5
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
				}
				564 = { #ULAN UDE
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_develop_the_urals

		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = SOV_national_specialists focus = SOV_foreign_experts }
		x = 2
		y = 0
		relative_position_id = SOV_eastern_development
		cost = 5

		bypass = {
			572 = { #CHELYABISNK
				is_fully_controlled_by = ROOT
				NOT = {
					infrastructure < 5
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
			}
			573 = { #ZLATOUST
				is_fully_controlled_by = ROOT
				is_fully_controlled_by = ROOT
				NOT = {
					infrastructure < 5
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
			}
			582 = { #MAGNITOGORSK
				is_fully_controlled_by = ROOT
				is_fully_controlled_by = ROOT
				NOT = {
					infrastructure < 5
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
			}
			653 = { #SVERDLOVSK
				is_fully_controlled_by = ROOT
				is_fully_controlled_by = ROOT
				NOT = {
					infrastructure < 5
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
			}
		}

		available = {
			OR = {
				572 = { #CHELYABISNK
					is_fully_controlled_by = ROOT
				}
				573 = { #ZLATOUST
					is_fully_controlled_by = ROOT
				}
				582 = { #MAGNITOGORSK
					is_fully_controlled_by = ROOT
				}
				653 = { #SVERDLOVSK
					is_fully_controlled_by = ROOT
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			set_temp_variable = { SOV_states_targeted_eastern_development = 0 } #Used this way to prioritize between desirable states
			if = {
				limit = {
					572 = { #CHELYABISNK
						is_fully_controlled_by = ROOT
						infrastructure < 5
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
				}
				572 = { #CHELYABISNK
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = industrial_complex
						level = 3
						instant_build = yes
					}
				}
				add_to_temp_variable = { SOV_states_targeted_eastern_development = 1 }
			}
			else_if = { #Magnitogorsk replaces Chelyabinsk if necessary
				limit = {
					check_variable = { SOV_states_targeted_eastern_development = 2 compare = less_than_or_equals }
					582 = { #MAGNITOGORSK
						is_fully_controlled_by = ROOT
						infrastructure < 5
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
				}
				582 = { #MAGNITOGORSK
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}

			if = {
				limit = {
					573 = { #ZLATOUST
						is_fully_controlled_by = ROOT
						infrastructure < 5
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
				}
				573 = { #ZLATOUST
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 5
					add_building_construction = {
						type = industrial_complex
						level = 5
						instant_build = yes
					}
				}
				add_to_temp_variable = { SOV_states_targeted_eastern_development = 1 }
			}
			else_if = { #Sverdlovsk replaces Zlatoust if necessary
				limit = {
					check_variable = { SOV_states_targeted_eastern_development = 2 compare = less_than_or_equals }
					653 = { #SVERDLOVSK
						is_fully_controlled_by = ROOT
						infrastructure < 5
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
				}
				653 = { #SVERDLOVSK
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_the_ussr_academy_of_sciences

		icon = GFX_FOCUS_SOV_SOCIALIST_SCIENCE
		prerequisite = { focus = SOV_eastern_development }
		prerequisite = { focus = SOV_develop_the_urals }
		x = 1
		y = 1
		relative_position_id = SOV_eastern_development
		cost = 10

		available = {
		}
	
		completion_reward = {
		search_filters = {FOCUS_FILTER_RESEARCH}
		add_research_slot = 1
		
		255 = {
		add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = arms_factory
					level = 5
					instant_build = yes
				}
	}
	}
	}

   ###    #### ########   ######  ########     ###    ######## ######## 
  ## ##    ##  ##     ## ##    ## ##     ##   ## ##   ##          ##    
 ##   ##   ##  ##     ## ##       ##     ##  ##   ##  ##          ##    
##     ##  ##  ########  ##       ########  ##     ## ######      ##    
#########  ##  ##   ##   ##       ##   ##   ######### ##          ##    
##     ##  ##  ##    ##  ##    ## ##    ##  ##     ## ##          ##    
##     ## #### ##     ##  ######  ##     ## ##     ## ##          ##    



	focus = {
		id = SOV_transpolar_flights

		icon = GFX_goal_generic_air_fighter2
		x = 10
		y = 0
		relative_position_id = SOV_infrastructure_effort_nsb
		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			date > 1937.01.01
		}
		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
			air_experience = 50
			add_tech_bonus = {
				name = SOV_increase_aircraft_production
				bonus = 1.0
				uses = 1
				category = light_air
			}
		}
	}

	focus = {
		id = SOV_expand_the_aircraft_industry

		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = SOV_transpolar_flights }
		x = -1
		y = 1
		relative_position_id = SOV_transpolar_flights
		cost = 5

		available = {
			any_owned_state = {
				is_fully_controlled_by = ROOT
				free_building_slots = {
					building = arms_factory
					size > 1
					include_locked = yes
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			set_variable = { SOV_soviet_airforce_aircraft_manufacturer_cost_factor = -0.25 }
			custom_effect_tooltip = SOV_expand_the_aircraft_industry_ns_tt

			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = arms_factory
					level = 5
					instant_build = yes
				}
				if = {
					limit = {
						air_base < 9
					}
					add_building_construction = {
						type = air_base
						level = 2
						instant_build = yes
					}
				}
				else = {
					ROOT = {
						random_owned_controlled_state = {
							limit = {
								air_base < 9
							}
							add_building_construction = {
								type = air_base
								level = 2
								instant_build = yes
							}
						}
					}
				}
			}
		}
	}

	focus = {
		id = SOV_modernize_aircraft_facilities

		icon = GFX_goal_generic_air_production
		prerequisite = { focus = SOV_expand_the_aircraft_industry }
		x = -1
		y = 1
		relative_position_id = SOV_expand_the_aircraft_industry
		cost = 5

		available = {

		}
		
		search_filters = {}

		completion_reward = {
			add_to_variable = { SOV_soviet_airforce_air_fuel_consumption_factor = -0.05 }
			add_to_variable = { SOV_soviet_airforce_air_range_factor = 0.05 }
			add_to_variable = { SOV_soviet_airforce_air_agility_factor = 0.05 }
			custom_effect_tooltip = SOV_modernize_aircraft_facilities_ns_tt
		}
	}

	focus = {
		id = SOV_merge_aircraft_plants

		icon = GFX_focus_SOV_merge_plants
		prerequisite = { focus = SOV_modernize_aircraft_facilities }
		x = -1
		y = 2
		relative_position_id = SOV_modernize_aircraft_facilities
		cost = 5

		available = {
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			custom_effect_tooltip = SOV_merge_aircraft_plants_tt
		}
	}

	focus = {
		id = SOV_found_the_jet_institute

		icon = GFX_goal_generic_build_airforce
		prerequisite = { focus = SOV_the_ussr_academy_of_sciences }
		prerequisite = { focus = SOV_merge_aircraft_plants }
		x = -1
		y = 1
		relative_position_id = SOV_merge_aircraft_plants
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_found_the_jet_institute
				bonus = 1.0
				uses = 2
				category = jet_technology
				category = rocketry
			}
		}
	}

	focus = {
		id = SOV_increase_aircraft_production

		icon = GFX_focus_generic_aircraft_production
		prerequisite = { focus = SOV_expand_the_aircraft_industry }
		x = 0
		y = 2
		relative_position_id = SOV_expand_the_aircraft_industry
		cost = 5

		mutually_exclusive = { focus = SOV_intensify_pilot_training_program }


		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
	add_ideas = Sov_Fighter_Group

			add_tech_bonus = {
				name = SOV_increase_aircraft_production
				bonus = 1.0
				uses = 2
				category = light_air
			}
		}
	}

	focus = {
		id = SOV_foster_flying_clubs

		icon = GFX_focus_SOV_flying_clubs
		prerequisite = { focus = SOV_transpolar_flights }
		x = 1
		y = 1
		relative_position_id = SOV_transpolar_flights
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
			add_to_variable = { SOV_soviet_airforce_air_accidents_factor = -0.25 }
			add_to_variable = { SOV_soviet_airforce_air_ace_generation_chance_factor = 0.25 }
			add_to_variable = { SOV_soviet_airforce_air_weather_penalty = -0.1 }
			add_to_variable = { SOV_soviet_airforce_air_training_xp_gain_factor = 0.1 }
			custom_effect_tooltip = SOV_foster_flying_clubs_ns_tt

			air_experience = 25
		}
	}

	focus = {
		id = SOV_women_in_aviation

		icon = GFX_focus_SOV_women_in_aviation
		prerequisite = { focus = SOV_foster_flying_clubs }
		x = 1
		y = 1
		relative_position_id = SOV_foster_flying_clubs
		cost = 5

		available = {
		}
		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
			add_to_variable = { SOV_soviet_airforce_air_ace_generation_chance_factor = 0.25 }
			add_to_variable = { SOV_soviet_airforce_air_weather_penalty = -0.05 }
			add_to_variable = { SOV_soviet_airforce_air_mission_xp_gain_factor = 0.05 }
			add_to_variable = { SOV_soviet_airforce_air_training_xp_gain_factor = 0.05 }
			custom_effect_tooltip = SOV_women_in_aviation_ns_tt

			air_experience = 25
			set_rule = {
				can_generate_female_aces = yes
			}
		}
	}

	focus = {
		id = SOV_raskovas_aviation_group

		icon = GFX_FOCUS_SOV_WOMEN_IN_AVIATION2
		prerequisite = { focus = SOV_women_in_aviation }
		x = 1
		y = 1
		relative_position_id = SOV_women_in_aviation
		cost = 5

		available = {
			any_enemy_country = {
				SOV_is_major_not_original_sov = yes
			}
			has_full_control_of_state = 219 #MOSCOW
		}
		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
			add_to_variable = { SOV_soviet_airforce_air_night_penalty = -0.2 }
			add_to_variable = { SOV_soviet_airforce_air_wing_xp_loss_when_killed_factor = -0.1 }
			set_variable = { SOV_soviet_airforce_air_strategic_bomber_night_penalty = -0.1 }
			custom_effect_tooltip = SOV_raskovas_aviation_group_ns_tt

			custom_effect_tooltip = SOV_night_witches_nsb_tt
			hidden_effect = {
				if = { #ALT IDEOLOGY
					limit = {
						NOT = { has_government = communism }
					}
					load_oob = "SOV_night_witches_nsb_alt"
				}
				else = { #DEFAULT COMMUNISM
					load_oob = "SOV_night_witches_nsb"
				}
			}
		}
	}

	focus = {
		id = SOV_intensify_pilot_training_program

		icon = GFX_goal_generic_air_doctrine
		prerequisite = { focus = SOV_foster_flying_clubs }
		x = 0
		y = 2
		relative_position_id = SOV_foster_flying_clubs
		cost = 5

		mutually_exclusive = { focus = SOV_increase_aircraft_production }


		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
			add_to_variable = { SOV_soviet_airforce_air_accidents_factor = -0.25 }
			add_to_variable = { SOV_soviet_airforce_air_ace_generation_chance_factor = 0.15 }
			add_to_variable = { SOV_soviet_airforce_air_night_penalty = -0.1 }
			add_to_variable = { SOV_soviet_airforce_air_weather_penalty = -0.15 }
			add_to_variable = { SOV_soviet_airforce_air_wing_xp_loss_when_killed_factor = -0.15 }
			custom_effect_tooltip = SOV_intensify_pilot_training_program_ns_tt

			air_experience = 50
		}
	}

	focus = {
		id = SOV_expand_aviation_institutes

		icon = GFX_focus_generic_military_academy
		prerequisite = { focus = SOV_expand_the_aircraft_industry focus = SOV_foster_flying_clubs }
		x = 1
		y = 1
		relative_position_id = SOV_expand_the_aircraft_industry
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
			add_to_variable = { SOV_soviet_airforce_air_accidents_factor = -0.25 }
			add_to_variable = { SOV_soviet_airforce_air_weather_penalty = -0.1 }
			add_to_variable = { SOV_soviet_airforce_air_training_xp_gain_factor = 0.05 }
			add_to_variable = { SOV_soviet_airforce_air_wing_xp_loss_when_killed_factor = -0.15 }
			custom_effect_tooltip = SOV_expand_aviation_institutes_ns_tt
		}
	}

	focus = {
		id = SOV_ground_support

		icon = GFX_goal_generic_air_fighter
		prerequisite = { focus = SOV_increase_aircraft_production focus = SOV_intensify_pilot_training_program }
		x = 0
		y = 1
		relative_position_id = SOV_increase_aircraft_production
		cost = 5

		mutually_exclusive = { focus = SOV_long_range_aircraft }

		available = {

		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_to_variable = { SOV_soviet_airforce_air_cas_present_factor = 0.1 }
			custom_effect_tooltip = SOV_ground_support_ns_tt

			add_tech_bonus = {
				name = SOV_ground_support
				bonus = 0.75
				uses = 2
				category = light_fighter
				category = cas_bomber
			}
		}
	}

	focus = {
		id = SOV_long_range_aircraft

		icon = GFX_goal_generic_air_bomber
		prerequisite = { focus = SOV_increase_aircraft_production focus = SOV_intensify_pilot_training_program }
		x = 0
		y = 1
		relative_position_id = SOV_intensify_pilot_training_program
		cost = 5

		mutually_exclusive = { focus = SOV_ground_support }

		available = {

		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_to_variable = { SOV_soviet_airforce_strategic_bomb_visibility = -0.1 }
			custom_effect_tooltip = SOV_long_range_aircraft_ns_tt

			add_tech_bonus = {
				name = SOV_long_range_aircraft
				bonus = 0.75
				uses = 2
				category = cat_heavy_fighter
				category = tactical_bomber
				category = cat_strategic_bomber
			}
		}
	}

	focus = {
		id = SOV_the_modern_war_in_the_skies

		icon = GFX_goal_generic_CAS
		prerequisite = { focus = SOV_ground_support focus = SOV_long_range_aircraft }
		x = 1
		y = 1
		relative_position_id = SOV_ground_support
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
			add_to_variable = { SOV_soviet_airforce_air_night_penalty = -0.1 }
			add_to_variable = { SOV_soviet_airforce_air_mission_efficiency = 0.1 } 
			custom_effect_tooltip = SOV_the_modern_war_in_the_skies_ns_tt

			air_experience = 50
		}
	}
##     ## #### ##       #### ########    ###    ########  ##    ## 
###   ###  ##  ##        ##     ##      ## ##   ##     ##  ##  ##  
#### ####  ##  ##        ##     ##     ##   ##  ##     ##   ####   
## ### ##  ##  ##        ##     ##    ##     ## ########     ##    
##     ##  ##  ##        ##     ##    ######### ##   ##      ##    
##     ##  ##  ##        ##     ##    ##     ## ##    ##     ##    
##     ## #### ######## ####    ##    ##     ## ##     ##    ##    



	focus = {
		id = SOV_found_the_pcdi

		icon = GFX_goal_generic_defence
		x = 13
		y = 0
		relative_position_id = SOV_transpolar_flights
		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {

		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			hidden_effect = {
				add_dynamic_modifier = { modifier = SOV_defense_industry_dynamic_modifier }
			}
			custom_effect_tooltip = SOV_found_the_pcdi_ns_tt
		}
	}

	focus = {
		id = SOV_pc_of_mechanical_engineering

		icon = GFX_goal_generic_production2
		prerequisite = { focus = SOV_found_the_pcdi }
		x = -5
		y = 1
		relative_position_id = SOV_found_the_pcdi
		cost = 5

		available = {
			has_full_control_of_state = 219 #MOSCOW
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_to_variable = { SOV_defense_industry_production_factory_max_efficiency_factor = 0.02 }
			add_to_variable = { SOV_defense_industry_production_factory_efficiency_gain_factor = -0.05 }
			custom_effect_tooltip = SOV_pc_of_mechanical_engineering_ns_tt

			if = { #DEFAULT COMMIE
				limit = {
					has_government = communism
				}
				add_tech_bonus = {
					name = SOV_pc_of_mechanical_engineering_name_default
					bonus = 1
					uses = 2
					category = motorized_equipment
					category = infantry_weapons
				}
			}
			else = { #ALT IDEOLOGY
				add_tech_bonus = {
					name = SOV_pc_of_mechanical_engineering_name_alt
					bonus = 1
					uses = 2
					category = motorized_equipment
					category = infantry_weapons
				}
			}
			
			219 = {
				if = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_superior_war_machines

		icon = GFX_goal_superior_war_machine_captainluck
		prerequisite = { focus = SOV_pc_of_mechanical_engineering }
		x = -1
		y = 1
		relative_position_id = SOV_pc_of_mechanical_engineering
		cost = 5

		available = {
			OR = {
				has_tech = improved_medium_tank_chassis
				has_tech = improved_medium_tank
			}
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			set_variable = { SOV_defense_industry_tank_manufacturer_cost_factor = -0.25 }
			custom_effect_tooltip = SOV_superior_war_machines_ns_tt

			add_tech_bonus = {
				name = SOV_superior_war_machines
				bonus = 0.75
				uses = 2
				category = armor
			}
			if = {
				limit = {
					has_dlc = "No Step Back"
				}
				#T-34 tank template
				if = {
					limit = {
						OR = {
							has_tech = artillery3
							has_tech = antitank3
						}
					}
					create_equipment_variant = {
						name = "T-34"
						type = medium_tank_chassis_2
						parent_version = 0
						modules = {
							main_armament_slot = tank_medium_cannon_2
							turret_type_slot = tank_medium_two_man_tank_turret
							suspension_type_slot = tank_christie_suspension
							armor_type_slot = tank_welded_armor
							engine_type_slot = tank_diesel_engine
							special_type_slot_1 = sloped_armor
						}
						upgrades = {
							tank_nsb_engine_upgrade = 10
							tank_nsb_armor_upgrade = 7
						}
						icon = "gfx/interface/technologies/SOV_imp_main_tank.dds"
					}
				}
				else_if = {
					limit = {
						OR = {
							has_tech = artillery1
							has_tech = antitank1
						}
					}
					create_equipment_variant = {
						name = "T-34"
						type = medium_tank_chassis_2
						parent_version = 0
						modules = {
							main_armament_slot = tank_medium_cannon
							turret_type_slot = tank_medium_two_man_tank_turret
							suspension_type_slot = tank_christie_suspension
							armor_type_slot = tank_welded_armor
							engine_type_slot = tank_diesel_engine
							special_type_slot_1 = sloped_armor
						}
						upgrades = {
							tank_nsb_engine_upgrade = 10
							tank_nsb_armor_upgrade = 7
						}
						icon = "gfx/interface/technologies/SOV_imp_main_tank.dds"
					}
				}
				else_if = { #Why? You ruined your T-34
					limit = {
						has_tech = interwar_artillery
					}
					create_equipment_variant = {
						name = "T-34"
						type = medium_tank_chassis_2
						parent_version = 0
						modules = {
							main_armament_slot = tank_small_cannon_2
							turret_type_slot = tank_medium_two_man_tank_turret
							suspension_type_slot = tank_christie_suspension
							armor_type_slot = tank_welded_armor
							engine_type_slot = tank_diesel_engine
							special_type_slot_1 = sloped_armor
						}
						upgrades = {
							tank_nsb_engine_upgrade = 10
							tank_nsb_armor_upgrade = 7
						}
						icon = "gfx/interface/technologies/SOV_imp_main_tank.dds"
					}
				}
				else = { #Don't do this to yourself dude
					create_equipment_variant = {
						name = "T-34"
						type = medium_tank_chassis_2
						parent_version = 0
						modules = {
							main_armament_slot = tank_small_cannon
							turret_type_slot = tank_medium_two_man_tank_turret
							suspension_type_slot = tank_christie_suspension
							armor_type_slot = tank_welded_armor
							engine_type_slot = tank_diesel_engine
							special_type_slot_1 = sloped_armor
						}
						upgrades = {
							tank_nsb_engine_upgrade = 10
							tank_nsb_armor_upgrade = 7
						}
						icon = "gfx/interface/technologies/SOV_imp_main_tank.dds"
					}
				}
			}
		}
	}

	focus = {
		id = SOV_the_means_to_wage_war

		icon = GFX_goal_means_to_wage_war_captainluck
		prerequisite = { focus = SOV_pc_of_mechanical_engineering }
		x = 1
		y = 1
		relative_position_id = SOV_pc_of_mechanical_engineering
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			set_variable = { SOV_defense_industry_materiel_manufacturer_cost_factor = -0.25 }
			custom_effect_tooltip = SOV_the_means_to_wage_war_ns_tt

			add_tech_bonus = {
				name = SOV_the_means_to_wage_war
				bonus = 0.75
				uses = 2
				category = support_tech
			}
		}
	}

	focus = {
		id = SOV_soviet_artillery

		icon = GFX_GOAL_SOVIET_KATYUSHA
		prerequisite = { focus = SOV_superior_war_machines }
		x = -1
		y = 1
		relative_position_id = SOV_superior_war_machines
		cost = 10

		available = {
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_soviet_artillery_tech_bonus_name_default
				bonus = 0.75
				uses = 2
				ahead_reduction = 2
				category = artillery
			}
			
			if = { # 2 Mils in Chelyabinsk
				limit = {
					has_full_control_of_state = 572
					572 = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
				}
				572 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			else = { # If Chelyabinsk not available, then 1 Mil elsewhere
				random_owned_state = {
					limit = {
						is_fully_controlled_by = ROOT
						arms_factory > 1
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}

			add_ideas = SOV_defense_industry_artillery_bonus

			#SU-85/100 tank template (AT)
			if = {
				limit = {
					has_tech = antitank5
				}
				create_equipment_variant = {
					name = "SU-100"
					type = medium_tank_destroyer_chassis_2
					parent_version = 0
					modules = {
						main_armament_slot = tank_high_velocity_cannon_3
						turret_type_slot = tank_medium_fixed_superstructure_turret
						suspension_type_slot = tank_christie_suspension
						armor_type_slot = tank_welded_armor
						engine_type_slot = tank_diesel_engine
						special_type_slot_1 = sloped_armor
					}
					upgrades = {
						tank_nsb_engine_upgrade = 10
						tank_nsb_armor_upgrade = 8
					}
				}
			}
			else_if = {
				limit = {
					has_tech = antitank2
				}
				create_equipment_variant = {
					name = "SU-100"
					type = medium_tank_destroyer_chassis_2
					parent_version = 0
					modules = {
						main_armament_slot = tank_high_velocity_cannon_2
						turret_type_slot = tank_medium_fixed_superstructure_turret
						suspension_type_slot = tank_christie_suspension
						armor_type_slot = tank_welded_armor
						engine_type_slot = tank_diesel_engine
						special_type_slot_1 = sloped_armor
					}
					upgrades = {
						tank_nsb_engine_upgrade = 10
						tank_nsb_armor_upgrade = 8
					}
				}
			}
			else_if = { #You really should invest some time in research AT...
				limit = {
					has_tech = interwar_antitank
				}
				create_equipment_variant = {
					name = "SU-85"
					type = medium_tank_destroyer_chassis_2
					parent_version = 0
					modules = {
						main_armament_slot = tank_high_velocity_cannon
						turret_type_slot = tank_medium_fixed_superstructure_turret
						suspension_type_slot = tank_christie_suspension
						armor_type_slot = tank_welded_armor
						engine_type_slot = tank_diesel_engine
						special_type_slot_1 = sloped_armor
					}
					upgrades = {
						tank_nsb_engine_upgrade = 10
						tank_nsb_armor_upgrade = 8
					}
					
				}
			}
			else = { #This is just blasphemy
				create_equipment_variant = {
					name = "SU-85"
					type = medium_tank_destroyer_chassis_2
					parent_version = 0
					modules = {
						main_armament_slot = tank_heavy_cannon
						turret_type_slot = tank_medium_fixed_superstructure_turret
						suspension_type_slot = tank_christie_suspension
						armor_type_slot = tank_welded_armor
						engine_type_slot = tank_diesel_engine
						special_type_slot_1 = sloped_armor
					}
					upgrades = {
						tank_nsb_engine_upgrade = 10
						tank_nsb_armor_upgrade = 8
					}
					
				}
			}

			#SU-122 tank template (SPG)
			if = {
				limit = {
					has_tech = artillery4
				}
				create_equipment_variant = {
					name = "SU-122"
					type = medium_tank_artillery_chassis_2
					parent_version = 0
					modules = {
						main_armament_slot = tank_heavy_howitzer
						turret_type_slot = tank_medium_fixed_superstructure_turret
						suspension_type_slot = tank_bogie_suspension
						armor_type_slot = tank_riveted_armor
						engine_type_slot = tank_diesel_engine
						special_type_slot_1 = sloped_armor
					}
					upgrades = {
						tank_nsb_engine_upgrade = 10
						tank_nsb_armor_upgrade = 8
					}
					
				}
			}
			else_if = {
				limit = {
					has_tech = artillery1
				}
				create_equipment_variant = {
					name = "SU-122"
					type = medium_tank_artillery_chassis_2
					parent_version = 0
					modules = {
						main_armament_slot = tank_medium_howitzer_2
						turret_type_slot = tank_medium_fixed_superstructure_turret
						suspension_type_slot = tank_bogie_suspension
						armor_type_slot = tank_riveted_armor
						engine_type_slot = tank_diesel_engine
						special_type_slot_1 = sloped_armor
					}
					upgrades = {
						tank_nsb_engine_upgrade = 10
						tank_nsb_armor_upgrade = 8
					}
					
				}
			}
			else = { #You really need some arty research
				create_equipment_variant = {
					name = "SU-122"
					type = medium_tank_artillery_chassis_2
					parent_version = 0
					modules = {
						main_armament_slot = tank_medium_howitzer
						turret_type_slot = tank_medium_fixed_superstructure_turret
						suspension_type_slot = tank_bogie_suspension
						armor_type_slot = tank_riveted_armor
						engine_type_slot = tank_diesel_engine
						special_type_slot_1 = sloped_armor
					}
					upgrades = {
						tank_nsb_engine_upgrade = 10
						tank_nsb_armor_upgrade = 8
					}
					
				}
			}
		}
	}

	focus = {
		id = SOV_pc_of_mortar_armament

		icon = GFX_goal_generic_occupy_start_war
		prerequisite = { focus = SOV_pc_of_mechanical_engineering }
		x = 0
		y = 2
		relative_position_id = SOV_pc_of_mechanical_engineering
		cost = 10

		available = {
			has_full_control_of_state = 219 #MOSCOW
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_to_variable = { SOV_defense_industry_breakthrough_factor = 0.05 }
			add_to_variable = { SOV_defense_industry_army_artillery_defence_factor = 0.05 }
			custom_effect_tooltip = SOV_pc_of_mortar_armament_ns_tt

				add_tech_bonus = {
					name = SOV_pc_of_mortar_armament_name_default
					bonus = 1
					uses = 2
					category = artillery
				}

			219 = {
				if = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

focus = {
		id = SOV_development_of_tankograd

		icon = GFX_goal_develop_tankograd_captainluck
		prerequisite = { focus = SOV_the_means_to_wage_war }
		x = 1
		y = 1
		relative_position_id = SOV_the_means_to_wage_war
		cost = 10

		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_fyp_controlled_factories_tier_4_tt
				NOT = { num_of_controlled_factories < SOV_fyp_factory_requirement_tier_4 }
			}
			#TODO_Manu: This could require X num of factories to have been relocated
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			add_to_variable = { SOV_defense_industry_land_equipment_upgrade_xp_cost = -0.1 }
			custom_effect_tooltip = SOV_development_of_tankograd_ns_tt

			custom_effect_tooltip = SOV_development_of_tankograd_factories_tt
			#This is just for tooltip purposes
			effect_tooltip = {
				every_owned_state = {
					limit = {
						is_on_continent = asia
						arms_factory > 2
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}

			#Actual effects
			set_temp_variable = { temp_targets_index = 0 }
			while_loop_effect = {
				limit = {
					check_variable = { temp_targets_index = 10 compare = less_than }
				}
				hidden_effect = {
					every_owned_state = {
						limit = {
							is_on_continent = asia
							arms_factory > 2
							free_building_slots = {
								building = arms_factory
								size > 1
								include_locked = yes
							}
							NOT = { has_state_flag = SOV_development_of_tankograd_flag }
						}
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = arms_factory
							level = 1
							instant_build = yes
						}
						set_state_flag = SOV_development_of_tankograd_flag
						add_to_temp_variable = { SOV.temp_targets_index = 1 }
						log = "Round [?SOV.temp_targets_index]"
					}
				}
			}
		}
	}

	focus = {
		id = SOV_merge_tank_and_materiel_plants

		icon = GFX_focus_SOV_merge_plants
		prerequisite = { focus = SOV_development_of_tankograd focus = SOV_pc_of_mortar_armament focus = SOV_soviet_artillery }

		x = 0
		y = 1
		relative_position_id = SOV_pc_of_mortar_armament
		cost = 5

		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			custom_effect_tooltip = SOV_merge_tank_and_materiel_plants_tt
		}
	}
	focus = {
		id = SOV_strengthen_the_mobilization_plan
		icon = GFX_focus_SOV_mobilization_plan
		x = 6
		y = 0
		relative_position_id = SOV_found_the_pcdi
		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {

		}
		
		search_filters = {FOCUS_FILTER_MANPOWER}

		completion_reward = {
			add_doctrine_cost_reduction = {
				name = land_doc_bonus
				cost_reduction = 0.5
				uses = 2
				category = land_doctrine
			}
			add_to_variable = { SOV_the_red_army_mobilization_speed = 0.05 }
			add_to_variable = { SOV_the_red_army_conscription_factor = 0.03 }
			custom_effect_tooltip = SOV_strengthen_the_mobilization_plan_ns_tt
		}
	}

	focus = {
		id = SOV_military_engineering_university
		icon = GFX_focus_generic_military_academy
		prerequisite = { focus = SOV_found_the_pcdi }
		prerequisite = { focus = SOV_strengthen_the_mobilization_plan }
		x = 2
		y = 1
		relative_position_id = SOV_found_the_pcdi
		cost = 5

		available = {

		}
		
		search_filters = {}

		completion_reward = {
			add_to_variable = { SOV_defense_industry_production_speed_coastal_bunker_factor = 0.05 }
			add_to_variable = { SOV_defense_industry_production_speed_bunker_factor = 0.05 }
			add_to_variable = { SOV_defense_industry_max_dig_in_factor = 0.05 }
			custom_effect_tooltip = SOV_military_engineering_university_ns_tt
		}
	}

	focus = {
		id = SOV_move_industry_to_the_urals
		icon = GFX_goal_reichsautobahn
		prerequisite = { focus = SOV_military_engineering_university }
		x = -3
		y = 1
		relative_position_id = SOV_military_engineering_university
		cost = 5

		available = {
			has_full_control_of_state = 219 #MOSCOW
			has_equipment = { train_equipment > 119 } #20 trains per factory
			OR = {
				threat > 0.85
				any_enemy_country = {
					SOV_is_major_not_original_sov = yes
					capital_scope = {
						is_on_continent = europe
					}
				}
			}
		}

		select_effect = {
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = SOV_industrial_relocation_trains_focus_negative
				producer = SOV
			}
			#Factories are removed immediately to keep consistency with how decisions work
			219 = { #Moscow
				remove_building = {
					type = arms_factory
					level = 1
				}
				remove_building = {
					type = industrial_complex
					level = 1
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 195
				}
				195 = { #Leningrad
					remove_building = {
						type = arms_factory
						level = 1
					}
					remove_building = {
						type = industrial_complex
						level = 1
					}
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 202
				}
				202 = { #Kiev
					remove_building = {
						type = arms_factory
						level = 1
					}
					remove_building = {
						type = industrial_complex
						level = 1
					}
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = train_equipment
					amount = SOV_industrial_relocation_trains_focus
					producer = SOV
				}
			}
			custom_effect_tooltip = SOV_focus_select_effect_tt
			effect_tooltip = {
				219 = { #Moscow
					remove_building = {
						type = arms_factory
						level = 1
					}
					remove_building = {
						type = industrial_complex
						level = 1
					}
				}
				if = {
					limit = {
						has_full_control_of_state = 195
					}
					195 = { #Leningrad
						remove_building = {
							type = arms_factory
							level = 1
						}
						remove_building = {
							type = industrial_complex
							level = 1
						}
					}
				}
				if = {
					limit = {
						has_full_control_of_state = 202
					}
					202 = { #Kiev
						remove_building = {
							type = arms_factory
							level = 1
						}
						remove_building = {
							type = industrial_complex
							level = 1
						}
					}
				}
			}
			custom_effect_tooltip = SOV_move_industry_to_the_urals_trains_tt

			custom_effect_tooltip = SOV_focus_complete_effect_tt
			unlock_decision_category_tooltip = SOV_industry_relocation

			random_controlled_state = {
				limit = {
					SOV_is_industrial_relocation_destiny_state = yes
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			if = {
				limit = {
					ROOT = { has_full_control_of_state = 195 } #Leningrad
				}
				random_controlled_state = { #Different State please thanks
					limit = {
						NOT = { state = PREV }
						SOV_is_industrial_relocation_destiny_state = yes
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					ROOT = { has_full_control_of_state = 202 } #Leningrad
				}
				random_controlled_state = { #Different State please thanks
					limit = {
						NOT = { state = PREV }
						SOV_is_industrial_relocation_destiny_state = yes
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_the_road_of_life
		icon = GFX_focus_SOV_the_road_of_life
		prerequisite = { focus = SOV_move_industry_to_the_urals }
		x = 2
		y = 1
		relative_position_id = SOV_development_of_tankograd
		cost = 5

		available = {
			OR = {
				195 = { #LENINGRAD
					is_controlled_by = ROOT
					any_neighbor_state = {
						is_owned_by = ROOT
						NOT = { is_fully_controlled_by = ROOT }
					}
				}
				219 = { #MOSCOW
					is_controlled_by = ROOT
					any_neighbor_state = {
						is_owned_by = ROOT
						NOT = { is_fully_controlled_by = ROOT }
					}
				}
				217 = { #STALINGRAD
					is_controlled_by = ROOT
					any_neighbor_state = {
						is_owned_by = ROOT
						NOT = { is_fully_controlled_by = ROOT }
					}
				}
				137 = { #SEVASTOPOL
					is_controlled_by = ROOT
					any_neighbor_state = {
						is_owned_by = ROOT
						NOT = { is_fully_controlled_by = ROOT }
					}
				}
				202 = { #Kiev
					is_controlled_by = ROOT
					any_neighbor_state = {
						is_owned_by = ROOT
						NOT = { is_fully_controlled_by = ROOT }
					}
				}
			}
		}
		
		search_filters = {}

		completion_reward = {
			add_timed_idea = {
				idea = SOV_the_road_of_life_ns
				days = 730
			}
		}
	}

	focus = {
		id = SOV_the_molotov_line
		icon = GFX_goal_fortify_the_westwall
		prerequisite = { focus = SOV_military_engineering_university }
		x = -1
		y = 1
		relative_position_id = SOV_military_engineering_university
		cost = 5

		mutually_exclusive = { focus = SOV_improve_the_stalin_line }

		available = {
			OR = {
				has_full_control_of_state = 188
				has_full_control_of_state = 189
				has_full_control_of_state = 814
				has_full_control_of_state = 97
				has_full_control_of_state = 94
				has_full_control_of_state = 93
				has_full_control_of_state = 91
				has_full_control_of_state = 89
				has_full_control_of_state = 80
				has_full_control_of_state = 78
				has_full_control_of_state = 766
			}
		}
		
		search_filters = {}

		completion_reward = {
			custom_effect_tooltip = SOV_the_molotov_line_tt

			### LITHUANIA ###
			if = { #If Memel is controlled, then add forts in Memel, if not, then go to Zemaitija
				limit = {
					188 = { is_fully_controlled_by = ROOT }
				}
				custom_effect_tooltip = SOV_molotov_line_forts_3
				hidden_effect = {
					188 = {
						add_building_construction = {
							type = bunker
							level = 3
							province = {
								id = 3288
							}
							instant_build = yes
						}
					}
				}
			}
			else = {
				189 = { #ZEMAITIJA
					if = {
						limit = { is_fully_controlled_by = ROOT }
						custom_effect_tooltip = SOV_molotov_line_forts_3
						hidden_effect = {
							add_building_construction = {
								type = bunker
								level = 1
								province = {
									id = 6314
									id = 9499
									id = 3337
								}
								instant_build = yes
							}
						}
					}
				}
			}
			814 = { #Suduva
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_2
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 6407
								id = 11312
							}
							instant_build = yes
						}
					}
				}
			}

			### POLAND ###
			97 = { #Bialystok
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_6
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 3254
								id = 400
								id = 11357
								id = 11329
								id = 11274
								id = 290
							}
							instant_build = yes
						}
					}
				}
			}
			94 = { #Polesie
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_2
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 3392
								id = 6546
							}
							instant_build = yes
						}
					}
				}
			}
			93 = { #Wolyn
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_2
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 11441
								id = 422
							}
							instant_build = yes
						}
					}
				}
			}
			91 = { #Lwow
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_2
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 536
								id = 9468
							}
							instant_build = yes
						}
					}
				}
			}
			89 = { #Stanislawow
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_4
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 6431
								id = 6460
								id = 9425
								id = 3743
							}
							instant_build = yes
						}
					}
				}
			}

			### ROMANIA ###
			80 = { #Bucovina
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_2
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 9548
								id = 577
							}
							instant_build = yes
						}
					}
				}
			}
			### ROMANIA ###
			78 = { #Bessarabia
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_5
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 3407
								id = 3577
								id = 565
								id = 3707
								id = 3724
							}
							instant_build = yes
						}
					}
				}
			}
			766 = { #Southern Bessarabia
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_2
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 3704
								id = 3701
							}
							instant_build = yes
						}
					}
				}
			}
		}
	}

	focus = {
		id = SOV_improve_the_stalin_line
		icon = GFX_goal_fortify_the_westwall
		prerequisite = { focus = SOV_military_engineering_university }
		x = 1
		y = 1
		relative_position_id = SOV_military_engineering_university
		cost = 5

		mutually_exclusive = { focus = SOV_the_molotov_line }

		available = {
			OR = {
				has_full_control_of_state = 209
				has_full_control_of_state = 210
				has_full_control_of_state = 207
				has_full_control_of_state = 206
				has_full_control_of_state = 202
				has_full_control_of_state = 203
				has_full_control_of_state = 834
				has_full_control_of_state = 192
			}
		}
		
		search_filters = {}

		completion_reward = {
			209 = {
				if = {
					limit = { is_fully_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 6
						province = 415
						instant_build = yes
					}
				}
			}
			210 = {
				if = {
					limit = { is_fully_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 4
						province = 3333
						instant_build = yes
					}
				}
			}
			207 = {
				if = {
					limit = { is_fully_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 4
						province = 3219
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 6371
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 6220
						instant_build = yes
					}
				}
			}
			206 = {
				if = {
					limit = { is_fully_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 4
						province = 11370
						instant_build = yes
					}
				}
			}
			202 = {
				if = {
					limit = { is_fully_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 7
						province = 525
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 7
						province = 3494
						instant_build = yes
					}
				}

			}
			203 = {
				if = {
					limit = { is_fully_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 7
						province = 11409
						instant_build = yes
					}
				}
			}
			834 ={
				if = {
					limit = { is_fully_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 5
						province = 754
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 5
						province = 741
						instant_build = yes
					}
				}
			}
			192 = {
				if = {
					limit = { is_fully_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 5
						province = 11670
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_the_defense_of_moscow
		icon = GFX_FOCUS_SOV_DEFENSE_OF_MOSCOW
		prerequisite = { focus = SOV_move_industry_to_the_urals focus = SOV_improve_the_stalin_line focus = SOV_the_molotov_line }
		x = 1
		y = 1
		relative_position_id = SOV_move_industry_to_the_urals
		cost = 5

		available = {
			219 = {
				is_controlled_by = ROOT
				
				OR = {
					any_neighbor_state = {
						NOT = { is_controlled_by = ROOT }
					}

					SOV = { surrender_progress > 0.1 } #Keep an eye on this, might be too cheesy
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			army_experience = 15
			219 = {
				custom_effect_tooltip = SOV_defense_of_moscow_forts
				hidden_effect = {
					if = {
						limit = {
							ROOT = { controls_province = 3391 }
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 3391
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 6414 }
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 6414
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 9348 }
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 9348
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 301 }
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 301
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 9378 }
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 9378
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 6283 }
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 6283
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 3259 }
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 3259
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 11282 }
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 11282
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 6380 }
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 6380
							instant_build = yes
						}
					}				
				}
			}
		}
	}

	focus = {
		id = SOV_impregnable_forts
		icon = GFX_goal_generic_fortify_city
		prerequisite = { focus = SOV_improve_the_stalin_line focus = SOV_the_molotov_line }
		x = -1
		y = 1
		relative_position_id = SOV_improve_the_stalin_line
		cost = 10

		available = {
			OR = {
				has_full_control_of_state = 195 #LENINGRAD
				has_full_control_of_state = 208 #LUGA
				has_full_control_of_state = 137 #CRIMEA
			}
		}
		
		search_filters = {}

		completion_reward = {
			if = {
				limit = {
					has_full_control_of_state = 195 #LENINGRAD
				}
				195 = { #LENINGRAD
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
					set_building_level = {
						type = bunker
						level = 3
						province = {
							id = 3151
							id = 6174
						}
						instant_build = yes
					}
					set_building_level = {
						type = coastal_bunker
						level = 3
						province = {
							id = 3151
							id = 6174
						}
						instant_build = yes
					}
					add_dynamic_modifier = { modifier = SOV_krasnaya_gorka_battery scope = SOV }
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 208 #LUGA
				}
				208 = { #LUGA
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
					set_building_level = {
						type = bunker
						level = 3
						province = 9097
						instant_build = yes
					}
					set_building_level = {
						type = coastal_bunker
						level = 3
						province = 9097
						instant_build = yes
					}
					add_dynamic_modifier = { modifier = SOV_seraya_loshad_battery scope = SOV }
				}
			}

			if = {
				limit = {
					has_full_control_of_state = 137 #CRIMEA
				}
				137 = { #CRIMEA
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
					set_building_level = {
						type = bunker
						level = 3
						province = 3686
						instant_build = yes
					}
					set_building_level = {
						type = coastal_bunker
						level = 3
						province = 3686
						instant_build = yes
					}
					add_dynamic_modifier = { modifier = SOV_armored_battery_35 scope = SOV }
				}
			}
		}
	}

	focus = {
		id = SOV_protect_the_white_sea_baltic_canal
		icon = GFX_focus_generic_provoke_border_clashes
		prerequisite = { focus = SOV_military_engineering_university }
		x = 2
		y = 2
		relative_position_id = SOV_military_engineering_university
		cost = 5

		available = {
			has_full_control_of_state = 215 #ONEGA
			has_full_control_of_state = 216 #OLONETS
			has_full_control_of_state = 264 #TIKHVIN
			has_full_control_of_state = 195 #LENINGRAD
		}
		
		search_filters = {}

		completion_reward = {
			if = {
				limit = {
					has_full_control_of_state = 215 #ONEGA
				}
				215 = { #ONEGA
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
					set_building_level = {
						type = bunker
						level = 1
						province = {
							id = 9045
							id = 3078
							id = 11212
						}
						instant_build = yes
					}
					set_building_level = {
						type = coastal_bunker
						level = 1
						province = 9045
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 216 #OLONETS
				}
				216 = { #OLONETS
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = {
							id = 92
							id = 11092
						}
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 264 #TIKHVIN
				}
				264 = { #TIKHVIN
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = {
							id = 9082
							id = 9190
							id = 11059
						}
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 195 #LENINGRAD
				}
				195 = { #LENINGRAD
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = {
							id = 149
							id = 11068
							id = 79
						}
						instant_build = yes
					}
				}
			}
		}
	}



	focus = {
		id = SOV_cohesion_first
		icon = GFX_focus_secret_rearmament
		prerequisite = { focus = SOV_strengthen_the_mobilization_plan }
		x = 0
		y = 1
		relative_position_id = SOV_strengthen_the_mobilization_plan
		cost = 5

		available = {
		}
		
		search_filters = {}

		completion_reward = {
			add_to_variable = { SOV_the_red_army_army_org_factor = 0.05 }
			add_to_variable = { SOV_the_red_army_training_time_factor = 0.1 }
			custom_effect_tooltip = SOV_cohesion_first_ns_tt
		}
	}

	focus = {
		id = SOV_rehabilitated_military
		icon = GFX_goal_generic_small_arms
		prerequisite = {  focus = SOV_cohesion_first }
		x = 0
		y = 2
		relative_position_id = SOV_strengthen_the_mobilization_plan
		cost = 5


		
		search_filters = {}

		completion_reward = {
			add_to_variable = { SOV_the_red_army_army_org_factor = 0.05 }
			custom_effect_tooltip = SOV_rehabilitated_military_ns_tt

			add_ideas = SOV_rehabilitated_military_ns
		}
	}

	focus = {
		id = SOV_military_reorganization
		icon = GFX_focus_generic_military_mission
		prerequisite = { focus = SOV_rehabilitated_military }
		x = 0
		y = 2
		relative_position_id = SOV_rehabilitated_military
		cost = 10

		select_effect = {
			add_ideas = SOV_military_reorganization_ns
		}

		available = {

		}
		
		search_filters = {FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			#Tooltip purposes (Select Effect)
			custom_effect_tooltip = SOV_focus_select_effect_tt
			effect_tooltip = {
				add_ideas = SOV_military_reorganization_ns
			}

			#(Complete Effect)
			custom_effect_tooltip = SOV_focus_complete_effect_tt
			hidden_effect = {
				remove_ideas = SOV_military_reorganization_ns
			}

			add_to_variable = { SOV_the_red_army_unit_infantry_design_cost_factor = -0.1 }
			add_to_variable = { SOV_the_red_army_unit_artillery_brigade_design_cost_factor = -0.1 }
			custom_effect_tooltip = SOV_military_reorganization_ns_tt

			army_experience = 50
			add_command_power = 25
		}
	}

	focus = {
		id = SOV_desperate_measures
		icon = GFX_goal_positive_heroism_captainluck
		prerequisite = { focus = SOV_strengthen_the_mobilization_plan }
		x = 3
		y = 2
		relative_position_id = SOV_strengthen_the_mobilization_plan
		cost = 5

		available = {
			any_enemy_country = {
				SOV_is_major_not_original_sov = yes
			}
		}
		
		search_filters = {}

		completion_reward = {
			add_timed_idea = {
				idea = SOV_desperate_measures_ns
				days = 365
			}

			custom_effect_tooltip = SOV_desperate_measures_decisions_unlocked_tt
		}
	}

	focus = {
		id = SOV_an_adaptable_army
		icon = GFX_focus_prc_infiltration
		prerequisite = { focus = SOV_rehabilitated_military }
		prerequisite = { focus = SOV_desperate_measures }
		x = 1
		y = 1
		relative_position_id = SOV_rehabilitated_military
		cost = 10

		available = {

		}
		
		search_filters = {}

		completion_reward = {
			add_to_variable = { SOV_the_red_army_heat_attrition_factor = -0.1 }
			add_to_variable = { SOV_the_red_army_winter_attrition_factor = -0.1 }
			add_to_variable = { SOV_the_red_army_acclimatization_cold_climate_gain_factor = 0.15 }
			add_to_variable = { SOV_the_red_army_acclimatization_hot_climate_gain_factor = 0.15 }
			add_to_variable = { SOV_the_red_army_terrain_penalty_reduction = 0.05 }
			custom_effect_tooltip = SOV_an_adaptable_army_ns_tt
		}
	}

	focus = {
		id = SOV_lessons_of_war
		icon = GFX_FOCUS_SOV_LESSONS
		prerequisite = { focus = SOV_rehabilitated_military }
		prerequisite = { focus = SOV_desperate_measures }
		x = 0
		y = 1
		relative_position_id = SOV_desperate_measures
		cost = 5

		available = {
			OR = {
				GER = {
					has_global_flag = GER_fall_blau
				}
				date > 1942.08.01
				surrender_progress > 0.6
			}
		}
		
		search_filters = {FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			add_to_variable = { SOV_the_red_army_army_org_factor = 0.05 }
			set_variable = { SOV_the_red_army_experience_gain_army_factor = 0 }
			set_variable = { SOV_the_red_army_experience_loss_factor = 0 }

			custom_effect_tooltip = SOV_lessons_of_war_ns_tt


			custom_effect_tooltip = SOV_lessons_of_war_cowed_trait_tt
			hidden_effect = {
				every_army_leader = {
					limit = {
						has_trait = trait_SOV_cowed_by_stalin_army
					}
					remove_unit_leader_trait =  trait_SOV_cowed_by_stalin_army
				}
				every_navy_leader = {
					limit = {
						has_trait = trait_SOV_cowed_by_stalin_navy
					}
					remove_unit_leader_trait =  trait_SOV_cowed_by_stalin_navy
				}
				JFU_update_SOV_generals = yes
			}
		}
	}
	
	focus = {
		id = SOV_organization_of_the_partisans
		icon = GFX_focus_focus_fra_maquis
		prerequisite = { focus = SOV_lessons_of_war }
		x = -1
		y = 1
		relative_position_id = SOV_lessons_of_war
		cost = 10

		available = {
			any_owned_state = {
				controller = {
					has_war_with = ROOT
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_to_variable = { SOV_the_red_army_operative_slot  = 1 }
			custom_effect_tooltip = SOV_organization_of_the_partisans_ns_tt

			if = {
				limit = {
					has_government = communism
				}
				show_unit_leaders_tooltip = SOV_vasily_korzh
				show_unit_leaders_tooltip = SOV_sidor_kovpak
			}

			if = {
				limit = {
					has_dlc = "La Resistance"
				}

				add_timed_idea = {
					idea = SOV_central_headquarters_of_the_partisan_movement
					days = 720
				}
			}
			else = {
				add_timed_idea = {
					idea = SOV_central_headquarters_of_the_partisan_movement_no_lar
					days = 720
				}
			}

			if = {
				limit = {
					has_government = communism
				}
				custom_effect_tooltip = unlock_propaganda_campaign_tt
				unlock_decision_tooltip = SOV_propaganda_glory_to_partisans
				unlock_decision_tooltip = SOV_propaganda_death_to_invaders
				custom_effect_tooltip = propaganda_campaign_requirement_tt
			}
		}
	}

	focus = {
		id = SOV_smersh
		icon = GFX_goal_generic_forceful_treaty
		prerequisite = { focus = SOV_lessons_of_war }
		x = 2
		y = 1
		relative_position_id = SOV_lessons_of_war
		cost = 10

		available = {

		}
		
		search_filters = {FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				add_ideas = SOV_smersh
			}
			else = {
				add_ideas = SOV_smersh_no_lar
			}

			if = {
				limit = {
					has_government = communism
				}
				custom_effect_tooltip = unlock_propaganda_campaign_tt
				custom_effect_tooltip = propaganda_campaign_requirement_tt
			}
		}
	}

	focus = {
		id = SOV_barrier_troops
		icon = GFX_focus_generic_manpower
		prerequisite = { focus = SOV_smersh }
		x = 0
		y = 1
		relative_position_id = SOV_smersh
		cost = 5

		available = {

		}
		
		search_filters = {}

		completion_reward = {
			add_to_variable = { SOV_the_red_army_army_org_regain = 0.1 }
			custom_effect_tooltip = SOV_barrier_troops_ns_tt
		}
	}

	focus = {
		id = SOV_experts_in_camouflage
		icon = GFX_goal_generic_position_armies
		prerequisite = { focus = SOV_military_reorganization }
		x = -1
		y = 1
		relative_position_id = SOV_military_reorganization
		cost = 5

		available = {
			any_enemy_country = {
				SOV_is_major_not_original_sov = yes
			}
		}
		
		search_filters = {}

		completion_reward = {
			add_to_variable = { SOV_the_red_army_cas_damage_reduction = 0.05 }
			add_to_variable = { SOV_the_red_army_max_dig_in = 5 }
			add_to_variable = { SOV_the_red_army_dig_in_speed_factor = 0.05 }
			custom_effect_tooltip = SOV_experts_in_camouflage_ns_tt
		}
	}

	focus = {
		id = SOV_keep_commissars_organization
		icon = GFX_goal_generic_major_war
		prerequisite = { focus = SOV_military_reorganization }
		prerequisite = { focus = SOV_lessons_of_war }
		x = 1
		y = 1
		relative_position_id = SOV_military_reorganization
		cost = 10

		mutually_exclusive = { focus = SOV_swap_to_political_advisors }

		available = {

		}

		
		search_filters = {}

		completion_reward = {
			if = {
				limit = {
					has_idea = SOV_politicized_military
				}
				swap_ideas = {
					remove_idea = SOV_politicized_military
					add_idea = SOV_politicized_military_keep
				}
			}
			else_if = {
				limit = {
					has_idea = SOV_politicized_military_humanism
				}
				swap_ideas = {
					remove_idea = SOV_politicized_military_humanism
					add_idea = SOV_politicized_military_keep_humanism
				}
			}
		}
	}

	focus = {
		id = SOV_swap_to_political_advisors
		icon = GFX_goal_generic_occupy_states_ongoing_war
		prerequisite = { focus = SOV_military_reorganization }
		prerequisite = { focus = SOV_lessons_of_war }
		x = 3
		y = 1
		relative_position_id = SOV_military_reorganization
		cost = 10

		mutually_exclusive = { focus = SOV_keep_commissars_organization }

		available = {

		}

		search_filters = {FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			if = {
				limit = {
					has_idea = SOV_politicized_military
				}
				swap_ideas = {
					remove_idea = SOV_politicized_military
					add_idea = SOV_politicized_military_swap
				}
			}
			else_if = {
				limit = {
					has_idea = SOV_politicized_military_humanism
				}
				swap_ideas = {
					remove_idea = SOV_politicized_military_humanism
					add_idea = SOV_politicized_military_swap_humanism
				}
			}
			else = { #To prevent the ugly "No current effects" tooltip if other focus taken
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SOV_politicized_military
						add_idea = SOV_politicized_military_swap
					}
				}
			}
		}
	}

	focus = {
		id = SOV_the_glory_of_the_red_army
		icon = GFX_focus_SOV_the_glory_of_the_red_army_communism
		prerequisite = { focus = SOV_keep_commissars_organization focus = SOV_swap_to_political_advisors }
		x = 1
		y = 1
		relative_position_id = SOV_keep_commissars_organization
		cost = 5
		
		search_filters = {FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			add_to_variable = { SOV_the_red_army_special_forces_cap = 0.1 }
			add_to_variable = { SOV_the_red_army_land_doctrine_cost_factor = -0.1 }
			custom_effect_tooltip = SOV_the_glory_of_the_red_army_ns_tt
			
			army_experience = 75
			custom_effect_tooltip = unlock_propaganda_campaign_tt
			unlock_decision_tooltip = SOV_propaganda_sweep_scum_out
			#New
			hidden_effect = {
				set_technology = { masterful_blitz = 1 popup = no }
			}
			custom_effect_tooltip = SOV_the_glory_of_the_red_army_masterful_blitz_tactic_tt
		}
	}




########   #######  ##       #### ######## ####  ######     ###    ##       
##     ## ##     ## ##        ##     ##     ##  ##    ##   ## ##   ##       
##     ## ##     ## ##        ##     ##     ##  ##        ##   ##  ##       
########  ##     ## ##        ##     ##     ##  ##       ##     ## ##       
##        ##     ## ##        ##     ##     ##  ##       ######### ##       
##        ##     ## ##        ##     ##     ##  ##    ## ##     ## ##       
##         #######  ######## ####    ##    ####  ######  ##     ## ######## 



	focus = {
		id = SOV_the_path_of_marxism_leninism
		icon = GFX_focus_SOV_the_path_of_marxism_leninism
		x = 12
		y = 0
		relative_position_id = SOV_strengthen_the_mobilization_plan
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			add_political_power = 25

			SOV_paranoia_low_decrease_effect = yes	
		}
	}

	focus = {
		id = SOV_the_centre
		icon = GFX_goal_stalin_bust_captainluck
		prerequisite = { focus = SOV_the_path_of_marxism_leninism }
		x = -4
		y = 1
		relative_position_id = SOV_the_path_of_marxism_leninism
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA FOCUS_FILTER_STABILITY}

		completion_reward = {
			hidden_effect = {
				add_dynamic_modifier = { modifier = SOV_the_politburo_good_dynamic_modifier }
			}
			custom_effect_tooltip = SOV_the_centre_ns_tt

			add_political_power = 25
			add_stability = 0.05

			SOV_paranoia_low_decrease_effect = yes
			mark_focus_tree_layout_dirty = yes
		}
	}

	focus = {
		id = SOV_socialism_in_one_country
		icon = GFX_focus_SOV_socialism_in_one_country
		prerequisite = { focus = SOV_the_centre }
		x = -1
		y = 1
		relative_position_id = SOV_the_centre
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			add_to_variable = { SOV_the_politburo_communism_drift = 0.05 }
			add_to_variable = { SOV_the_politburo_drift_defence_factor = 0.05 } 
			add_to_variable = { SOV_the_politburo_defensive_war_stability_factor = 0.1 } 
			custom_effect_tooltip = SOV_socialism_in_one_country_ns_tt

			add_political_power = 25

			SOV_paranoia_low_decrease_effect = yes
		}
	}

	focus = {
		id = SOV_the_stalin_constitution
		icon = GFX_goal_support_communism
		prerequisite = { focus = SOV_the_centre }
		x = 1
		y = 1
		relative_position_id = SOV_the_centre
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_to_variable = { SOV_the_politburo_political_power_factor = 0.05 }
			add_to_variable = { SOV_the_politburo_drift_defence_factor = 0.05 } 
			custom_effect_tooltip = SOV_the_stalin_constitution_ns_tt

			add_political_power = 50
			add_stability = 0.05

			SOV_paranoia_low_decrease_effect = yes
		}
	}

	focus = {
		id = SOV_the_zinovyevite_terrorist_center
		icon = GFX_focus_SOV_purge_zinovyevists
		prerequisite = { focus = SOV_the_stalin_constitution }
		x = 0
		y = 1
		relative_position_id = SOV_the_stalin_constitution
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		select_effect = {
			set_country_flag = SOV_paranoia_do_not_cancel_focus_flag #This focus cannot be canceled
		}

		completion_reward = {
			clr_country_flag = SOV_paranoia_do_not_cancel_focus_flag
			set_country_flag = { flag = SOV_paranoia_random_purge_cooldown_from_focus_flag days = 15 } #Used to prevent random purges from popping up while this is active
			set_country_flag = SOV_first_moscow_trial_flag #Used to unlock the next purge focus

			add_political_power = 25

			SOV_paranoia_high_increase_effect = yes
			
			custom_effect_tooltip = SOV_will_trigger_a_great_purge_tt
			hidden_effect = {
				set_country_flag = SOV_purge_event_unavoidable_flag #No way to avoid this purge. This people are about to be purged and there's nothing you can do for them.
				SOV_trigger_great_purge_moscow_trial_effect = yes #FIRST MOSCOW TRIAL -> Zinovyev & friends
			}
			custom_effect_tooltip = SOV_trigger_first_moscow_trial_tt
		}
	}

	focus = {
		id = SOV_secure_the_administration
		icon = GFX_focus_generic_join_comintern
		prerequisite = { focus = SOV_the_zinovyevite_terrorist_center }
		x = -1
		y = 1
		relative_position_id = SOV_the_zinovyevite_terrorist_center
		cost = 10

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			add_to_variable = { SOV_the_politburo_economy_cost_factor = -0.2 }
			add_to_variable = { SOV_the_politburo_trade_laws_cost_factor = -0.2 }
			add_to_variable = { SOV_the_politburo_mobilization_laws_cost_factor = -0.2 }
			custom_effect_tooltip = SOV_secure_the_administration_ns_tt

			add_political_power = 50

			SOV_paranoia_medium_decrease_effect = yes
		}
	}

	focus = {
		id = SOV_the_collectivization_process
		icon = GFX_focus_prc_agrarian_socialism
		prerequisite = { focus = SOV_socialism_in_one_country }
		prerequisite = { focus = SOV_secure_the_administration }
		x = 0
		y = 3
		relative_position_id = SOV_socialism_in_one_country
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			add_to_variable = { SOV_the_politburo_good_consumer_goods_factor = -0.02 }
			add_to_variable = { SOV_the_politburo_production_speed_buildings_factor = 0.05 } 
			add_to_variable = { SOV_the_politburo_global_building_slots_factor = 0.1 } 
			custom_effect_tooltip = SOV_the_collectivization_process_ns_tt

			add_stability = -0.05

			if = { #Target a rural state with no civs
				limit = {
					any_owned_state = {
						OR = {
							has_state_category = town #Developed Rural Region
							has_state_category = rural #Rural Region
						}
						is_fully_controlled_by = ROOT
						industrial_complex < 1
						arms_factory < 1
						dockyard < 1
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
				}
				random_owned_state = {
					limit = {
						OR = {
							has_state_category = town #Developed Rural Region
							has_state_category = rural #Rural Region
						}
						is_fully_controlled_by = ROOT
						industrial_complex < 1
						arms_factory < 1
						dockyard < 1
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}
			else_if = { #Failsafe 1: Target a random rural state
				limit = {
					any_owned_state = {
						OR = {
							has_state_category = town #Developed Rural Region
							has_state_category = rural #Rural Region
						}
						is_fully_controlled_by = ROOT
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
				}
				random_owned_state = {
					limit = {
						OR = {
							has_state_category = town #Developed Rural Region
							has_state_category = rural #Rural Region
						}
						is_fully_controlled_by = ROOT
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}
			else_if = { #Failsafe 2: Target a random state
				limit = {
					any_owned_state = {
						is_fully_controlled_by = ROOT
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
				}
				random_owned_state = {
					limit = {
						is_fully_controlled_by = ROOT
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}

			SOV_paranoia_medium_decrease_effect = yes
		}
	}

	focus = {
		id = SOV_the_anti_soviet_trotskyist_center
		icon = GFX_focus_SOV_purge_trotskyists
		prerequisite = { focus = SOV_the_zinovyevite_terrorist_center }
		x = 0
		y = 2
		relative_position_id = SOV_the_zinovyevite_terrorist_center
		cost = 5

		available = {
			has_country_flag = {
				flag = SOV_first_moscow_trial_flag
				days > 175
			}
			custom_trigger_tooltip = {
				tooltip = SOV_last_purge_focus_days_tt
				has_country_flag = {
					flag = SOV_first_moscow_trial_flag
					days > 175
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		select_effect = {
			set_country_flag = SOV_paranoia_do_not_cancel_focus_flag #This focus cannot be canceled
		}

		completion_reward = {
			clr_country_flag = SOV_paranoia_do_not_cancel_focus_flag
			set_country_flag = { flag = SOV_paranoia_random_purge_cooldown_from_focus_flag days = 15 } #Used to prevent random purges from popping up while this is active
			set_country_flag = SOV_second_moscow_trial_flag #Used to unlock the next purge focus

			add_political_power = 25

			SOV_paranoia_high_increase_effect = yes

			custom_effect_tooltip = SOV_will_trigger_a_great_purge_tt
			hidden_effect = {
				set_country_flag = SOV_purge_event_unavoidable_flag #No way to avoid this purge. This people are about to be purged and there's nothing you can do for them.
				SOV_trigger_great_purge_moscow_trial_effect = yes #SECOND MOSCOW TRIAL -> Left Opposition
			}
			custom_effect_tooltip = SOV_trigger_second_moscow_trial_tt

			hidden_effect = {
				swap_ruler_traits = {
					remove = stalin_political_paranoia
					add = stalin_political_paranoia_advanced
				}
				add_to_variable = { SOV_paranoia_weekly_modifiers_amount = 1 }
				SOV_paranoia_modifier_update_gui_tooltip = yes
			}		
			custom_effect_tooltip = SOV_increase_weekly_paranoia_in_trait_tt
		}
	}

	focus = {
		id = SOV_the_workers_dictatorship
		icon = GFX_focus_spr_masters_of_our_own_fate
		prerequisite = { focus = SOV_the_anti_soviet_trotskyist_center }
		x = 0
		y = 1
		relative_position_id = SOV_the_anti_soviet_trotskyist_center
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			add_to_variable = { SOV_the_politburo_political_power_factor = 0.05 }
			add_to_variable = { SOV_the_politburo_max_surrender_limit_offset = 0.05 }
			custom_effect_tooltip = SOV_the_workers_dictatorship_ns_tt

			add_political_power = 50

			SOV_paranoia_low_decrease_effect = yes
		}
	}

	focus = {
		id = SOV_organization_centralization_discipline
		icon = GFX_focus_SOV_organization_centralization_discipline
		prerequisite = { focus = SOV_the_collectivization_process }
		prerequisite = { focus = SOV_the_workers_dictatorship }
		x = -2
		y = 1
		relative_position_id = SOV_the_workers_dictatorship
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			add_to_variable = { SOV_the_politburo_max_command_power = 20 }
			add_to_variable = { SOV_the_politburo_mobilization_speed = 0.05 }
			custom_effect_tooltip = SOV_organization_centralization_discipline_ns_tt

			add_political_power = 50

			SOV_paranoia_medium_decrease_effect = yes
		}
	}

	focus = {
		id = SOV_war_economy
		icon = GFX_goal_generic_trade
		prerequisite = { focus = SOV_organization_centralization_discipline }
		x = 0
		y = 1
		relative_position_id = SOV_organization_centralization_discipline
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			if = {
				limit = {
					217 = {
						is_controlled_by = ROOT
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
				}
				217 = {
					add_extra_state_shared_building_slots = 5
					add_building_construction = {
						type = arms_factory
						level = 5
						instant_build = yes
					}
				}
			}
			else = {
				random_controlled_state = {
					limit = {
						arms_factory > 1
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_the_military_conspiracy
		icon = GFX_focus_SOV_military_purge
		prerequisite = { focus = SOV_the_workers_dictatorship }
		x = 0
		y = 2
		relative_position_id = SOV_the_anti_soviet_trotskyist_center
		cost = 5

		available = {
			has_country_flag = {
				flag = SOV_second_moscow_trial_flag
				days > 175
			}
			custom_trigger_tooltip = {
				tooltip = SOV_last_purge_focus_days_military_tt
				has_country_flag = {
					flag = SOV_second_moscow_trial_flag
					days > 175
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		select_effect = {
			set_country_flag = SOV_paranoia_do_not_cancel_focus_flag #This focus cannot be canceled
		}

		completion_reward = {
			clr_country_flag = SOV_paranoia_do_not_cancel_focus_flag
			set_country_flag = { flag = SOV_paranoia_random_purge_cooldown_from_focus_flag days = 15 } #Used to prevent random purges from popping up while this is active
			set_country_flag = SOV_trial_of_the_generals_flag #Used to unlock the next purge focus

			add_political_power = 25

			SOV_paranoia_high_increase_effect = yes

			#Historical
			if = {
				limit = {
					has_character = SOV_mikhail_tukhachevsky
				}
				SOV_mikhail_tukhachevsky = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#NOT-SO-HISTORICAL
			#Yegorov
			if = {
				limit = {
					has_character = SOV_aleksandr_yegorov
				}
				SOV_aleksandr_yegorov = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Blyukher
			if = {
				limit = {
					has_character = SOV_vasily_blyukher
				}
				SOV_vasily_blyukher = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Primakov
			if = {
				limit = {
					has_character = SOV_vitaly_primakov
				}
				SOV_vitaly_primakov = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}			

			custom_effect_tooltip = SOV_will_trigger_a_great_purge_tt
			hidden_effect = {
				set_country_flag = SOV_purge_event_unavoidable_flag #No way to avoid this purge. This people are about to be purged and there's nothing you can do for them.
				SOV_great_purge_army_trial_of_the_generals_effect = yes #TRIAL OF THE GENERALS -> Tukhachevsky
			}

			set_country_flag = SOV_stalinist_military_flag #New Generals have more chances of being Stalinists after this
		}
	}

	focus = {
		id = SOV_the_bloc_of_rights_and_trotskyites
		icon = GFX_focus_SOV_purge_bukharinists
		prerequisite = { focus = SOV_the_military_conspiracy }
		x = 0
		y = 1
		relative_position_id = SOV_the_military_conspiracy
		cost = 5

		available = {
			has_country_flag = {
				flag = SOV_trial_of_the_generals_flag
				days > 175
			}
			custom_trigger_tooltip = {
				tooltip = SOV_last_purge_focus_days_rights_tt
				has_country_flag = {
					flag = SOV_trial_of_the_generals_flag
					days > 175
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		select_effect = {
			set_country_flag = SOV_paranoia_do_not_cancel_focus_flag #This focus cannot be canceled
		}

		completion_reward = {
			clr_country_flag = SOV_paranoia_do_not_cancel_focus_flag
			set_country_flag = { flag = SOV_paranoia_random_purge_cooldown_from_focus_flag days = 15 } #Used to prevent random purges from popping up while this is active
			set_country_flag = SOV_third_moscow_trial_flag #Used to unlock the next purge focus

			add_political_power = 25

			#HISTORICAL

			custom_effect_tooltip = SOV_will_trigger_a_great_purge_tt
			hidden_effect = {
				set_country_flag = SOV_purge_event_unavoidable_flag #No way to avoid this purge. This people are about to be purged and there's nothing you can do for them.
				SOV_trigger_great_purge_moscow_trial_effect = yes #THIRD MOSCOW TRIAL -> Right Opposition
			}
			custom_effect_tooltip = SOV_trigger_third_moscow_trial_tt

			SOV_remove_paranoia_effect = yes #REMOVE PARANOIA SYSTEM
		}
	}

	focus = {
		id = SOV_behead_the_snake
		icon = GFX_focus_SOV_behead_the_snake
		prerequisite = { focus = SOV_the_military_conspiracy }
		x = 2
		y = 1
		relative_position_id = SOV_the_military_conspiracy
		cost = 5

		available = {
			has_government = communism
		}
		
		search_filters = {FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"
				}

				#Extra operative slot
				set_variable = { SOV_the_politburo_operative_slot = 1 }
				custom_effect_tooltip = SOV_behead_the_snake_ns_tt
			}
			else = {
				custom_effect_tooltip = SOV_behead_the_snake_no_lar_tt
			}
			custom_effect_tooltip = SOV_behead_the_snake_JFU_tt
			hidden_effect = {
				ROOT = { news_event = { id = news.37 days = 100 } }
			}
			SOV_paranoia_high_decrease_effect = yes
		}
	}

	focus = {
		id = SOV_stalins_cult_of_personality
		icon = GFX_focus_SOV_stalins_cult_of_personality
		prerequisite = { focus = SOV_the_bloc_of_rights_and_trotskyites }
		x = 0
		y = 1
		relative_position_id = SOV_the_bloc_of_rights_and_trotskyites
		cost = 5

		available = {
			has_country_flag = {
				flag = SOV_third_moscow_trial_flag
				days > 175
			}
			custom_trigger_tooltip = {
				tooltip = SOV_last_purge_focus_days_cult_tt
				has_country_flag = {
					flag = SOV_third_moscow_trial_flag
					days > 175
				}
			}
			has_completed_focus = SOV_expand_the_agitprop
			has_country_leader = {
				character = SOV_iosif_stalin
				ruling_only = yes
			}
		}
		
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_political_power = 25

			custom_effect_tooltip = unlock_propaganda_campaign_tt
			unlock_decision_tooltip = SOV_propaganda_stalin
			custom_effect_tooltip = propaganda_campaign_requirement_tt
		}
	}

	focus = {
		id = SOV_they_will_know_fear
		icon = GFX_focus_generic_army_tanks2
		prerequisite = { focus = SOV_stalins_cult_of_personality }
		x = -3
		y = 1
		relative_position_id = SOV_stalins_cult_of_personality
		cost = 5

		available = {
			has_defensive_war = yes
			has_tech = advanced_heavy_tank_chassis
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_they_will_know_fear
				bonus = 1
				uses = 2
				category = armor
			}

			# IS-2 tank template
			if = {
				limit = {
					OR = {
						has_tech = antiair2
						has_tech = antitank2
					}
				}
				create_equipment_variant = {
					name = "IS-2"
					type = heavy_tank_chassis_3
					parent_version = 0
					modules = {
						main_armament_slot = tank_heavy_cannon_2
						turret_type_slot = tank_heavy_three_man_tank_turret
						suspension_type_slot = tank_torsion_bar_suspension
						armor_type_slot = tank_welded_armor
						engine_type_slot = tank_diesel_engine
						special_type_slot_1 = tank_radio_1
						special_type_slot_2 = sloped_armor
						special_type_slot_3 = smoke_launchers
					}
					upgrades = {
						tank_nsb_engine_upgrade = 8
						tank_nsb_armor_upgrade = 6
					}
					icon = "gfx/interface/technologies/SOV_adv_heavy_tank.dds"
				}
			}
			else_if = {
				limit = {
					OR = {
						has_tech = interwar_antiair
						has_tech = interwar_antitank
					}
				}
				create_equipment_variant = {
					name = "IS-2"
					type = heavy_tank_chassis_3
					parent_version = 0
					modules = {
						main_armament_slot = tank_heavy_cannon
						turret_type_slot = tank_heavy_three_man_tank_turret
						suspension_type_slot = tank_torsion_bar_suspension
						armor_type_slot = tank_welded_armor
						engine_type_slot = tank_diesel_engine
						special_type_slot_1 = tank_radio_1
						special_type_slot_2 = sloped_armor
						special_type_slot_3 = smoke_launchers
					}
					upgrades = {
						tank_nsb_engine_upgrade = 8
						tank_nsb_armor_upgrade = 6
					}
					icon = "gfx/interface/technologies/SOV_adv_heavy_tank.dds"
				}
			}
		}
	}

	focus = {
		id = SOV_inheritor_of_the_mantle_of_lenin
		icon = GFX_focus_generic_support_the_left_right
		prerequisite = { focus = SOV_stalins_cult_of_personality }
		x = -1
		y = 1
		relative_position_id = SOV_stalins_cult_of_personality
		cost = 5

		mutually_exclusive = { focus = SOV_the_faithful_servant_of_lenin }

		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_5_or_greater_tt
				check_variable = { SOV_propaganda_campaigns_taken = 5 compare = greater_than_or_equals }
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT}

		completion_reward = {
			add_war_support = 0.05
			add_country_leader_trait = stalin_inheritor_of_lenin
		}
	}

	focus = {
		id = SOV_brilliant_genius
		icon = GFX_focus_generic_socialist_science
		prerequisite = { focus = SOV_inheritor_of_the_mantle_of_lenin }
		x = -1
		y = 1
		relative_position_id = SOV_inheritor_of_the_mantle_of_lenin
		cost = 10
		
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_10_or_greater_tt
				check_variable = { SOV_propaganda_campaigns_taken = 10 compare = greater_than_or_equals }
			}
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			#Academies of Sciences decisions are 50% cheaper
			divide_variable = { SOV_national_academy_of_sciences_construction_cost = 2 }
			custom_effect_tooltip = SOV_brilliant_genius_academies_of_sciences_tt

			if = {
				limit = {
					has_completed_focus = SOV_leader_of_the_party_and_the_people
				}
				swap_ruler_traits = {
					remove = stalin_inheritor_of_lenin_leader
					add = stalin_inheritor_of_lenin_final
				}
			}
			else = {
				swap_ruler_traits = {
					remove = stalin_inheritor_of_lenin
					add = stalin_inheritor_of_lenin_genius
				}
			}
		}
	}

	focus = {
		id = SOV_the_faithful_servant_of_lenin
		icon = GFX_goal_generic_neutrality_focus
		prerequisite = { focus = SOV_stalins_cult_of_personality }
		x = 1
		y = 1
		relative_position_id = SOV_stalins_cult_of_personality
		cost = 5

		mutually_exclusive = { focus = SOV_inheritor_of_the_mantle_of_lenin }

		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_5_or_greater_tt
				check_variable = { SOV_propaganda_campaigns_taken = 5 compare = greater_than_or_equals }
			}
		}
		
		search_filters = {FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_stability = 0.1
			add_country_leader_trait = stalin_servant_of_lenin
		}
	}

	focus = {
		id = SOV_ban_excessive_hero_worship
		icon = GFX_focus_renounce_the_treaty_of_trianon
		prerequisite = { focus = SOV_the_faithful_servant_of_lenin }
		x = 1
		y = 1
		relative_position_id = SOV_the_faithful_servant_of_lenin
		cost = 10

		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_10_or_greater_tt
				check_variable = { SOV_propaganda_campaigns_taken = 10 compare = greater_than_or_equals }
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY}

		completion_reward = {
			custom_effect_tooltip = SOV_ban_excessive_hero_worship_dec_cost_tt
			SOV_foreign_politics_decision_cost_reduction_effect = yes

			if = {
				limit = {
					has_completed_focus = SOV_leader_of_the_party_and_the_people
				}
				swap_ruler_traits = {
					remove = stalin_servant_of_lenin_leader
					add = stalin_servant_of_lenin_final
				}
			}
			else = {
				swap_ruler_traits = {
					remove = stalin_servant_of_lenin
					add = stalin_servant_of_lenin_worship
				}
			}
		}
	}

	focus = {
		id = SOV_leader_of_the_party_and_the_people
		icon = GFX_focus_YUG_pan_slavic_congress
		prerequisite = { focus = SOV_inheritor_of_the_mantle_of_lenin focus = SOV_the_faithful_servant_of_lenin }
		x = 1
		y = 1
		relative_position_id = SOV_inheritor_of_the_mantle_of_lenin
		cost = 5
		
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_10_or_greater_tt
				check_variable = { SOV_propaganda_campaigns_taken = 10 compare = greater_than_or_equals }
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_political_power = 50

			#Swap Stalin's Trait
			if = { #INHERITOR BRANCH
				limit = {
					has_completed_focus = SOV_inheritor_of_the_mantle_of_lenin
				}
				if = {
					limit = {
						has_completed_focus = SOV_brilliant_genius
					}
					swap_ruler_traits = {
						remove = stalin_inheritor_of_lenin_genius
						add = stalin_inheritor_of_lenin_final
					}
				}
				else = {
					swap_ruler_traits = {
						remove = stalin_inheritor_of_lenin
						add = stalin_inheritor_of_lenin_leader
					}
				}
			}
			else_if = { #SERVANT BRANCH
				limit = {
					has_completed_focus = SOV_the_faithful_servant_of_lenin
				}
				if = {
					limit = {
						has_completed_focus = SOV_ban_excessive_hero_worship
					}
					swap_ruler_traits = {
						remove = stalin_servant_of_lenin_worship
						add = stalin_servant_of_lenin_final
					}
				}
				else = {
					swap_ruler_traits = {
						remove = stalin_servant_of_lenin
						add = stalin_servant_of_lenin_leader
					}
				}
			}
			else = {
				custom_effect_tooltip = SOV_leader_of_the_party_and_the_people_trait_tt
			}
		}
	}

	focus = {
		id = SOV_great_commander
		icon = GFX_focus_generic_military_dictatorship
		prerequisite = { focus = SOV_inheritor_of_the_mantle_of_lenin }
		prerequisite = { focus = SOV_leader_of_the_party_and_the_people }
		x = -1
		y = 1
		relative_position_id = SOV_leader_of_the_party_and_the_people
		cost = 5

		mutually_exclusive = { focus = SOV_architect_of_communism }
		
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_15_or_greater_tt
				check_variable = { SOV_propaganda_campaigns_taken = 15 compare = greater_than_or_equals }
			}
		}
		
		search_filters = {FOCUS_FILTER_WAR_SUPPORT}

		completion_reward = {
			add_country_leader_trait = stalin_great_commander
			add_field_marshal_role = {
				character = "SOV_iosif_stalin"
				traits={ old_guard politically_connected media_personality harsh_leader }
				skill=3
				attack_skill=1
				defense_skill=3
				planning_skill=3
				logistics_skill=3
				legacy_id=0
			}
		}
	}

	focus = {
		id = SOV_architect_of_communism
		icon = GFX_goal_generic_soviet_construction
		prerequisite = { focus = SOV_the_faithful_servant_of_lenin }
		prerequisite = { focus = SOV_leader_of_the_party_and_the_people }
		x = 1
		y = 1
		relative_position_id = SOV_leader_of_the_party_and_the_people
		cost = 5

		mutually_exclusive = { focus = SOV_great_commander }

		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_15_or_greater_tt
				check_variable = { SOV_propaganda_campaigns_taken = 15 compare = greater_than_or_equals }
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL}

		completion_reward = {
			add_country_leader_trait = stalin_architect_of_communism
		}
	}

	focus = {
		id = SOV_father_of_nations
		icon = GFX_focus_SOV_father_of_nations
		prerequisite = { focus = SOV_great_commander focus = SOV_architect_of_communism }
		x = 1
		y = 1
		relative_position_id = SOV_great_commander
		cost = 10

		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_20_or_greater_tt
				check_variable = { SOV_propaganda_campaigns_taken = 20 compare = greater_than_or_equals }
			}
		}
		
		search_filters = {FOCUS_FILTER_MANPOWER FOCUS_FILTER_STABILITY}

		completion_reward = {
			swap_ruler_traits = {
				remove = stalin_heart_of_steel
				add = stalin_father_of_nations
			}
			hidden_effect = {
				play_song = "comintern_war_1" #TODO_Manu: Too abrupt (just like speeches) -> Pending feedback for removal
			}
		}
	}

	focus = {
		id = SOV_freedom_of_debate_unity_of_action
		icon = GFX_focus_generic_soviet_politics
		prerequisite = { focus = SOV_stalins_cult_of_personality }
		x = 3
		y = 1
		relative_position_id = SOV_stalins_cult_of_personality
		cost = 10

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_to_variable = { SOV_the_politburo_political_power_factor = 0.05 }
			add_to_variable = { SOV_the_politburo_political_advisor_cost_factor = -0.15 }
			custom_effect_tooltip = SOV_freedom_of_debate_unity_of_action_ns_tt

			add_political_power = 50
			add_stability = 0.05
			add_war_support = 0.05
		}
	}
#### ##    ## ######## ######## ########  ##    ##    ###    ##             ###    ######## ########    ###    #### ########   ######  
 ##  ###   ##    ##    ##       ##     ## ###   ##   ## ##   ##            ## ##   ##       ##         ## ##    ##  ##     ## ##    ## 
 ##  ####  ##    ##    ##       ##     ## ####  ##  ##   ##  ##           ##   ##  ##       ##        ##   ##   ##  ##     ## ##       
 ##  ## ## ##    ##    ######   ########  ## ## ## ##     ## ##          ##     ## ######   ######   ##     ##  ##  ########   ######  
 ##  ##  ####    ##    ##       ##   ##   ##  #### ######### ##          ######### ##       ##       #########  ##  ##   ##         ## 
 ##  ##   ###    ##    ##       ##    ##  ##   ### ##     ## ##          ##     ## ##       ##       ##     ##  ##  ##    ##  ##    ## 
#### ##    ##    ##    ######## ##     ## ##    ## ##     ## ########    ##     ## ##       ##       ##     ## #### ##     ##  ######  
	


	focus = {
		id = SOV_addressing_internal_affairs
		icon = GFX_focus_generic_self_management
		prerequisite = { focus = SOV_the_path_of_marxism_leninism }
		x = 1
		y = 1

		relative_position_id = SOV_the_path_of_marxism_leninism
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_political_power = 50
			add_stability = 0.1
		}
	}

	focus = {
		id = SOV_nkvd_primacy
		icon = GFX_goal_nkvd_symbol_captainluck
		prerequisite = { focus = SOV_addressing_internal_affairs }
		x = -2
		y = 1
		relative_position_id = SOV_addressing_internal_affairs
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			add_ideas = SOV_nkvd_nsb
			SOV_paranoia_medium_increase_effect = yes
		}
	}

	focus = {
		id = SOV_the_new_soviet_woman
		icon = GFX_goal_support_communism
		prerequisite = { focus = SOV_addressing_internal_affairs }
		x = 2
		y = 1
		relative_position_id = SOV_addressing_internal_affairs
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_political_power = 70
			add_stability = 0.1
			add_popularity = {
				ideology = communism
				popularity = 0.1
			}
		}
	}

	focus = {
		id = SOV_expand_the_agitprop
		icon = GFX_focus_generic_soviet_politics
		prerequisite = { focus = SOV_addressing_internal_affairs }
		x = 0
		y = 1
		relative_position_id = SOV_addressing_internal_affairs
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_political_power = 25
			add_popularity = {
				ideology = communism
				popularity = 0.1
			}

			hidden_effect = {
				SOV_unlock_propaganda_campaign_slot_effect = yes
			}
			unlock_decision_category_tooltip = SOV_propaganda_campaigns
		}
	}

	focus = {
		id = SOV_positive_heroism
		icon = GFX_FOCUS_SOV_POSTIVE_HEROISM
		prerequisite = { focus = SOV_expand_the_agitprop }
		x = -2
		y = 1
		relative_position_id = SOV_expand_the_agitprop
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_political_power = 25
			custom_effect_tooltip = available_military_high_command
			show_ideas_tooltip = konstantin_rokossovsky 
			show_ideas_tooltip = leonid_govorov
			show_ideas_tooltip = nikolay_vatutin

			custom_effect_tooltip = unlock_propaganda_campaign_tt
			unlock_decision_tooltip = SOV_propaganda_heroes_forward
			custom_effect_tooltip = unlock_propaganda_campaign_slot_tt
			SOV_unlock_propaganda_campaign_slot_effect = yes
		}
	}

	focus = {
		id = SOV_revive_the_stakhanovite_movement
		icon = GFX_FOCUS_SOV_WORKER_CLUTURE
		prerequisite = { focus = SOV_positive_heroism }
		x = 0
		y = 1
		relative_position_id = SOV_positive_heroism
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_ideas = SOV_stakhanovite_movement
		}
	}

	focus = {
		id = SOV_war_heroes
		icon = GFX_goal_generic_war_with_comintern
		prerequisite = { focus = SOV_revive_the_stakhanovite_movement }
		x = 0
		y = 1
		relative_position_id = SOV_revive_the_stakhanovite_movement
		cost = 5

		available = {

		}
		
		search_filters = {}

		completion_reward = {
			add_ideas = SOV_war_heroes_ns
		}
	}

	focus = {
		id = SOV_collectivist_propaganda
		icon = GFX_goal_generic_propaganda
		prerequisite = { focus = SOV_expand_the_agitprop }
		x = 0
		y = 1
		relative_position_id = SOV_expand_the_agitprop
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_MANPOWER FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_political_power = 25
			add_ideas = SOV_collectivist_propaganda_ns

			custom_effect_tooltip = unlock_propaganda_campaign_tt
			unlock_decision_tooltip = SOV_propaganda_for_the_motherland
			custom_effect_tooltip = unlock_propaganda_campaign_slot_tt
			SOV_unlock_propaganda_campaign_slot_effect = yes
		}
	}

	focus = {
		id = SOV_socialist_emulation
		icon = GFX_goal_generic_soviet_construction
		prerequisite = { focus = SOV_collectivist_propaganda }
		x = 0
		y = 1
		relative_position_id = SOV_collectivist_propaganda
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_ideas = SOV_socialist_emulation_1_ns
		}
	}

	focus = {
		id = SOV_socialist_realism
		icon = GFX_FOCUS_SOV_SOCIALIST_REALISM
		prerequisite = { focus = SOV_socialist_emulation }
		x = 0
		y = 1
		relative_position_id = SOV_socialist_emulation
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_POLITICAL}

		completion_reward = {
			swap_ideas = {
				remove_idea = SOV_socialist_emulation_1_ns
				add_idea = SOV_socialist_emulation_2_ns
			}
		}
	}

	focus = {
		id = SOV_the_komsomol
		icon = GFX_goal_komsomol_sheep
		prerequisite = { focus = SOV_expand_the_agitprop }
		x = 2
		y = 1
		relative_position_id = SOV_expand_the_agitprop
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_political_power = 50
			add_popularity = {
				ideology = communism
				popularity = 0.1
			}

			custom_effect_tooltip = unlock_propaganda_campaign_tt
			unlock_decision_tooltip = SOV_propaganda_knowledge
			
			custom_effect_tooltip = unlock_propaganda_campaign_slot_tt
			SOV_unlock_propaganda_campaign_slot_effect = yes
		}
	}

	focus = {
		id = SOV_patriarch_of_all_russia
		icon = GFX_focus_SOV_patriarch_of_all_russia
		prerequisite = { focus = SOV_war_heroes focus = SOV_socialist_realism }
		x = 1
		y = 1
		relative_position_id = SOV_war_heroes
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_STABILITY}

		completion_reward = {
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = SOV_patriarch_sergy
		}
	}



########  #######  ########  ######## ####  ######   ##    ##     ######   #######  ##     ## ##     ## #### ######## 
##       ##     ## ##     ## ##        ##  ##    ##  ###   ##    ##    ## ##     ## ###   ### ###   ###  ##  ##       
##       ##     ## ##     ## ##        ##  ##        ####  ##    ##       ##     ## #### #### #### ####  ##  ##       
######   ##     ## ########  ######    ##  ##   #### ## ## ##    ##       ##     ## ## ### ## ## ### ##  ##  ######   
##       ##     ## ##   ##   ##        ##  ##    ##  ##  ####    ##       ##     ## ##     ## ##     ##  ##  ##       
##       ##     ## ##    ##  ##        ##  ##    ##  ##   ###    ##    ## ##     ## ##     ## ##     ##  ##  ##       
##        #######  ##     ## ######## ####  ######   ##    ##     ######   #######  ##     ## ##     ## #### ######## 



	focus = {
		id = SOV_the_comintern
		icon = GFX_goal_the_comintern_captainluck
		prerequisite = { focus = SOV_the_path_of_marxism_leninism }
		x = 6
		y = 0
		relative_position_id = SOV_addressing_internal_affairs
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL}

		completion_reward = {
			add_political_power = 50
			add_popularity = {
				ideology = communism
				popularity = 0.05
			}
		}
	}

	focus = {
		id = SOV_send_military_advisors_to_spain
		icon = GFX_focus_intervention_spain_republic
		prerequisite = { focus = SOV_the_comintern }
		x = -2
		y = 1
		relative_position_id = SOV_the_comintern
		cost = 5


		

		
		search_filters = {}

		completion_reward = {
			add_timed_idea = { idea = SOV_military_advisors_in_spain days = 1095 }
		}
	}
########  #######  ########  ######## ####  ######   ##    ##    ########   #######  ##       #### ######## ####  ######   ######  
##       ##     ## ##     ## ##        ##  ##    ##  ###   ##    ##     ## ##     ## ##        ##     ##     ##  ##    ## ##    ## 
##       ##     ## ##     ## ##        ##  ##        ####  ##    ##     ## ##     ## ##        ##     ##     ##  ##       ##       
######   ##     ## ########  ######    ##  ##   #### ## ## ##    ########  ##     ## ##        ##     ##     ##  ##        ######  
##       ##     ## ##   ##   ##        ##  ##    ##  ##  ####    ##        ##     ## ##        ##     ##     ##  ##             ## 
##       ##     ## ##    ##  ##        ##  ##    ##  ##   ###    ##        ##     ## ##        ##     ##     ##  ##    ## ##    ## 
##        #######  ##     ## ######## ####  ######   ##    ##    ##         #######  ######## ####    ##    ####  ######   ######  


	focus = {
		id = SOV_claims_in_baltic
		icon = GFX_goal_baltic_security_trun
		prerequisite = { focus = SOV_the_comintern }
		x = 0
		y = 1
		relative_position_id = SOV_the_comintern
		cost = 5

		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			is_subject = no
			date > 1938.1.1
		}

		bypass = {
		}
		
		search_filters = {FOCUS_FILTER_ANNEXATION}

		completion_reward = {
			custom_effect_tooltip = SOV_claims_in_balitc2.tt
			add_political_power = -75
			add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 10000 }
			add_named_threat = { threat = 1 name = SOV_claims_in_baltic }
			hidden_effect = {
				news_event = { id = news.199 days = 1}
				annex_country = { target = LIT  }
			}
		}
	}
	focus = {
		id = SOV_Winter_War
		icon = GFX_focus_generic_attack_finland
		prerequisite = { focus = SOV_the_comintern }
		x = 2
		y = 1
		relative_position_id = SOV_the_comintern
		cost = 3

		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			date > 1939.6.1
			date < 1940.6.1
			GER = { has_completed_focus = GER_mol_rib_pact } 	
		}

		bypass = {
		}
		
		search_filters = {FOCUS_FILTER_ANNEXATION}

		completion_reward = {
			custom_effect_tooltip = SOV_claims_in_finnland.tt
			 declare_war_on = {
                	target = FIN
                    type = annex_everything
            }
			custom_effect_tooltip = SOV_claims_in_finnland2.tt
			
		}
	}
	focus = {
		id = SOV_Bessarabia
		icon = GFX_focus_generic_attack_romania
		prerequisite = { focus = SOV_claims_in_baltic }
		available = { 
			GER = { has_completed_focus = GER_mol_rib_pact } 	
			date < 1941.1.1
		}
		x = 0
		y = 1
		relative_position_id = SOV_claims_in_baltic
		cost = 1

		completion_reward = {
			custom_effect_tooltip = SOV_Bessarabia2.tt
			SOV = { transfer_state = 78 }
				SOV = { transfer_state = 766 }
				SOV = { transfer_state = 80 }
			hidden_effect = { 

				78 = {
					remove_dynamic_modifier = { modifier = ROM_no_building_slots }
				}
				80 = {
					remove_dynamic_modifier = { modifier = ROM_no_building_slots }
				}
				766 = {
					remove_dynamic_modifier = { modifier = ROM_no_building_slots }
				}				
				news_event = {id = news.199 days = 1 }
			}
		}
	}

		focus = {
		id = SOV_Great_War
		icon = GFX_focus_SOV_the_glory_of_the_red_army_communism
		cost = 5
		x = 20
		y = 6

		available = {
			
			OR = {
				has_war_with = GER
				has_war_with = ITA
				has_war_with = JAP
			}
		
		}
		completion_reward = {
			add_ideas = tot_economic_mobilisation
		}
	}

	focus = {
		id = SOV_Mec_IC_Bonus
		icon = GFX_GOAL_SOVIET_KATYUSHA
		cost = 5
		x = -1
		y = 1
		prerequisite = {
			focus = SOV_Great_War
		}
		relative_position_id = SOV_Great_War

		completion_reward = {
			add_timed_idea = {
				idea = SOV_Mec_IC_Reduction # need to add Idea (10 - 15% IC)
				days = 365
			}
	}

}

focus = {
	id = SOV_Tank_IC_Bonus
	icon = GFX_focus_generic_tank_production
	cost = 5
	x = 1
	y = 1
	prerequisite = {
		focus = SOV_Great_War
	}
	relative_position_id = SOV_Great_War

	completion_reward = {
		add_timed_idea = {
			idea = SOV_Tank_IC_Reduction # need to add Idea (10 - 15% IC)
			days = 365
		}
}

}

focus = {
	id = SOV_american_assistance
	icon = GFX_focus_chi_mission_to_the_us 
	cost = 10
	x = 0
	y = 1
	prerequisite = {
		focus = SOV_Tank_IC_Bonus
		focus = SOV_Mec_IC_Bonus
	}
	mutually_exclusive = {
		focus = SOV_persian_corridor_nfu
	}
	relative_position_id = SOV_Tank_IC_Bonus
	available = {
		surrender_progress > 0.15
	}
	completion_reward = {
		SOV_eco_modifier_tt = yes # tooltip
		add_to_variable = { SOV_soviet_economy_production_factory_max_efficiency_factor = 0.05 tooltip = production_factory_max_efficiency_factor_tt }
		add_to_variable = { SOV_soviet_economy_production_factory_efficiency_gain_factor = 0.1 tooltip = production_factory_efficiency_gain_factor_tt }
	}
}

focus = {
	id = SOV_persian_corridor_nfu
	icon = GFX_goal_generic_construct_mil_factory
	prerequisite = { focus = SOV_Mec_IC_Bonus focus = SOV_Tank_IC_Bonus }
	x = 0
	y = 1
	mutually_exclusive = {
		focus = SOV_american_assistance
	
	}
	relative_position_id = SOV_Mec_IC_Bonus
	cost = 5
	
	available = { }
	
	completion_reward = {
		every_controlled_state = {
			limit = {
				is_core_of = PER
			}
			add_compliance = 100
		}
		# FROM IRAN FOCUS #
		229 = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
		}
		230 = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
		}
		# FROM IRAN FOCUS END
		229 = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = infrastructure
				level = 2
				instant_build = yes
			}
		}
		230 = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = infrastructure
				level = 2
				instant_build = yes
			}
		}
	}
}

focus = {
	id = SOV_american_tool_deliveries_nfu
	icon = GFX_GENERIC_FACTORY_COMPLEX
	prerequisite = { focus = SOV_persian_corridor_nfu focus = SOV_american_assistance }
	x = 1
	y = 1
	relative_position_id = SOV_persian_corridor_nfu
	cost = 5

	completion_reward = {
		# FROM IRAN FOCUS #
		586 = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
		}

		405 = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
		}
		# FROM IRAN FOCUS END #
		586 = {
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = arms_factory
				level = 3
				instant_build = yes
			}
			add_building_construction = {
				type = infrastructure
				level = 2
				instant_build = yes
			}
		}
		405 = {
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = arms_factory
				level = 3
				instant_build = yes
			}
			add_building_construction = {
				type = infrastructure
				level = 2
				instant_build = yes
			}
		}
	}
}

focus = {
	id = SOV_allied_lend_lease_nfu
	icon = GFX_focus_renounce_the_treaty_of_trianon
	prerequisite = { focus = SOV_american_tool_deliveries_nfu }
	relative_position_id = SOV_american_tool_deliveries_nfu
	mutually_exclusive = {
		focus = SOV_coordinate_industry_nfu
	}
	x = -2
	y = 1
	cost = 5

	available = {
		# surrender_progress > 0.4
		if = {
			limit = {
				has_completed_focus = SOV_secure_new_conquests
			}
			surrender_progress > 0.25
		}
		else_if = {
			limit = {
				has_completed_focus = SOV_improve_stalin_line
			}
			surrender_progress > 0.25
		}
		else = {
			surrender_progress > 0.25
		}
	}

	cancel_if_invalid = no
	continue_if_invalid = yes
	available_if_capitulated = no

	ai_will_do = {
		factor = 5
	}

	available_if_capitulated = yes

	completion_reward = {
		add_equipment_to_stockpile = {
			type = mechanized_equipment
			amount = 5000
			producer = USA
		}
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 20000
			producer = USA
		}
		add_equipment_to_stockpile = {
			type = motorized_equipment
			amount = 5000
			producer = USA
		}
		add_equipment_to_stockpile = {
			type = support_equipment
			amount = 3000
			producer = USA
		}
		add_equipment_to_stockpile = {
			type = anti_tank_equipment
			amount = 3000
			producer = USA
		}
		add_equipment_to_stockpile = {
			type = artillery_equipment
			amount = 3000
			producer = USA
		}
		add_equipment_to_stockpile = {
			type = anti_air_equipment
			amount = 3000
			producer = ENG
		}
		add_equipment_to_stockpile = {
			type = train_equipment
			amount = 200
			producer = USA
		}
	}
}

focus = {
	id = SOV_coordinate_industry_nfu
	icon = GFX_focus_generic_steel
	prerequisite = { focus = SOV_american_tool_deliveries_nfu }
	mutually_exclusive = {
		focus = SOV_allied_lend_lease_nfu
	}
	x = 2
	y = 1
	relative_position_id = SOV_american_tool_deliveries_nfu
	cost = 5
	
	cancel_if_invalid = no
	continue_if_invalid = yes
	available_if_capitulated = no

	available = {

	}

	completion_reward = {
		# add_timed_idea = { idea = SOV_coordinate_industry_idea days = 270 }
		# add_ideas = SOV_coordinate_industry_idea
		SOV_eco_modifier_tt = yes # tooltip
		add_to_variable = { SOV_soviet_economy_equipment_line_change_production_efficiency_factor = 0.1 tooltip = line_change_production_efficiency_factor_tt }
		add_to_variable = { SOV_soviet_economy_production_speed_buildings_factor = 0.05 tooltip = production_speed_buildings_factor_tt }
		add_to_variable = { SOV_soviet_economy_production_factory_efficiency_gain_factor = 0.05 tooltip = production_factory_efficiency_gain_factor_tt }
		add_to_variable = { SOV_soviet_economy_industrial_capacity_factory = 0.05 tooltip = industrial_capacity_factory_tt }
		add_offsite_building = { type = industrial_complex level = 8 }
		add_offsite_building = { type = arms_factory level = 8 }
	}
}

focus = {
	id = SOV_last_stand_of_communism_nfu
	icon = GFX_FOCUS_SOV_DEFENSE_OF_MOSCOW
	prerequisite = { focus = SOV_allied_lend_lease_nfu focus = SOV_coordinate_industry_nfu }
	x = 2
	y = 1
	relative_position_id = SOV_allied_lend_lease_nfu
	cost = 1
	
	cancel_if_invalid = no
	continue_if_invalid = yes
	available_if_capitulated = no

	available = {
		surrender_progress > 0.75
	}

	completion_reward = {
		add_timed_idea = {
			idea = SOV_Last_Stand
			days = 150
		}
		hidden_effect = {
			every_army_leader={
				add_trait = {
					trait = twenty_terrain_penalty_reduction
				}
			}
		}
		hidden_effect = {
			every_army_leader={
				add_trait = {
					trait = fifty_cas_dmg_reduction
				}
			}
		}
	}
}


}



###  ###  ##  ###  ##  #  #  ##  #    	   ## ### #  # ### ###         
#  # #   #     #  #  # ## # #  # #    	  #    #  #  # #   #   {~._.~} 
###  ##  # ##  #  #  # # ## #### #    	   #   #  #  # ##  ##   ( Y )  
#  # #   #  #  #  #  # #  # #  # #    	    #  #  #  # #   #   ()~*~() 
#  # ###  ##  ###  ##  #  # #  # ###  	  ##   #   ##  #   #   (_)-(_) 
#	focus = {
#		id = SOV_consolidate_power
#		icon = GFX_goal_generic_dangerous_deal
#		x = 15
#		y = 0
#		relative_position_id = SOV_article_124
#		cost = 10
#		ai_will_do = {
#			factor = 1
#		}
#
#		available_if_capitulated = yes
#		
#		completion_reward = {
#			add_political_power = 90
#		}
#	}
#
#	focus = {
#		id = SOV_consolidate_the_caucasus
#		icon = GFX_goal_generic_dangerous_deal
#		prerequisite = { focus = SOV_consolidate_power }
#		x = -5
#		y = 1
#		relative_position_id = SOV_consolidate_power
#		cost = 10
#		ai_will_do = {
#			factor = 1
#		}
#
#		available_if_capitulated = yes
#		
#
#		completion_reward = {
#			
#			random_owned_controlled_state = {
#				limit = {
#					OR = {
#						state = 229
#						state = 230
#						state = 231
#						state = 232
#						state = 233
#					}
#					#229 230 231 232 233
#					free_building_slots = {
#						building = infrastructure
#						size > 0
#					}
#				}
#				add_building_construction = {
#					type = infrastructure
#					level = 1
#					instant_build = yes
#				}
#			}
#		
#			random_owned_controlled_state = {
#				limit = {
#					OR = {
#						state = 229
#						state = 230
#						state = 231
#						state = 232
#						state = 233
#					}
#
#					free_building_slots = {
#						building = infrastructure
#						size > 1
#					}
#				}
#				add_building_construction = {
#					type = infrastructure
#					level = 2
#					instant_build = yes
#				}
#			}
#				
#			random_owned_controlled_state = {
#				limit = {
#					OR = {
#						state = 229
#						state = 230
#						state = 231
#						state = 232
#						state = 233
#					}
#
#				}
#				add_extra_state_shared_building_slots = 1
#				add_building_construction = {
#					type = industrial_complex
#					level = 1
#					instant_build = yes
#				}
#			}
#		}
#	}
#
#	focus = {
#		id = SOV_consolidate_the_west
#		icon = GFX_goal_generic_dangerous_deal
#		prerequisite = { focus = SOV_consolidate_power }
#		x = 0
#		y = 1
#		relative_position_id = SOV_consolidate_power
#		cost = 10
#		ai_will_do = {
#			factor = 1
#		}
#
#		available_if_capitulated = yes
#		
#		completion_reward = {
#			
#			random_owned_controlled_state = {
#				limit = {
#					OR = {
#						state = 192
#						state = 193
#						state = 194
#						state = 195
#						state = 196
#						state = 197
#						state = 198
#						state = 199
#						state = 200
#						state = 201
#						state = 202
#						state = 203
#						state = 204
#						state = 206
#						state = 207
#						state = 221
#						state = 225						
#						state = 226						
#						state = 227
#						state = 241
#						state = 137
#					}
#
#					free_building_slots = {
#						building = infrastructure
#						size > 0
#					}
#				}
#				add_building_construction = {
#					type = infrastructure
#					level = 1
#					instant_build = yes
#				}
#			}
#		
#			random_owned_controlled_state = {
#				limit = {
#					OR = {
#						state = 192
#						state = 193
#						state = 194
#						state = 195
#						state = 196
#						state = 197
#						state = 198
#						state = 199
#						state = 200
#						state = 201
#						state = 202
#						state = 203
#						state = 204
#						state = 206
#						state = 207
#						state = 221
#						state = 225						
#						state = 226						
#						state = 227
#						state = 241
#						state = 137
#					}
#					free_building_slots = {
#						building = infrastructure
#						size > 1
#					}
#				}
#				add_building_construction = {
#					type = infrastructure
#					level = 2
#					instant_build = yes
#				}
#			}
#				
#			random_owned_controlled_state = {
#				limit = { 
#					OR = {
#						state = 192
#						state = 193
#						state = 194
#						state = 195
#						state = 196
#						state = 197
#						state = 198
#						state = 199
#						state = 200
#						state = 201
#						state = 202
#						state = 203
#						state = 204
#						state = 206
#						state = 207
#						state = 221
#						state = 225						
#						state = 226						
#						state = 227
#						state = 241
#						state = 137
#					}
#				}
#				add_extra_state_shared_building_slots = 1
#				add_building_construction = {
#					type = industrial_complex
#					level = 1
#					instant_build = yes
#				}
#			}
#		}
#			
#	}
#
#	focus = {
#		id = SOV_consolidate_the_east
#		icon = GFX_goal_generic_dangerous_deal
#		prerequisite = { focus = SOV_consolidate_power }
#		x = 4
#		y = 1
#		relative_position_id = SOV_consolidate_power
#		cost = 10
#		ai_will_do = {
#			factor = 1
#		}
#
#		available_if_capitulated = yes
#		
#		completion_reward = {
#			
#			random_owned_controlled_state = {
#				limit = {
#					OR = {
#						state = 402
#						state = 404
#						state = 405
#						state = 584
#						state = 585
#						state = 586
#						state = 587
#						state = 588
#						state = 589
#						state = 590						
#						state = 732
#						state = 742
#						state = 40
#					}
#					free_building_slots = {
#						building = infrastructure
#						size > 0
#					}
#				}
#				add_building_construction = {
#					type = infrastructure
#					level = 1
#					instant_build = yes
#				}
#			}
#		
#			random_owned_controlled_state = {
#				limit = {
#					OR = {
#						state = 402
#						state = 404
#						state = 405
#						state = 584
#						state = 585
#						state = 586
#						state = 587
#						state = 588
#						state = 589
#						state = 590						
#						state = 732
#						state = 742
#						state = 40
#					}
#					free_building_slots = {
#						building = infrastructure
#						size > 1
#					}
#
#				}
#				add_building_construction = {
#					type = infrastructure
#					level = 2
#					instant_build = yes
#				}
#			}
#				
#			random_owned_controlled_state = {
#				limit = { 
#					OR = {
#						state = 402
#						state = 404
#						state = 405
#						state = 584
#						state = 585
#						state = 586
#						state = 587
#						state = 588
#						state = 589
#						state = 590						
#						state = 732
#						state = 742
#						state = 40
#					}
#				}
#				add_extra_state_shared_building_slots = 1
#				add_building_construction = {
#					type = industrial_complex
#					level = 1
#					instant_build = yes
#				}
#			}
#		}
#	}
#
#	focus = {
#		id = SOV_sufi_stronghold
#		icon = GFX_goal_generic_dangerous_deal
#		prerequisite = { focus = SOV_consolidate_the_caucasus }
#		x = -2
#		y = 1
#		relative_position_id = SOV_consolidate_the_caucasus
#		cost = 10
#		ai_will_do = {
#			factor = 1
#		}
#
#		available_if_capitulated = yes
#		
#		completion_reward = {
#			SOV_decrease_church_power = yes
#			add_ideas = SOV_multi_religious_empire
#		}
#	}
#
#	focus = {
#		id = SOV_independent_synod
#		icon = GFX_goal_generic_dangerous_deal
#		prerequisite = { focus = SOV_consolidate_the_caucasus }
#		x = 0
#		y = 1
#		relative_position_id = SOV_consolidate_the_caucasus
#		cost = 10
#		ai_will_do = {
#			factor = 1
#		}
#
#		available_if_capitulated = yes
#		
#		completion_reward = {
#			SOV_decrease_church_power = yes
#			add_political_power = 50
#		}
#	}
#
#	focus = {
#		id = SOV_educate_the_masses_caucasus
#		icon = GFX_goal_generic_dangerous_deal
#		prerequisite = { focus = SOV_consolidate_the_caucasus }
#		x = 2
#		y = 3
#		relative_position_id = SOV_consolidate_the_caucasus
#		cost = 10
#		ai_will_do = {
#			factor = 1
#		}
#
#		available_if_capitulated = yes
#		
#				completion_reward = {
#			
#			random_owned_controlled_state = {
#				limit = {
#					OR = {
#						state = 229
#						state = 230
#						state = 231
#						state = 232
#						state = 233
#					}
#					#229 230 231 232 233
#					free_building_slots = {
#						building = infrastructure
#						size > 0
#					}
#				}
#				add_building_construction = {
#					type = infrastructure
#					level = 1
#					instant_build = yes
#				}
#			}
#		
#			random_owned_controlled_state = {
#				limit = {
#					OR = {
#						state = 229
#						state = 230
#						state = 231
#						state = 232
#						state = 233
#					}
#
#					free_building_slots = {
#						building = infrastructure
#						size > 1
#					}
#				}
#				add_building_construction = {
#					type = infrastructure
#					level = 2
#					instant_build = yes
#				}
#			}
#		}
#	}
#
#	focus = {
#		id = SOV_transcaucasian_republic
#		icon = GFX_goal_generic_dangerous_deal
#		prerequisite = { focus = SOV_sufi_stronghold }
#		prerequisite = { focus = SOV_independent_synod }
#		prerequisite = { focus = SOV_educate_the_masses_caucasus }
#		x = 0
#		y = 1
#		relative_position_id = SOV_independent_synod
#		cost = 10
#		ai_will_do = {
#			factor = 1
#		}
#
#		available_if_capitulated = yes
#		
#		completion_reward = {
#			country_event = { 
#				id = NSB_Soviet_puppeting.1 hours = 2 random_hours = 1 
#			}
#		}
#	}
#
#	focus = {
#		id = SOV_independent_synod_west
#		icon = GFX_goal_generic_dangerous_deal
#		prerequisite = { focus = SOV_consolidate_the_west }
#		x = -1
#		y = 1
#		relative_position_id = SOV_consolidate_the_west
#		cost = 10
#		ai_will_do = {
#			factor = 1
#		}
#
#		available_if_capitulated = yes
#		
#		completion_reward = {
#			SOV_decrease_church_power = yes
#			add_political_power = 50
#		}
#	}
#
#	focus = {
#		id = SOV_educate_the_masses_west
#		icon = GFX_goal_generic_dangerous_deal
#		prerequisite = { focus = SOV_consolidate_the_west }
#		x = 1
#		y = 3
#		relative_position_id = SOV_consolidate_the_west
#		cost = 10
#		ai_will_do = {
#			factor = 1
#		}
#
#		available_if_capitulated = yes
#		
#		completion_reward = {
#			
#			random_owned_controlled_state = {
#				limit = {
#					OR = {
#						state = 259
#						state = 192
#						state = 193
#						state = 194
#						state = 195
#						state = 196
#						state = 197
#						state = 198
#						state = 199
#						state = 200
#						state = 201
#						state = 202
#						state = 203
#						state = 204
#						state = 206
#						state = 207
#						state = 221
#						state = 225						
#						state = 226						
#						state = 227
#						state = 241
#						state = 137
#					}
#
#					free_building_slots = {
#						building = infrastructure
#						size > 0
#					}
#
#				}
#				add_building_construction = {
#					type = infrastructure
#					level = 1
#					instant_build = yes
#				}
#			}
#		
#			random_owned_controlled_state = {
#				limit = {
#					OR = {
#						state = 259
#						state = 192
#						state = 193
#						state = 194
#						state = 195
#						state = 196
#						state = 197
#						state = 198
#						state = 199
#						state = 200
#						state = 201
#						state = 202
#						state = 203
#						state = 204
#						state = 206
#						state = 207
#						state = 221
#						state = 225						
#						state = 226						
#						state = 227
#						state = 241
#						state = 137
#					}
#					free_building_slots = {
#						building = infrastructure
#						size > 1
#					}
#
#				}
#				add_building_construction = {
#					type = infrastructure
#					level = 2
#					instant_build = yes
#				}
#			}
#		}
#	}
#
#	focus = {
#		id = SOV_free_rutenia
#		icon = GFX_goal_generic_dangerous_deal
#		prerequisite = { focus = SOV_independent_synod_west }
#		prerequisite = { focus = SOV_educate_the_masses_west}
#		x = 0
#		y = 1
#		relative_position_id = SOV_independent_synod_west
#		cost = 10
#		ai_will_do = {
#			factor = 1
#		}
#
#		available_if_capitulated = yes
#		
#		completion_reward = {
#			country_event = { 
#				id = NSB_Soviet_puppeting.2 hours = 2 random_hours = 1 
#			}
#		}
#	}
#
#	focus = {
#		id = SOV_friendship_of_nations_university
#		icon = GFX_goal_generic_dangerous_deal
#		prerequisite = { focus = SOV_educate_the_masses_west }
#		prerequisite = { focus = SOV_educate_the_masses_caucasus }
#		prerequisite = { focus = SOV_educate_the_masses_east }
#		x = 0
#		y = 4
#		relative_position_id = SOV_educate_the_masses_west
#		cost = 10
#		ai_will_do = {
#			factor = 1
#		}
#
#		available_if_capitulated = yes
#		
#		completion_reward = {
#			add_research_slot = 1 #this might be too much
#			add_to_variable = { SOV_defense_industry_research_speed_factor = 0.05 }
#		}
#	}
#
#
#
#focus = {
#		id = SOV_independent_koranic_school
#		icon = GFX_goal_generic_dangerous_deal
#		prerequisite = { focus = SOV_consolidate_the_east }
#		x = -1
#		y = 1
#		relative_position_id = SOV_consolidate_the_east
#		cost = 10
#		ai_will_do = {
#			factor = 1
#		}
#
#		available_if_capitulated = yes
#		
#		completion_reward = {
#			SOV_decrease_church_power = yes
#			add_ideas = SOV_multi_religious_empire
#			add_political_power = 50
#		}
#	}
#
#	focus = {
#		id = SOV_educate_the_masses_east
#		icon = GFX_goal_generic_dangerous_deal
#		prerequisite = { focus = SOV_consolidate_the_east }
#		x = 1
#		y = 3
#		relative_position_id = SOV_consolidate_the_east
#		cost = 10
#		ai_will_do = {
#			factor = 1
#		}
#
#		available_if_capitulated = yes
#		
#		completion_reward = {
#			
#			random_owned_controlled_state = {
#				limit = {
#					OR = {
#						state = 402
#						state = 404
#						state = 405
#						state = 584
#						state = 585
#						state = 586
#						state = 587
#						state = 588
#						state = 589
#						state = 590						
#						state = 732
#						state = 742
#						state = 40
#					}
#					free_building_slots = {
#						building = infrastructure
#						size > 0
#					}
#			
#				}
#				add_building_construction = {
#					type = infrastructure
#					level = 1
#					instant_build = yes
#				}
#			}
#		
#			random_owned_controlled_state = {
#				limit = {
#					OR = {
#						state = 402
#						state = 404
#						state = 405
#						state = 584
#						state = 585
#						state = 586
#						state = 587
#						state = 588
#						state = 589
#						state = 590						
#						state = 732
#						state = 742
#						state = 40
#					}
#					free_building_slots = {
#						building = infrastructure
#						size > 1
#					}
#
#				}
#				add_building_construction = {
#					type = infrastructure
#					level = 2
#					instant_build = yes
#				}
#			}
#		}
#	}
#
#	focus = {
#		id = SOV_free_bukharan_republic
#		icon = GFX_goal_generic_dangerous_deal
#		prerequisite = { focus = SOV_independent_koranic_school }
#		prerequisite = { focus = SOV_educate_the_masses_east}
#		x = 0
#		y = 1
#		relative_position_id = SOV_independent_koranic_school
#		cost = 10
#		ai_will_do = {
#			factor = 1
#		}
#
#		available_if_capitulated = yes
#		
#		completion_reward = {
#			country_event = { 
#				id = NSB_Soviet_puppeting.3 hours = 2 random_hours = 1 	
#			}
#		}
#	}


