####### NO STEP BACK! #######
@DAYS_DETERMINED = 180 #Used for propaganda campaign SOV_heroes_forward -> Value should be the same as SOV_default_propaganda_campaign_duration

debug_decisions = { #TODO_Manu: Comment these out
	SOV_debug_show_paranoia_system = { #This is a duplicate of the decision present in the Paranoia category
		priority = 202

		icon = eng_ally_imperialist_coup

		allowed = {
			original_tag = SOV
		}

		available = {
			always = yes
		}

		visible = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
		}

		cost = 0

		complete_effect = {
			custom_effect_tooltip = "This will make the Paranoia System visible in the tab. It does NOT activate the Paranoia system."
			set_country_flag = SOV_debug_show_paranoia_system_flag
		}
	}

	SOV_debug_show_propaganda_system = { #This is a duplicate of the decision present in the Paranoia category
		priority = 201

		icon = eng_ally_imperialist_coup

		allowed = {
			original_tag = SOV
		}

		available = {
			always = yes
		}

		visible = {
			NOT = { has_country_flag = SOV_debug_show_propaganda_system_flag }
		}

		cost = 0

		complete_effect = {
			custom_effect_tooltip = "This will make the Propaganda system visible in the tab. It does NOT activate the Propaganda system."
			set_country_flag = SOV_debug_show_propaganda_system_flag
		}
	}
}



########     ###    ########     ###    ##    ##  #######  ####    ###
##     ##   ## ##   ##     ##   ## ##   ###   ## ##     ##  ##    ## ##
##     ##  ##   ##  ##     ##  ##   ##  ####  ## ##     ##  ##   ##   ##
########  ##     ## ########  ##     ## ## ## ## ##     ##  ##  ##     ##
##        ######### ##   ##   ######### ##  #### ##     ##  ##  #########
##        ##     ## ##    ##  ##     ## ##   ### ##     ##  ##  ##     ##
##        ##     ## ##     ## ##     ## ##    ##  #######  #### ##     ##


SOV_paranoia_system = {

	SOV_forge_production_reports = { #Repeatable decision to reduce Paranoia
		priority = 310

		icon = GFX_decision_eng_trade_unions_support

		ai_will_do = {
			base = 0
			modifier = {
				add = 1
				check_variable = { SOV_paranoia > 35 }
			}
			modifier = {
				add = 100
				check_variable = { SOV_paranoia > 75 }
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_country_flag = SOV_paranoia_system_active_flag
		}

		visible = {
			has_country_flag = SOV_paranoia_system_active_flag
		}

		cost = SOV_paranoia_calm_down_stalin_decision_cost

		days_re_enable = SOV_paranoia_calm_down_stalin_re_enable_days

		days_remove = 90

		modifier = {
			consumer_goods_factor = 0.05
		}

		complete_effect = {
			SOV_paranoia_medium_decrease_effect = yes

			custom_effect_tooltip = SOV_paranoia_calm_down_stalin_cd_tt
		}
	}

	SOV_inspection_in_the_administration = { #Repeatable decision to reduce Paranoia // Target Administration
		priority = 309

		icon = GFX_decision_generic_political_discourse

		ai_will_do = {
			base = 0
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_country_flag = SOV_paranoia_system_active_flag
			custom_trigger_tooltip = {
				tooltip = SOV_paranoia_administration_purgeable_tt
				OR = {
					any_character = {
						is_character_slot = political_advisor
						SOV_character_can_be_purged = yes
					}
					NOT = { has_idea = SOV_lavrenty_beriya }
				}
			}
			NOT = { has_country_flag = SOV_paranoia_conducting_inspection_flag }
		}

		visible = {
			has_country_flag = SOV_paranoia_system_active_flag
			OR = {
				any_character = {
					is_character_slot = political_advisor
					SOV_character_can_be_purged = yes
				}
				NOT = { has_idea = SOV_understaffed_bureaucracy }
				NOT = { has_idea = SOV_lavrenty_beriya }
			}
			SOV_is_stalinist = yes
		}

		cost = SOV_paranoia_inspection_decision_cost

		days_remove = SOV_paranoia_inspection_remove_days

		days_re_enable = SOV_paranoia_inspection_re_enable_days

		complete_effect = {
			set_country_flag = SOV_paranoia_conducting_inspection_flag #Used to prevent random purges from popping up while this is active
		}

		remove_effect = {
			clr_country_flag = SOV_paranoia_conducting_inspection_flag
			set_country_flag = { flag = SOV_paranoia_random_purge_cooldown_from_decision_flag days = 15 } #Used to prevent random purges from popping up immediately after this is completed

			SOV_pick_regular_purge_administration_type_effect = yes
			SOV_paranoia_low_decrease_effect = yes

			custom_effect_tooltip = SOV_paranoia_inspection_cd_tt
		}
	}

	SOV_inspection_in_the_army = { #Repeatable decision to reduce Paranoia // Target Army
		priority = 308

		icon = GFX_decision_generic_political_discourse

		ai_will_do = {
			base = 0
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_country_flag = SOV_paranoia_system_active_flag
			custom_trigger_tooltip = {
				tooltip = SOV_paranoia_army_purgeable_tt
				OR = {
					any_army_leader = {
						SOV_character_can_be_purged = yes
					}
					NOT = { has_idea = SOV_anti_soviet_military_thinking_banned_army }
					NOT = { has_idea = SOV_training_activities_curtailed }
				}
			}
			NOT = { has_country_flag = SOV_paranoia_conducting_inspection_flag }
		}

		visible = {
			has_country_flag = SOV_paranoia_system_active_flag
			OR = {
				any_army_leader = {
					SOV_character_can_be_purged = yes
				}
				NOT = { has_idea = SOV_anti_soviet_military_thinking_banned_army }
				NOT = { has_idea = SOV_training_activities_curtailed }
			}
			SOV_is_stalinist = yes
		}

		cost = SOV_paranoia_inspection_decision_cost

		days_remove = SOV_paranoia_inspection_remove_days

		days_re_enable = SOV_paranoia_inspection_re_enable_days

		complete_effect = {
			set_country_flag = SOV_paranoia_conducting_inspection_flag #Used to prevent random purges from popping up while this is active
		}

		remove_effect = {
			clr_country_flag = SOV_paranoia_conducting_inspection_flag
			set_country_flag = { flag = SOV_paranoia_random_purge_cooldown_from_decision_flag days = 15 } #Used to prevent random purges from popping up immediately after this is completed

			SOV_pick_regular_purge_army_type_effect = yes
			SOV_paranoia_medium_decrease_effect = yes

			custom_effect_tooltip = SOV_paranoia_inspection_cd_tt
		}
	}

	SOV_inspection_in_the_navy = { #Repeatable decision to reduce Paranoia // Target Navy
		priority = 307

		icon = GFX_decision_generic_political_discourse

		ai_will_do = {
			base = 0
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_country_flag = SOV_paranoia_system_active_flag
			custom_trigger_tooltip = {
				tooltip = SOV_paranoia_navy_purgeable_tt
				OR = {
					any_navy_leader = {
						SOV_character_can_be_purged = yes
					}
					NOT = { has_idea = SOV_anti_soviet_military_thinking_banned_navy }
					NOT = { has_idea = SOV_shipyard_staff_purged }
				}
			}
			NOT = { has_country_flag = SOV_paranoia_conducting_inspection_flag }
		}

		visible = {
			has_country_flag = SOV_paranoia_system_active_flag
			OR = {
				any_navy_leader = {
					SOV_character_can_be_purged = yes
				}
				NOT = { has_idea = SOV_anti_soviet_military_thinking_banned_navy }
				NOT = { has_idea = SOV_shipyard_staff_purged }
			}
			SOV_is_stalinist = yes
		}

		cost = SOV_paranoia_inspection_decision_cost

		days_remove = SOV_paranoia_inspection_remove_days

		days_re_enable = SOV_paranoia_inspection_re_enable_days

		complete_effect = {
			set_country_flag = SOV_paranoia_conducting_inspection_flag #Used to prevent random purges from popping up while this is active
		}

		remove_effect = {
			clr_country_flag = SOV_paranoia_conducting_inspection_flag
			set_country_flag = { flag = SOV_paranoia_random_purge_cooldown_from_decision_flag days = 15 } #Used to prevent random purges from popping up immediately after this is completed

			SOV_pick_regular_purge_navy_type_effect = yes
			SOV_paranoia_low_decrease_effect = yes

			custom_effect_tooltip = SOV_paranoia_inspection_cd_tt
		}
	}

	SOV_inspection_in_the_airforce = { #Repeatable decision to reduce Paranoia // Target Airforce
		priority = 306

		icon = GFX_decision_generic_political_discourse

		ai_will_do = {
			base = 0
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_country_flag = SOV_paranoia_system_active_flag
			custom_trigger_tooltip = {
				tooltip = SOV_paranoia_airforce_purgeable_tt
				OR = {
					NOT = { has_idea = SOV_anti_soviet_military_thinking_banned_airforce }
					NOT = { has_idea = SOV_ground_based_training }
				}
			}
			NOT = { has_country_flag = SOV_paranoia_conducting_inspection_flag }
		}

		visible = {
			has_country_flag = SOV_paranoia_system_active_flag
			OR = {
				NOT = { has_idea = SOV_anti_soviet_military_thinking_banned_airforce }
				NOT = { has_idea = SOV_ground_based_training }
			}
			SOV_is_stalinist = yes
		}

		cost = SOV_paranoia_inspection_decision_cost

		days_remove = SOV_paranoia_inspection_remove_days

		days_re_enable = SOV_paranoia_inspection_re_enable_days

		complete_effect = {
			set_country_flag = SOV_paranoia_conducting_inspection_flag #Used to prevent random purges from popping up while this is active
		}

		remove_effect = {
			clr_country_flag = SOV_paranoia_conducting_inspection_flag
			set_country_flag = { flag = SOV_paranoia_random_purge_cooldown_from_decision_flag days = 15 } #Used to prevent random purges from popping up immediately after this is completed

			SOV_pick_regular_purge_airforce_type_effect = yes
			SOV_paranoia_low_decrease_effect = yes
			custom_effect_tooltip = SOV_paranoia_inspection_cd_tt
		}
	}

	SOV_loosen_prohibitions_in_military_academies_dec = {
		priority = 300

		icon = generic_brainwash

		ai_will_do = {
			base = 1
			modifier = {
				factor = 2
				any_enemy_country = {
					is_major = yes
				}
			}
			modifier = {
				factor = 5
				has_idea = SOV_anti_soviet_military_thinking_banned_army
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_country_flag = { flag = SOV_third_moscow_trial_flag days > 365 }
		}

		visible = {
			OR = {
				has_idea = SOV_anti_soviet_military_thinking_banned_army
				has_idea = SOV_anti_soviet_military_thinking_banned_navy
				has_idea = SOV_anti_soviet_military_thinking_banned_airforce
			}
			SOV_is_stalinist = yes
		}

		days_remove = 30

		cost = 50

		modifier = {
			command_power_gain = -0.2
			political_power_gain = -0.2
		}

		complete_effect = {
		}

		remove_effect = {
			if = {
				limit = {
					has_idea = SOV_anti_soviet_military_thinking_banned_army
				}
				remove_ideas = SOV_anti_soviet_military_thinking_banned_army
			}
			if = {
				limit = {
					has_idea = SOV_anti_soviet_military_thinking_banned_navy
				}
				remove_ideas = SOV_anti_soviet_military_thinking_banned_navy
			}
			if = {
				limit = {
					has_idea = SOV_anti_soviet_military_thinking_banned_airforce
				}
				remove_ideas = SOV_anti_soviet_military_thinking_banned_airforce
			}
		}
	}

	SOV_reinforce_army_officer_ranks_with_veterans_dec = {
		priority = 291

		icon = generic_prepare_civil_war

		ai_will_do = {
			base = 10
			modifier = {
				factor = 2
				has_war = yes
			}
			modifier = {
				factor = 5
				has_idea = SOV_purged_junior_army_officers_2
			}
			modifier = {
				factor = 10
				has_idea = SOV_purged_junior_army_officers_3
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_country_flag = { flag = SOV_third_moscow_trial_flag days > 365 }
		}

		visible = {
			OR = {
				has_idea = SOV_purged_junior_army_officers_1
				has_idea = SOV_purged_junior_army_officers_2
				has_idea = SOV_purged_junior_army_officers_3
			}
			SOV_is_stalinist = yes
		}

		days_remove = SOV_reinforce_officer_ranks_days

		days_re_enable = 1

		ai_hint_pp_cost = 50
		custom_cost_trigger = {
			command_power > 49
			has_political_power > 49
			has_army_experience > 49
		}
		custom_cost_text = decision_cost_CP_50_pp_50_ArmXP_50

		complete_effect = {
			hidden_effect = {
				add_command_power = -50
				add_political_power = -50
				army_experience = -50
			}
		}

		remove_effect = {
			if = {
				limit = {
					has_idea = SOV_purged_junior_army_officers_3
				}
				swap_ideas = {
					remove_idea = SOV_purged_junior_army_officers_3
					add_idea = SOV_purged_junior_army_officers_2
				}
			}
			else_if = {
				limit = {
					has_idea = SOV_purged_junior_army_officers_2
				}
				swap_ideas = {
					remove_idea = SOV_purged_junior_army_officers_2
					add_idea = SOV_purged_junior_army_officers_1
				}
			}
			else_if = {
				limit = {
					has_idea = SOV_purged_junior_army_officers_1
				}
				remove_ideas = SOV_purged_junior_army_officers_1
			}
		}
	}

	SOV_reinforce_navy_officer_ranks_with_veterans_dec = {
		priority = 290

		icon = generic_naval

		ai_will_do = {
			base = 10
			modifier = {
				factor = 10
				has_war = yes
			}
			modifier = {
				factor = 10
				has_idea = SOV_purged_junior_navy_officers_2
			}
			modifier = {
				factor = 50
				has_idea = SOV_purged_junior_navy_officers_3
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_country_flag = { flag = SOV_third_moscow_trial_flag days > 365 }
		}

		visible = {
			OR = {
				has_idea = SOV_purged_junior_navy_officers_1
				has_idea = SOV_purged_junior_navy_officers_2
				has_idea = SOV_purged_junior_navy_officers_3
			}
			SOV_is_stalinist = yes
		}

		days_remove = SOV_reinforce_officer_ranks_days

		days_re_enable = 1

		ai_hint_pp_cost = 50
		custom_cost_trigger = {
			command_power > 49
			has_political_power > 49
			has_navy_experience > 49
		}
		custom_cost_text = decision_cost_CP_50_pp_50_NavXP_50

		complete_effect = {
			hidden_effect = {
				add_command_power = -50
				add_political_power = -50
				navy_experience = -50
			}
		}

		remove_effect = {
			if = {
				limit = {
					has_idea = SOV_purged_junior_navy_officers_3
				}
				swap_ideas = {
					remove_idea = SOV_purged_junior_navy_officers_3
					add_idea = SOV_purged_junior_navy_officers_2
				}
			}
			else_if = {
				limit = {
					has_idea = SOV_purged_junior_navy_officers_2
				}
				swap_ideas = {
					remove_idea = SOV_purged_junior_navy_officers_2
					add_idea = SOV_purged_junior_navy_officers_1
				}
			}
			else_if = {
				limit = {
					has_idea = SOV_purged_junior_navy_officers_1
				}
				remove_ideas = SOV_purged_junior_navy_officers_1
			}
			else = {
				#log = "I CANNOT REMOVE A NS THAT DOESN'T EXIST!"
			}
		}
	}

	SOV_reinstate_mig_design_bureau = {
		priority = 285

		icon = generic_air

		ai_will_do = {
			base = 2
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_country_flag = {
				flag = SOV_mig_design_bureau_dissolved_flag
				days > 365
			}
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			has_country_flag = SOV_mig_design_bureau_dissolved_flag
		}

		days_remove = SOV_reinstate_aircraft_designer_days

		days_re_enable = 1

		cost = 0

		modifier = {
			political_power_gain = -0.25
			civilian_factory_use = 2
		}

		remove_effect = {
			clr_country_flag = SOV_mig_design_bureau_dissolved_flag
		}
	}

	SOV_reinstate_ilyushin_design_bureau = {
		priority = 284

		icon = generic_air

		ai_will_do = {
			base = 2
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_country_flag = {
				flag = SOV_ilyushin_design_bureau_dissolved_flag
				days > 365
			}
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			has_country_flag = SOV_ilyushin_design_bureau_dissolved_flag
		}

		days_remove = SOV_reinstate_aircraft_designer_days

		days_re_enable = 1

		cost = 0

		modifier = {
			political_power_gain = -0.25
			civilian_factory_use = 2
		}

		remove_effect = {
			clr_country_flag = SOV_ilyushin_design_bureau_dissolved_flag
		}
	}

	SOV_reinstate_tupolev_design_bureau = {
		priority = 283

		icon = generic_air

		ai_will_do = {
			base = 2
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_country_flag = {
				flag = SOV_tupolev_design_bureau_dissolved_flag
				days > 365
			}
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			has_country_flag = SOV_tupolev_design_bureau_dissolved_flag
		}

		days_remove = SOV_reinstate_aircraft_designer_days

		days_re_enable = 1

		cost = 0

		modifier = {
			political_power_gain = -0.25
			civilian_factory_use = 2
		}

		remove_effect = {
			clr_country_flag = SOV_tupolev_design_bureau_dissolved_flag
		}
	}

	SOV_reinstate_yakovlev_design_bureau = {
		priority = 282

		icon = generic_air

		ai_will_do = {
			base = 2
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_country_flag = {
				flag = SOV_yakovlev_design_bureau_dissolved_flag
				days > 365
			}
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			has_country_flag = SOV_yakovlev_design_bureau_dissolved_flag
		}

		days_remove = SOV_reinstate_aircraft_designer_days

		days_re_enable = 1

		cost = 0

		modifier = {
			political_power_gain = -0.25
			civilian_factory_use = 2
		}

		remove_effect = {
			clr_country_flag = SOV_yakovlev_design_bureau_dissolved_flag
		}
	}



	SOV_DEBUG_ACTIVATE_PARANOIA = { #TODO_Manu: Comment out
		priority = 281

		icon = eng_ally_imperialist_coup

		allowed = {
			original_tag = SOV
		}

		available = {
			always = yes
		}

		visible = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			is_debug = yes
		}

		cost = 0

		complete_effect = {
			custom_effect_tooltip = "THIS ACTIVATES THE PARANOIA SYSTEM"
			SOV_initiate_paranoia_effect = yes
		}
	}

	SOV_DEBUG_DEACTIVATE_PARANOIA = { #TODO_Manu: Comment out
		priority = 281

		icon = eng_ally_imperialist_coup

		allowed = {
			original_tag = SOV
		}

		available = {
			always = yes
		}

		visible = {
			has_country_flag = SOV_paranoia_system_active_flag
			is_debug = yes
		}

		cost = 0

		complete_effect = {
			custom_effect_tooltip = "THIS REMOVES THE PARANOIA SYSTEM"
			SOV_remove_paranoia_effect = yes
		}
	}

	SOV_DEBUG_show_debug_purge_decisions = { #TODO_Manu: Comment out
		priority = 281

		icon = eng_ally_imperialist_coup

		allowed = {
			original_tag = SOV
		}

		available = {
			always = yes
		}

		visible = {
			NOT = { has_country_flag = SOV_TEST_show_debug_purge_decisions_flag }
			is_debug = yes
		}

		cost = 0

		complete_effect = {
			set_country_flag = SOV_TEST_show_debug_purge_decisions_flag
			#SOV_initiate_paranoia_effect = yes
		}
	}

	SOV_DEBUG_hide_debug_purge_decisions = { #TODO_Manu: Comment out
		priority = 201

		icon = eng_ally_imperialist_coup

		allowed = {
			original_tag = SOV
		}

		available = {
			always = yes
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
			is_debug = yes
		}

		cost = 0

		complete_effect = {
			clr_country_flag = SOV_TEST_show_debug_purge_decisions_flag
			#SOV_remove_paranoia_effect = yes
		}
	}

	SOV_DEBUG_MAKE_PURGE_DECISIONS_FASTER_HERE = {
		priority = 151

		icon = eng_ally_imperialist_coup

		allowed = {
			original_tag = SOV
		}

		available = {
			always = yes
		}

		visible = {
			NOT = {
				has_country_flag = SOV_debug_fast_purge_decisions_flag
			}
			is_debug = yes
		}

		cost = 0

		complete_effect = {
			set_country_flag = SOV_debug_fast_purge_decisions_flag
			set_variable = { SOV_reinforce_officer_ranks_days = 3 }
			set_variable = { SOV_reinstate_aircraft_designer_days = 3 }
		}
	}

	SOV_DEBUG_REGULAR_PURGE_DECISIONS_DURATION_HERE = {
		priority = 150

		icon = eng_ally_imperialist_coup

		allowed = {
			original_tag = SOV
		}

		available = {
			always = yes
		}

		visible = {
			has_country_flag = SOV_debug_fast_purge_decisions_flag
			is_debug = yes
		}

		cost = 0

		complete_effect = {
			clr_country_flag = SOV_debug_fast_purge_decisions_flag
			set_variable = { SOV_reinforce_officer_ranks_days = 365 }
			set_variable = { SOV_reinstate_aircraft_designer_days = 180 }
		}
	}

	SOV_DEBUG_trigger_great_purge_trial_of_the_generals_dec = {
		priority = 99

		icon = generic_prepare_civil_war

		allowed = {
			original_tag = SOV
		}

		available = {
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_great_purge_army_trial_of_the_generals_effect = yes
		}
	}

	SOV_DEBUG_trigger_great_purge_army_junior_officers_dec = {
		priority = 98

		icon = generic_prepare_civil_war

		allowed = {
			original_tag = SOV
		}

		available = {
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_great_purge_army_junior_officers_effect = yes
		}
	}

	SOV_DEBUG_trigger_random_army_great_purge_dec = {
		priority = 97

		icon = generic_prepare_civil_war

		allowed = {
			original_tag = SOV
		}

		available = {
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_pick_great_purge_army_type_effect = yes
		}
	}

	SOV_DEBUG_trigger_regular_purge_general_accused_dec = {
		priority = 96

		icon = generic_prepare_civil_war

		allowed = {
			original_tag = SOV
		}

		available = {
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_regular_purge_general_accused_effect = yes
		}
	}

	SOV_DEBUG_trigger_regular_purge_conspiracy_in_the_academy_dec = {
		priority = 95

		icon = generic_prepare_civil_war

		allowed = {
			original_tag = SOV
		}

		available = {
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_regular_purge_conspiracy_in_the_academy_effect = yes
		}
	}

	SOV_DEBUG_trigger_regular_purge_anti_saboteur_campaign_dec = {
		priority = 94

		icon = generic_prepare_civil_war

		allowed = {
			original_tag = SOV
		}

		available = {
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_regular_purge_anti_saboteur_campaign_effect = yes
		}
	}

	SOV_DEBUG_trigger_regular_purge_general_accuses_general_dec = {
		priority = 93

		icon = generic_prepare_civil_war

		allowed = {
			original_tag = SOV
		}

		available = {
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_regular_purge_general_accuses_general_effect = yes
		}
	}

	SOV_DEBUG_trigger_great_purge_moscow_trial_dec = {
		priority = 89

		icon = eng_trade_unions_support

		allowed = {
			original_tag = SOV
		}

		available = {
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_trigger_great_purge_moscow_trial_effect = yes
		}
	}

	SOV_DEBUG_trigger_regular_purge_advisor_accused_dec = {
		priority = 83

		icon = eng_trade_unions_support

		allowed = {
			original_tag = SOV
		}

		available = {
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_trigger_regular_purge_advisor_accused_effect = yes
		}
	}

	SOV_DEBUG_trigger_regular_purge_nkvd_dec = {
		priority = 81

		icon = eng_trade_unions_support

		allowed = {
			original_tag = SOV
		}

		available = {
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_trigger_regular_purge_nkvd_effect = yes
		}
	}



	SOV_DEBUG_trigger_great_purge_trial_of_the_admirals_dec = {
		priority = 79

		icon = generic_naval

		allowed = {
			original_tag = SOV
		}

		available = {
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_trigger_great_purge_trial_of_the_admirals_effect = yes
		}
	}

	SOV_DEBUG_trigger_great_purge_junior_naval_officers_effect = {
		priority = 78

		icon = generic_naval

		allowed = {
			original_tag = SOV
		}

		available = {
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_trigger_great_purge_junior_naval_officers_effect = yes
		}
	}

	SOV_DEBUG_trigger_regular_purge_admiral_accused_dec = {
		priority = 73

		icon = generic_naval

		allowed = {
			original_tag = SOV
		}

		available = {
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_trigger_regular_purge_admiral_accused_effect = yes
		}
	}

	SOV_DEBUG_trigger_regular_purge_naval_conspiracy_in_the_academys_dec = {
		priority = 72

		icon = generic_naval

		allowed = {
			original_tag = SOV
		}

		available = {
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_trigger_regular_purge_naval_conspiracy_in_the_academy_effect = yes
		}
	}

	SOV_DEBUG_trigger_regular_purge_naval_anti_saboteur_campaign_dec = {
		priority = 71

		icon = generic_naval

		allowed = {
			original_tag = SOV
		}

		available = {
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_trigger_regular_purge_naval_anti_saboteur_campaign_effect = yes
		}
	}




	SOV_DEBUG_trigger_great_purge_airforce_chiefs_dec = {
		priority = 69

		icon = generic_air

		allowed = {
			original_tag = SOV
		}

		available = {
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_trigger_great_purge_airforce_chiefs_effect = yes
		}
	}

	SOV_DEBUG_trigger_great_purge_airforce_design_bureau_dissolved_dec = {
		priority = 68

		icon = generic_air

		allowed = {
			original_tag = SOV
		}

		available = {
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_trigger_great_purge_design_bureau_dissolved_effect = yes
		}
	}

	SOV_DEBUG_trigger_regular_purge_airforce_conspiracy_in_the_academys_dec = {
		priority = 62

		icon = generic_air

		allowed = {
			original_tag = SOV
		}

		available = {
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_trigger_regular_purge_airforce_conspiracy_in_the_academy_effect = yes
		}
	}

	SOV_DEBUG_trigger_regular_purge_airforce_anti_saboteur_campaign_dec = {
		priority = 61

		icon = generic_air

		allowed = {
			original_tag = SOV
		}

		available = {
		}

		visible = {
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_trigger_regular_purge_airforce_anti_saboteur_campaign_effect = yes
		}
	}



	SOV_DEBUG_low_paranoia_increase_dec = {
		priority = 6

		icon = eng_ally_imperialist_coup

		allowed = {
			original_tag = SOV
		}

		available = {
			has_country_flag = SOV_paranoia_system_active_flag
		}

		visible = {
			has_country_flag = SOV_paranoia_system_active_flag
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_paranoia_low_increase_effect = yes
		}
	}

	SOV_DEBUG_medium_paranoia_increase_dec = {
		priority = 5

		icon = eng_ally_imperialist_coup

		allowed = {
			original_tag = SOV
		}

		available = {
			has_country_flag = SOV_paranoia_system_active_flag
		}

		visible = {
			has_country_flag = SOV_paranoia_system_active_flag
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_paranoia_medium_increase_effect = yes
		}
	}

	SOV_DEBUG_high_paranoia_increase_dec = {
		priority = 4

		icon = eng_ally_imperialist_coup

		allowed = {
			original_tag = SOV
		}

		available = {
			has_country_flag = SOV_paranoia_system_active_flag
		}

		visible = {
			has_country_flag = SOV_paranoia_system_active_flag
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_paranoia_high_increase_effect = yes
		}
	}

	SOV_DEBUG_low_paranoia_decrease_dec = {
		priority = 3

		icon = eng_ally_imperialist_coup

		allowed = {
			original_tag = SOV
		}

		available = {
			has_country_flag = SOV_paranoia_system_active_flag
		}

		visible = {
			has_country_flag = SOV_paranoia_system_active_flag
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_paranoia_low_decrease_effect = yes
		}
	}

	SOV_DEBUG_medium_paranoia_decrease_dec = {
		priority = 2

		icon = eng_ally_imperialist_coup

		allowed = {
			original_tag = SOV
		}

		available = {
			has_country_flag = SOV_paranoia_system_active_flag
		}

		visible = {
			has_country_flag = SOV_paranoia_system_active_flag
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_paranoia_medium_decrease_effect = yes
		}
	}

	SOV_DEBUG_high_paranoia_decrease_dec = {
		priority = 1

		icon = eng_ally_imperialist_coup

		allowed = {
			original_tag = SOV
		}

		available = {
			has_country_flag = SOV_paranoia_system_active_flag
		}

		visible = {
			has_country_flag = SOV_paranoia_system_active_flag
			has_country_flag = SOV_TEST_show_debug_purge_decisions_flag
		}

		cost = 0

		complete_effect = {
			SOV_paranoia_high_decrease_effect = yes
		}
	}

	SOV_DEBUG_show_all_purged_portraits = {
		priority = 1

		icon = eng_ally_imperialist_coup

		ai_will_do = {
			base = 0
		}

		allowed = {
			always = yes
		}

		available = {
			always = yes
		}

		visible = {
			is_debug = yes
		}

		days_re_enable = 1

		cost = 0

		complete_effect = {
			#Custom
			set_variable = { SOV.SOV_paranoia_photo_zinovyev = 8 }
			set_variable = { SOV.SOV_paranoia_photo_radek = 9 }
			set_variable = { SOV.SOV_paranoia_photo_bukharin = 10 }
			set_variable = { SOV.SOV_paranoia_photo_trotsky = 11 }
			set_variable = { SOV.SOV_paranoia_photo_tukhachevsky = 12 }

			#Generic
			set_variable = { SOV_paranoia_portrait_index = 1 }
			set_temp_variable = { i = 0 }
			while_loop_effect = {
				limit = {
					check_variable = { i = 12 compare = less_than }
				}
				set_temp_variable = { SOV_generic_portrait_frame = SOV_paranoia_portrait_index }
				if = { #There are 6 portraits and 12 slots, so second round of generic portraits
					limit = {
						check_variable = { SOV_paranoia_portrait_index = 6 compare = greater_than }
					}
					subtract_from_temp_variable = { SOV_generic_portrait_frame = 6 }
				}
				add_to_temp_variable = { SOV_generic_portrait_frame = 1 }
				#log = "Final FRAME is [?SOV_generic_portrait_frame]"

				add_to_array = {
					array = SOV_paranoia_generic_portraits_array
					value = SOV_generic_portrait_frame
					index = SOV_paranoia_portrait_index
				}

				add_to_variable = { SOV_paranoia_portrait_index = 1 }
				add_to_temp_variable = { i = 1 }
				#log = "New index is [?SOV_paranoia_portrait_index]"
			}
		}
	}
}



########  ########   #######  ########     ###     ######      ###    ##    ## ########     ###        ######     ###    ##     ## ########     ###    ####  ######   ##    ##
##     ## ##     ## ##     ## ##     ##   ## ##   ##    ##    ## ##   ###   ## ##     ##   ## ##      ##    ##   ## ##   ###   ### ##     ##   ## ##    ##  ##    ##  ###   ##
##     ## ##     ## ##     ## ##     ##  ##   ##  ##         ##   ##  ####  ## ##     ##  ##   ##     ##        ##   ##  #### #### ##     ##  ##   ##   ##  ##        ####  ##
########  ########  ##     ## ########  ##     ## ##   #### ##     ## ## ## ## ##     ## ##     ##    ##       ##     ## ## ### ## ########  ##     ##  ##  ##   #### ## ## ##
##        ##   ##   ##     ## ##        ######### ##    ##  ######### ##  #### ##     ## #########    ##       ######### ##     ## ##        #########  ##  ##    ##  ##  ####
##        ##    ##  ##     ## ##        ##     ## ##    ##  ##     ## ##   ### ##     ## ##     ##    ##    ## ##     ## ##     ## ##        ##     ##  ##  ##    ##  ##   ###
##        ##     ##  #######  ##        ##     ##  ######   ##     ## ##    ## ########  ##     ##     ######  ##     ## ##     ## ##        ##     ## ####  ######   ##    ##


SOV_propaganda_campaigns = {
	SOV_debug_unlock_slot = {
		priority = 59

		icon = eng_ally_imperialist_coup

		allowed = {
			original_tag = SOV
		}

		available = {
			OR = {
				check_variable = { SOV_poster_left_icon_frame = SOV_propaganda_locked_slot_index }
				check_variable = { SOV_poster_center_icon_frame = SOV_propaganda_locked_slot_index }
				check_variable = { SOV_poster_right_icon_frame = SOV_propaganda_locked_slot_index }
			}
		}

		visible = {
			OR = {
				check_variable = { SOV_poster_left_icon_frame = SOV_propaganda_locked_slot_index }
				check_variable = { SOV_poster_center_icon_frame = SOV_propaganda_locked_slot_index }
				check_variable = { SOV_poster_right_icon_frame = SOV_propaganda_locked_slot_index }
			}
			is_debug = yes
		}

		cost = 0

		complete_effect = {
			SOV_unlock_propaganda_campaign_slot_effect = yes
		}
	}

	SOV_debug_MAKE_CAMPAIGNS_FASTER_HERE = {
		priority = 51

		icon = eng_ally_imperialist_coup

		allowed = {
			original_tag = SOV
		}

		available = {
			always = yes
		}

		visible = {
			NOT = {
				has_country_flag = SOV_debug_fast_propaganda_campaigns_flag
			}
			is_debug = yes
		}

		cost = 0

		complete_effect = {
			set_country_flag = SOV_debug_fast_propaganda_campaigns_flag
			set_variable = { SOV_default_propaganda_campaign_duration = 5 }
			set_variable = { SOV_default_propaganda_campaign_cooldown = 1 }
			set_variable = { SOV_default_propaganda_campaign_old_days = 2 }
		}
	}

	SOV_debug_REGULAR_CAMPAIGN_DURATION_HERE = {
		priority = 51

		icon = eng_ally_imperialist_coup

		allowed = {
			original_tag = SOV
		}

		available = {
			always = yes
		}

		visible = {
			has_country_flag = SOV_debug_fast_propaganda_campaigns_flag
			is_debug = yes
		}

		cost = 0

		complete_effect = {
			clr_country_flag = SOV_debug_fast_propaganda_campaigns_flag
			set_variable = { SOV_default_propaganda_campaign_duration = 180 }
			set_variable = { SOV_default_propaganda_campaign_cooldown = 90 }
			set_variable = { SOV_default_propaganda_campaign_old_days = 150 }
		}
	}

	SOV_debug_UNLOCK_ALL_CAMPAIGNS = {
		priority = 50

		icon = eng_ally_imperialist_coup

		allowed = {
			original_tag = SOV
		}

		available = {
			always = yes
		}

		visible = {
			NOT = {
				has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag
			}
			is_debug = yes
		}

		cost = 0

		complete_effect = {
			set_country_flag = SOV_debug_unlock_propaganda_campaigns_flag
		}
	}

	SOV_propaganda_motherland_calls = { # ID = 3
		priority = 2

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 0
			modifier = {
				add = 1
				surrender_progress > 0.4
			}
			modifier = {
				add = 10
				has_manpower < 500000
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_motherland_calls_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_motherland_calls_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { SOV_propaganda_motherland_calls_cost > 90 } #Shouldn't even consider doing it a fifth time
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			has_war = yes
			any_enemy_country = {
				is_major = yes
			}
		}

		visible = {
			OR = {
				has_completed_focus = SOV_expand_the_agitprop
				has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag #debug
			}
		}

		days_remove = SOV_default_propaganda_campaign_duration

		days_re_enable = SOV_default_propaganda_campaign_cooldown

		cost = SOV_propaganda_motherland_calls_cost

		modifier = {
			weekly_manpower = 10000
			training_time_factor = -0.2
			minimum_training_level = -0.2
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 3 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 3 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			# Okay this looks dumb I know but it's better than having to change 24 operations each time we feel like tweaking how propaganda campaign's cost escalates
			set_variable = { SOV_propaganda_cost = SOV_propaganda_motherland_calls_cost }
			SOV_increase_propaganda_campaign_cost_effect = yes
			set_variable = { SOV_propaganda_motherland_calls_cost = SOV_propaganda_cost }
			clear_variable = SOV_propaganda_cost

			custom_effect_tooltip = SOV_propaganda_campaign_cooldown_tt
		}
	}

	SOV_propaganda_victory_at_hand = { # ID = 4
		priority = 3

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_victory_at_hand_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_victory_at_hand_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { SOV_propaganda_victory_at_hand_cost > 90 } #Shouldn't even consider doing it a fifth time
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			has_war = yes
			surrender_progress < 0.01
			any_enemy_country = {
				is_major = yes
				ROOT = {
					any_controlled_state = {
						is_core_of = PREV.PREV
					}
				}
			}
			SOV_propaganda_victory_at_hand_available = yes
		}

		visible = {
			always = no
			OR = {
				has_completed_focus = SOV_expand_the_agitprop
				has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag #debug
			}
		}

		days_remove = SOV_default_propaganda_campaign_duration

		days_re_enable = SOV_default_propaganda_campaign_cooldown

		cost = SOV_propaganda_victory_at_hand_cost

		modifier = {
			army_attack_factor = 0.05
			army_speed_factor = 0.1
			org_loss_when_moving = -0.05
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 4 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 4 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			set_variable = { SOV_propaganda_cost = SOV_propaganda_victory_at_hand_cost }
			SOV_increase_propaganda_campaign_cost_effect = yes
			set_variable = { SOV_propaganda_victory_at_hand_cost = SOV_propaganda_cost }
			clear_variable = SOV_propaganda_cost

			custom_effect_tooltip = SOV_propaganda_campaign_cooldown_tt
		}
	}

	SOV_propaganda_defend_moscow = { # ID = 5
		priority = 4

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 500
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_defend_moscow_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_defend_moscow_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { SOV_propaganda_defend_moscow_cost > 90 } #Shouldn't even consider doing it a fifth time
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			controls_state = 219 #Moscow
			219 = {
				any_neighbor_state = {
					controller = {
						has_war_with = ROOT
					}
				}
			}
		}

		visible = {
			OR = {
				has_completed_focus = SOV_expand_the_agitprop
				has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag #debug
			}
		}

		days_remove = SOV_default_propaganda_campaign_duration

		days_re_enable = SOV_default_propaganda_campaign_cooldown

		cost = SOV_propaganda_defend_moscow_cost

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 5 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes

			219 = { #Moscow
				add_dynamic_modifier = { modifier = SOV_defend_moscow scope = SOV }
				every_neighbor_state = {
					add_dynamic_modifier = { modifier = SOV_defend_moscow scope = SOV }
				}
			}
			custom_effect_tooltip = SOV_propaganda_defend_moscow_state_modifier_tt
		}

		remove_effect = {
			219 = { #Moscow
				remove_dynamic_modifier = { modifier = SOV_defend_moscow }
				every_neighbor_state = {
					remove_dynamic_modifier = { modifier = SOV_defend_moscow }
				}
			}

			set_variable = { SOV_propaganda_campaign_to_remove = 5 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			set_variable = { SOV_propaganda_cost = SOV_propaganda_defend_moscow_cost }
			SOV_increase_propaganda_campaign_cost_effect = yes
			set_variable = { SOV_propaganda_defend_moscow_cost = SOV_propaganda_cost }
			clear_variable = SOV_propaganda_cost

			custom_effect_tooltip = SOV_propaganda_campaign_cooldown_tt
		}
	}

	SOV_propaganda_fight_to_the_last = { # ID = 6
		priority = 5

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 0.75
			modifier = {
				factor = 10
				OR = {
					AND = {
						stockpile_ratio = {
							archetype = train_equipment
							ratio < 0.75
						}
						stockpile_ratio = {
							archetype = motorized_equipment
							ratio < 0.75
						}
					}
					stockpile_ratio = {
						archetype = convoy
						ratio < 5
					}
				}
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_fight_to_the_last_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_fight_to_the_last_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { SOV_propaganda_fight_to_the_last_cost > 90 } #Shouldn't even consider doing it a fifth time
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes
			has_war = yes
			surrender_progress > 0.1
		}

		visible = {
			OR = {
				has_completed_focus = SOV_expand_the_agitprop
				has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag #debug
			}
		}

		days_remove = SOV_default_propaganda_campaign_duration

		days_re_enable = SOV_default_propaganda_campaign_cooldown


		cost = SOV_propaganda_fight_to_the_last_cost

		modifier = {
			army_org_factor = 0.05
			out_of_supply_factor = -0.1
			no_supply_grace = 70
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 6 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 6 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			set_variable = { SOV_propaganda_cost = SOV_propaganda_fight_to_the_last_cost }
			SOV_increase_propaganda_campaign_cost_effect = yes
			set_variable = { SOV_propaganda_fight_to_the_last_cost = SOV_propaganda_cost }
			clear_variable = SOV_propaganda_cost

			custom_effect_tooltip = SOV_propaganda_campaign_cooldown_tt
		}
	}

	SOV_propaganda_hit_of_hammer = { # ID = 7
		priority = 6

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_hit_of_hammer_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_hit_of_hammer_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { SOV_propaganda_hit_of_hammer_cost > 90 } #Shouldn't even consider doing it a fifth time
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			has_war = yes
		}

		visible = {
			OR = {
				has_completed_focus = SOV_expand_the_agitprop
				has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag #debug
			}
		}

		days_remove = SOV_default_propaganda_campaign_duration

		days_re_enable = SOV_default_propaganda_campaign_cooldown

		cost = SOV_propaganda_hit_of_hammer_cost

		modifier = {
			industrial_capacity_factory = 0.05
			industrial_capacity_dockyard = 0.05
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 7 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 7 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			set_variable = { SOV_propaganda_cost = SOV_propaganda_hit_of_hammer_cost }
			SOV_increase_propaganda_campaign_cost_effect = yes
			set_variable = { SOV_propaganda_hit_of_hammer_cost = SOV_propaganda_cost }
			clear_variable = SOV_propaganda_cost

			custom_effect_tooltip = SOV_propaganda_campaign_cooldown_tt
		}
	}

	SOV_propaganda_transport = { # ID = 8
		priority = 7

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 0.7
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_transport_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_transport_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { SOV_propaganda_transport_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes
		}

		visible = {
			OR = {
				has_completed_focus = SOV_expand_the_agitprop
				has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag #debug
			}
		}

		days_remove = SOV_default_propaganda_campaign_duration

		days_re_enable = SOV_default_propaganda_campaign_cooldown

		cost = SOV_propaganda_transport_cost

		modifier = {
			production_speed_supply_node_factor = 0.3
			production_speed_rail_way_factor = 0.2
			supply_consumption_factor = -0.1
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 8 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 8 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			set_variable = { SOV_propaganda_cost = SOV_propaganda_transport_cost }
			SOV_increase_propaganda_campaign_cost_effect = yes
			set_variable = { SOV_propaganda_transport_cost = SOV_propaganda_cost }
			clear_variable = SOV_propaganda_cost

			custom_effect_tooltip = SOV_propaganda_campaign_cooldown_tt
		}
	}

	SOV_propaganda_oil_for_the_motherland = { # ID = 9
		priority = 8

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 10
				fuel_ratio < 0.5
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_oil_for_the_motherland_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_oil_for_the_motherland_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { SOV_propaganda_oil_for_the_motherland_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			any_controlled_state = {
				has_resources_amount = {
					resource = oil
					amount > 0
				}
			}
		}

		visible = {
			always = no
			OR = {
				has_completed_focus = SOV_expand_the_agitprop
				has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag #debug
			}
		}

		days_remove = SOV_default_propaganda_campaign_duration

		days_re_enable = SOV_default_propaganda_campaign_cooldown

		cost = SOV_propaganda_oil_for_the_motherland_cost

		modifier = {
			fuel_gain_factor = 0.1
			army_fuel_consumption_factor = -0.1
			air_fuel_consumption_factor = -0.1
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 9 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 9 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			set_variable = { SOV_propaganda_cost = SOV_propaganda_oil_for_the_motherland_cost }
			SOV_increase_propaganda_campaign_cost_effect = yes
			set_variable = { SOV_propaganda_oil_for_the_motherland_cost = SOV_propaganda_cost }
			clear_variable = SOV_propaganda_cost

			custom_effect_tooltip = SOV_propaganda_campaign_cooldown_tt
		}
	}

	SOV_propaganda_more_metal = { # ID = 10
		priority = 9

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 0.8
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_more_metal_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_more_metal_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { SOV_propaganda_more_metal_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			any_controlled_state = {
				OR = {
					has_resources_amount = {
						resource = steel
						amount > 0
					}
					has_resources_amount = {
						resource = aluminium
						amount > 0
					}
					has_resources_amount = {
						resource = chromium
						amount > 0
					}
					has_resources_amount = {
						resource = tungsten
						amount > 0
					}
				}
			}
		}

		visible = {
			OR = {
				has_completed_focus = SOV_expand_the_agitprop
				has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag #debug
			}
		}

		days_remove = SOV_default_propaganda_campaign_duration

		days_re_enable = SOV_default_propaganda_campaign_cooldown

		cost = SOV_propaganda_more_metal_cost

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 10 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
			hidden_effect = {
				capital_scope = {
					set_variable = { SOV_steel_bonus = 0 }
					set_variable = { SOV_aluminium_bonus = 0 }
					set_variable = { SOV_chromium_bonus = 0 }
					set_variable = { SOV_tungsten_bonus = 0 }
				}
				every_controlled_state = {
					limit = {
						has_resources_amount = {
							resource = steel
							amount > 0
						}
					}
					capital_scope = { add_to_variable = { SOV_steel_bonus = 1 } }
				}

				every_controlled_state = {
					limit = {
						has_resources_amount = {
							resource = aluminium
							amount > 0
						}
					}
					capital_scope = { add_to_variable = { SOV_aluminium_bonus = 1 } }
				}

				every_controlled_state = {
					limit = {
						has_resources_amount = {
							resource = chromium
							amount > 0
						}
					}
					capital_scope = { add_to_variable = { SOV_chromium_bonus = 1 } }
				}

				every_controlled_state = {
					limit = {
						has_resources_amount = {
							resource = tungsten
							amount > 0
						}
					}
					capital_scope = { add_to_variable = { SOV_tungsten_bonus = 1 } }
				}
			}

			capital_scope = {
				add_dynamic_modifier = { modifier = SOV_increased_metals_production }
			}

			custom_effect_tooltip = SOV_propaganda_more_metal_tt
		}

		remove_effect = {
			capital_scope = {
				remove_dynamic_modifier = { modifier = SOV_increased_metals_production }
			}

			set_variable = { SOV_propaganda_campaign_to_remove = 10 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			set_variable = { SOV_propaganda_cost = SOV_propaganda_more_metal_cost }
			SOV_increase_propaganda_campaign_cost_effect = yes
			set_variable = { SOV_propaganda_more_metal_cost = SOV_propaganda_cost }
			clear_variable = SOV_propaganda_cost

			custom_effect_tooltip = SOV_propaganda_campaign_cooldown_tt
		}
	}

	SOV_propaganda_high_yield = { # ID = 11
		priority = 10

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_high_yield_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_high_yield_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { SOV_propaganda_high_yield_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			surrender_progress < 0.15
		}

		visible = {
			OR = {
				has_completed_focus = SOV_expand_the_agitprop
				has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag #debug
			}
		}

		days_remove = SOV_default_propaganda_campaign_duration

		days_re_enable = SOV_default_propaganda_campaign_cooldown

		cost = SOV_propaganda_high_yield_cost

		modifier = {
			consumer_goods_factor = -0.15
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 11 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 11 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			set_variable = { SOV_propaganda_cost = SOV_propaganda_high_yield_cost }
			SOV_increase_propaganda_campaign_cost_effect = yes
			set_variable = { SOV_propaganda_high_yield_cost = SOV_propaganda_cost }
			clear_variable = SOV_propaganda_cost

			custom_effect_tooltip = SOV_propaganda_campaign_cooldown_tt
		}
	}

	SOV_propaganda_for_the_motherland = { # ID = 12
		priority = 11

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 10
				has_manpower < 300000
			}
			modifier = {
				factor = 2
				OR = {
					command_power < 25
					has_army_experience < 25
				}
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_for_the_motherland_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_for_the_motherland_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { SOV_propaganda_for_the_motherland_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			has_war = yes
			any_enemy_country = {
				is_major = yes
			}
		}

		visible = {
			OR = {
				has_completed_focus = SOV_collectivist_propaganda
				has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag #debug
			}
		}

		days_remove = SOV_default_propaganda_campaign_duration

		days_re_enable = SOV_default_propaganda_campaign_cooldown

		cost = SOV_propaganda_for_the_motherland_cost

		modifier = {
			experience_gain_army_factor = 0.1
			command_power_gain_mult = 0.15
			breakthrough_factor = 0.075
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 12 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 12 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			set_variable = { SOV_propaganda_cost = SOV_propaganda_for_the_motherland_cost }
			SOV_increase_propaganda_campaign_cost_effect = yes
			set_variable = { SOV_propaganda_for_the_motherland_cost = SOV_propaganda_cost }
			clear_variable = SOV_propaganda_cost

			custom_effect_tooltip = SOV_propaganda_campaign_cooldown_tt
		}
	}

	SOV_propaganda_heroes_forward = { # ID = 13
		priority = 12

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_heroes_forward_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_heroes_forward_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { SOV_propaganda_heroes_forward_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			has_war = yes
			any_unit_leader = {
				is_assigned = yes
			}
		}

		visible = {
			OR = {
				has_completed_focus = SOV_positive_heroism
				has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag #debug
			}
		}

		days_remove = SOV_default_propaganda_campaign_duration

		days_re_enable = SOV_default_propaganda_campaign_cooldown

		cost = SOV_propaganda_heroes_forward_cost

		modifier = {
			army_morale_factor = 0.07
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 13 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes

			custom_effect_tooltip = SOV_propaganda_heroes_forward_tt

			set_temp_variable = { temp_targets_index = 0 }
			while_loop_effect = {
				limit = {
					check_variable = { temp_targets_index = 5 compare = less_than }
				}
				if = {
					limit = {
						any_unit_leader = {
							is_assigned = yes
							NOT = { has_trait = trait_SOV_determined }
						}
					}
					random_unit_leader = {
						limit = {
							is_assigned = yes
							NOT = { has_trait = trait_SOV_determined }
						}
						add_timed_unit_leader_trait = {
							trait = trait_SOV_determined
							days = @DAYS_DETERMINED #Does not seem to support vars
						}
					}
				}
				else = {
					random_unit_leader = {
						limit = {
							NOT = { has_trait = trait_SOV_determined }
						}
						add_timed_unit_leader_trait = {
							trait = trait_SOV_determined
							days = @DAYS_DETERMINED #Does not seem to support vars
						}
					}
				}
				add_to_temp_variable = { temp_targets_index = 1 }
			}
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 13 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			set_variable = { SOV_propaganda_cost = SOV_propaganda_heroes_forward_cost }
			SOV_increase_propaganda_campaign_cost_effect = yes
			set_variable = { SOV_propaganda_heroes_forward_cost = SOV_propaganda_cost }
			clear_variable = SOV_propaganda_cost

			custom_effect_tooltip = SOV_propaganda_campaign_cooldown_tt
		}
	}

	SOV_propaganda_treacherous_enemy = { # ID = 16
		priority = 15

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				agency_upgrade_number > 4
			}
			modifier = {
				factor = 0
				has_intelligence_agency = no
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_treacherous_enemy_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_treacherous_enemy_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { SOV_propaganda_treacherous_enemy_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes
		}

		visible = {
			OR = {
				has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag #debug
			}
			has_dlc = "La Resistance"
			always = no
		}

		days_remove = SOV_default_propaganda_campaign_duration

		days_re_enable = SOV_default_propaganda_campaign_cooldown

		cost = SOV_propaganda_treacherous_enemy_cost

		modifier = {
			encryption = 1
			enemy_operative_detection_chance_factor = 0.75
			enemy_operative_capture_chance_factor = 0.75
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 16 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 16 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			set_variable = { SOV_propaganda_cost = SOV_propaganda_treacherous_enemy_cost }
			SOV_increase_propaganda_campaign_cost_effect = yes
			set_variable = { SOV_propaganda_treacherous_enemy_cost = SOV_propaganda_cost }
			clear_variable = SOV_propaganda_cost

			custom_effect_tooltip = SOV_propaganda_campaign_cooldown_tt
		}
	}

	SOV_propaganda_do_not_blab = { # ID = 17
		priority = 16

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				has_war = yes
			}
			modifier = {
				factor = 5
				any_enemy_country = {
					is_major = yes
				}
			}
			modifier = {
				factor = 0
				has_intelligence_agency = no
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_do_not_blab_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_do_not_blab_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { SOV_propaganda_do_not_blab_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes
		}

		visible = {
			OR = {
				has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag #debug
			}
			always = no
		}

		days_remove = SOV_default_propaganda_campaign_duration

		days_re_enable = SOV_default_propaganda_campaign_cooldown

		cost = SOV_propaganda_do_not_blab_cost

		modifier = {
			army_intel_to_others = -50
			navy_intel_to_others = -50
			airforce_intel_to_others = -50
			civilian_intel_to_others = -50
			foreign_subversive_activites = -0.25
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 17 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 17 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			set_variable = { SOV_propaganda_cost = SOV_propaganda_do_not_blab_cost }
			SOV_increase_propaganda_campaign_cost_effect = yes
			set_variable = { SOV_propaganda_do_not_blab_cost = SOV_propaganda_cost }
			clear_variable = SOV_propaganda_cost

			custom_effect_tooltip = SOV_propaganda_campaign_cooldown_tt
		}
	}

	SOV_propaganda_sweep_scum_out = { # ID = 18
		priority = 17

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 0.5
			modifier = {
				add = 100
				has_country_flag = { flag = SOV_great_patriotic_war_flag days > 365 }
			}
			modifier = {
				factor = 0.1
				surrender_progress > 0.75
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_sweep_scum_out_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_sweep_scum_out_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { SOV_propaganda_sweep_scum_out_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			has_war = yes
			any_enemy_country = {
				any_controlled_state = {
					is_core_of = ROOT
				}
			}
		}

		visible = {
			OR = {
				has_completed_focus = SOV_the_glory_of_the_red_army
				has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag #debug
				has_country_flag = SOV_declare_on_germany
			}
			
		}

		days_remove = SOV_default_propaganda_campaign_duration

		days_re_enable = SOV_default_propaganda_campaign_cooldown

		cost = SOV_propaganda_sweep_scum_out_cost

		modifier = {
			army_core_attack_factor = 0.1
			army_core_defence_factor = 0.05
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 18 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 18 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			set_variable = { SOV_propaganda_cost = SOV_propaganda_sweep_scum_out_cost }
			SOV_increase_propaganda_campaign_cost_effect = yes
			set_variable = { SOV_propaganda_sweep_scum_out_cost = SOV_propaganda_cost }
			clear_variable = SOV_propaganda_cost

			custom_effect_tooltip = SOV_propaganda_campaign_cooldown_tt
		}
	}

	SOV_propaganda_knowledge = { # ID = 19
		priority = 18

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 5
			modifier = {
				factor = 10
				has_war = no
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_knowledge_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_knowledge_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { SOV_propaganda_knowledge_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes
		}

		visible = {
			OR = {
				has_completed_focus = SOV_the_komsomol
				has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag #debug
			}
		}

		days_remove = SOV_default_propaganda_campaign_duration

		days_re_enable = SOV_default_propaganda_campaign_cooldown

		cost = SOV_propaganda_knowledge_cost

		modifier = {
			research_speed_factor = 0.05
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 19 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 19 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			set_variable = { SOV_propaganda_cost = SOV_propaganda_knowledge_cost }
			SOV_increase_propaganda_campaign_cost_effect = yes
			set_variable = { SOV_propaganda_knowledge_cost = SOV_propaganda_cost }
			clear_variable = SOV_propaganda_cost

			custom_effect_tooltip = SOV_propaganda_campaign_cooldown_tt
		}
	}

	SOV_propaganda_builders_of_communism = { # ID = 20
		priority = 19

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 2
			modifier = {
				factor = 10
				has_war = no
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_builders_of_communism_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_builders_of_communism_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { SOV_propaganda_builders_of_communism_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes
		}

		visible = {
			OR = {
				has_completed_focus = SOV_the_komsomol
				has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag #debug
			}
			always = no
		}

		days_remove = SOV_default_propaganda_campaign_duration

		days_re_enable = SOV_default_propaganda_campaign_cooldown

		cost = SOV_propaganda_builders_of_communism_cost

		modifier = {
			research_speed_factor = 0.02
			communism_drift = 0.1
			opinion_gain_monthly_same_ideology_factor = 0.25
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 20 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
			custom_effect_tooltip = SOV_propaganda_builders_of_communism_effect_tt
			if = {
				limit = {
					any_country = {
						is_subject_of = ROOT
					}
				}
				hidden_effect = {
					every_country = {
						limit = {
							is_subject_of = ROOT
						}
						country_event = NSB_soviet_propaganda_capmaign_events.1
					}
				}
			}
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 20 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			set_variable = { SOV_propaganda_cost = SOV_propaganda_builders_of_communism_cost }
			SOV_increase_propaganda_campaign_cost_effect = yes
			set_variable = { SOV_propaganda_builders_of_communism_cost = SOV_propaganda_cost }
			clear_variable = SOV_propaganda_cost

			custom_effect_tooltip = SOV_propaganda_campaign_cooldown_tt
		}
	}

	#SOV_propaganda_glory_to_partisans = { # ID = 21
	#	priority = 20

	#	icon = eng_propaganda_campaigns

	#	ai_will_do = {
	#		base = 0.1
	#		modifier = {
	#			factor = 10
	#			agency_upgrade_number > 4
	#			any_enemy_country = {
	#				SOV_is_major_not_original_sov = yes
	#			}
	#		}
	#		modifier = {
	#			factor = 0.1
	#			check_variable = { SOV_propaganda_glory_to_partisans_cost > 30 } #Less likely to do it a third time
	#		}
	#		modifier = {
	#			factor = 0.1
	#			check_variable = { SOV_propaganda_glory_to_partisans_cost > 45 } #Even less likely to do it a fourth time
	#		}
	#		modifier = {
	#			factor = 0
	#			check_variable = { SOV_propaganda_glory_to_partisans_cost > 90 } #Shouldn't even considered doing it a fifth time
	#		}
	#	}

	#	allowed = {
	#		original_tag = SOV
	#	}

	#	available = {
	#		SOV_propaganda_poster_slot_available = yes

	#		has_war = yes
	#		any_enemy_country = {
	#			NOT = { original_tag = SOV }
	#			any_controlled_state = {
	#				is_core_of = ROOT
	#			}
	#		}
	#	}

	#	visible = {
	#		OR = {
	#			has_completed_focus = SOV_organization_of_the_partisans
	#			has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag #debug
	#		}
	#	}

	#	days_remove = SOV_default_propaganda_campaign_duration

	#	days_re_enable = SOV_default_propaganda_campaign_cooldown

	#	cost = SOV_propaganda_glory_to_partisans_cost

	#	modifier = {
	#		operation_targeted_sabotage_resources_outcome = 0.25
	#		operation_targeted_sabotage_infrastructure_outcome = 0.25
	#		operation_targeted_sabotage_industry_outcome = 0.25
	#		operation_make_resistance_contacts_outcome = 0.25
	#		operation_boost_resistance_outcome = 0.25
	#	}

	#	complete_effect = {
	#		set_variable = { SOV_new_propaganda_campaign = 21 }
	#		SOV_pick_propaganda_campaign_slot_effect = yes
	#		SOV_achievement_propaganda_counter_effect = yes
	#	}

	#	remove_effect = {
	#		set_variable = { SOV_propaganda_campaign_to_remove = 21 }
	#		SOV_reset_propaganda_campaign_slot_effect = yes

	#		set_variable = { SOV_propaganda_cost = SOV_propaganda_glory_to_partisans_cost }
	#		SOV_increase_propaganda_campaign_cost_effect = yes
	#		set_variable = { SOV_propaganda_glory_to_partisans_cost = SOV_propaganda_cost }
	#		clear_variable = SOV_propaganda_cost

	#		custom_effect_tooltip = SOV_propaganda_campaign_cooldown_tt
	#	}
	#}

	SOV_propaganda_death_to_invaders = { # ID = 22
		priority = 21

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				any_enemy_country = {
					SOV_is_major_not_original_sov = yes
				}
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_death_to_invaders_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_death_to_invaders_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { SOV_propaganda_death_to_invaders_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes

			has_war = yes
			any_enemy_country = {
				NOT = { original_tag = SOV }
				any_controlled_state = {
					is_core_of = ROOT
				}
			}
		}

		visible = {
			OR = {
				has_completed_focus = SOV_organization_of_the_partisans
				has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag #debug
			}
		}

		days_remove = SOV_default_propaganda_campaign_duration

		days_re_enable = SOV_default_propaganda_campaign_cooldown

		cost = SOV_propaganda_death_to_invaders_cost

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 22 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
			set_global_flag = SOV_propaganda_death_to_invaders_active_flag #This is used to dynamically add/remove the state modifier when a state is gained/lost by SOV

			if = {
				limit = {
					any_enemy_country = {
						any_controlled_state = {
							is_core_of = ROOT
						}
					}
				}
				every_enemy_country = {
					limit = {
						any_controlled_state = {
							is_core_of = ROOT
						}
					}
					every_controlled_state = {
						limit = {
							is_core_of = ROOT
						}
						add_dynamic_modifier = { modifier = SOV_invaders_must_die }
					}
				}
			}
			else = {
				custom_effect_tooltip = SOV_propaganda_death_to_invaders_no_invaders_tt
			}
			custom_effect_tooltip = SOV_propaganda_death_to_invaders_state_modifier_tt
		}

		remove_effect = {
			every_state = {
				limit = {
					has_dynamic_modifier = { modifier = SOV_invaders_must_die }
				}
				remove_dynamic_modifier = { modifier = SOV_invaders_must_die }
			}

			clr_global_flag = SOV_propaganda_death_to_invaders_active_flag

			set_variable = { SOV_propaganda_campaign_to_remove = 22 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			set_variable = { SOV_propaganda_cost = SOV_propaganda_death_to_invaders_cost }
			SOV_increase_propaganda_campaign_cost_effect = yes
			set_variable = { SOV_propaganda_death_to_invaders_cost = SOV_propaganda_cost }
			clear_variable = SOV_propaganda_cost

			custom_effect_tooltip = SOV_propaganda_campaign_cooldown_tt
		}
	}

	SOV_propaganda_stalin = { # ID = 23
		priority = 22

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 5
			modifier = {
				factor = 2
				has_war = no
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_stalin_cost > 30 } #Less likely to do it a third time
			}
			modifier = {
				factor = 0.1
				check_variable = { SOV_propaganda_stalin_cost > 45 } #Even less likely to do it a fourth time
			}
			modifier = {
				factor = 0
				check_variable = { SOV_propaganda_stalin_cost > 90 } #Shouldn't even considered doing it a fifth time
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			SOV_propaganda_poster_slot_available = yes
		}

		visible = {
			OR = {
				has_completed_focus = SOV_stalins_cult_of_personality
				has_country_flag = SOV_debug_unlock_propaganda_campaigns_flag #debug
			}
		}

		days_remove = SOV_default_propaganda_campaign_duration

		days_re_enable = SOV_default_propaganda_campaign_cooldown

		cost = SOV_propaganda_stalin_cost

		modifier = {
			political_power_factor = 0.07
			command_power_gain_mult = 0.1
			war_support_weekly = 0.002
			communism_drift = 0.1
		}

		complete_effect = {
			set_variable = { SOV_new_propaganda_campaign = 23 }
			SOV_pick_propaganda_campaign_slot_effect = yes
			SOV_achievement_propaganda_counter_effect = yes
		}

		remove_effect = {
			set_variable = { SOV_propaganda_campaign_to_remove = 23 }
			SOV_reset_propaganda_campaign_slot_effect = yes

			set_variable = { SOV_propaganda_cost = SOV_propaganda_stalin_cost }
			SOV_increase_propaganda_campaign_cost_effect = yes
			set_variable = { SOV_propaganda_stalin_cost = SOV_propaganda_cost }
			clear_variable = SOV_propaganda_cost

			custom_effect_tooltip = SOV_propaganda_campaign_cooldown_tt
		}
	}
}



 ######    #######   ######  ########  ########   #######  ##    ## ######## ##    ## ########  ######  ######## ########   #######  ##    ##
##    ##  ##     ## ##    ## ##     ## ##     ## ##     ##  ##  ##  ##       ##   ##     ##    ##    ##    ##    ##     ## ##     ##  ##  ##
##        ##     ## ##       ##     ## ##     ## ##     ##   ####   ##       ##  ##      ##    ##          ##    ##     ## ##     ##   ####
##   #### ##     ##  ######  ########  ########  ##     ##    ##    ######   #####       ##     ######     ##    ########  ##     ##    ##
##    ##  ##     ##       ## ##        ##   ##   ##     ##    ##    ##       ##  ##      ##          ##    ##    ##   ##   ##     ##    ##
##    ##  ##     ## ##    ## ##        ##    ##  ##     ##    ##    ##       ##   ##     ##    ##    ##    ##    ##    ##  ##     ##    ##
 ######    #######   ######  ##        ##     ##  #######     ##    ######## ##    ##    ##     ######     ##    ##     ##  #######     ##



SOV_gosproyektstroy_decision_category = {
	SOV_gosproyektstroy_bring_foreign_experts = {
		priority = 50

		icon = hol_attract_foreign_investors

		ai_will_do = {
			base = 10
		}

		targets = { USA ENG GER JAP }

		#target_trigger = {
		#	FROM = { SOV_is_valid_subject = yes }
		#}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_idea = SOV_gosproyektstroy_1
			NOT = { has_country_flag = SOV_gosproyektstroy_upgrade_in_progress_flag }
			FROM = {
				SOV_is_valid_subject = yes
				NOT = { has_war_with = ROOT }
			}
		}

		days_remove = SOV_gosproyektstroy_decision_time

		fire_only_once = yes

		visible = {
			has_idea = SOV_gosproyektstroy_1
			NOT = { has_country_flag = SOV_gosproyektstroy_level_2_flag }
			NOT = { has_country_flag = SOV_gosproyektstroy_level_3_flag }
			country_exists = FROM
			NOT = { has_war_with = FROM }
			FROM = { SOV_is_valid_subject = yes }
		}

		cost = SOV_gosproyektstroy_decision_cost

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			set_country_flag = SOV_gosproyektstroy_upgrade_in_progress_flag
		}

		remove_effect = {
			if = {
				limit = {
					FROM = { tag = USA }
				}
				set_country_flag = { flag = SOV_gosproyektstroy_level_2_flag value = 1 } #USA
				swap_ideas = {
					remove_idea = SOV_gosproyektstroy_1
					add_idea = SOV_gosproyektstroy_2_usa
				}
			}
			else_if = {
				limit = {
					FROM = { tag = ENG }
				}
				set_country_flag = { flag = SOV_gosproyektstroy_level_2_flag value = 2 } #ENG
				swap_ideas = {
					remove_idea = SOV_gosproyektstroy_1
					add_idea = SOV_gosproyektstroy_2_eng
				}
			}
			else_if = {
				limit = {
					FROM = { tag = GER }
				}
				set_country_flag = { flag = SOV_gosproyektstroy_level_2_flag value = 3 } #GER
				swap_ideas = {
					remove_idea = SOV_gosproyektstroy_1
					add_idea = SOV_gosproyektstroy_2_ger
				}
			}
			else_if = {
				limit = {
					FROM = { tag = JAP }
				}
				set_country_flag = { flag = SOV_gosproyektstroy_level_2_flag value = 4 } #JAP
				swap_ideas = {
					remove_idea = SOV_gosproyektstroy_1
					add_idea = SOV_gosproyektstroy_2_jap
				}
			}

			clr_country_flag = SOV_gosproyektstroy_upgrade_in_progress_flag
		}
	}

	SOV_gosproyektstroy_focus_civ = {
		priority = 13

		icon = generic_construction

		ai_will_do = {
			base = 0.75
			modifier = {
				factor = 0
				OR = {
					has_war = yes
					any_other_country = {
						OR ={
							is_justifying_wargoal_against = ROOT
							ROOT = { is_justifying_wargoal_against = PREV }
						}
					}
				}
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			OR = {
				has_idea = SOV_gosproyektstroy_2_usa #Done like this for tooltip purposes
				hidden_trigger = {
					OR = {
						has_idea = SOV_gosproyektstroy_2_eng
						has_idea = SOV_gosproyektstroy_2_ger
						has_idea = SOV_gosproyektstroy_2_jap
					}
				}
			}
			NOT = { has_country_flag = SOV_gosproyektstroy_upgrade_in_progress_flag }
		}

		days_remove = SOV_gosproyektstroy_decision_time

		fire_only_once = yes

		visible = {
			OR = {
				has_idea = SOV_gosproyektstroy_2_usa
				has_idea = SOV_gosproyektstroy_2_eng
				has_idea = SOV_gosproyektstroy_2_ger
				has_idea = SOV_gosproyektstroy_2_jap
			}
			NOT = { has_country_flag = SOV_gosproyektstroy_level_3_flag }
		}

		cost = SOV_gosproyektstroy_decision_cost

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			set_country_flag = SOV_gosproyektstroy_upgrade_in_progress_flag
		}

		remove_effect = {
			set_country_flag = { flag = SOV_gosproyektstroy_level_3_flag value = 1 } #CIV
			if = {
				limit = {
					has_country_flag = { flag = SOV_gosproyektstroy_level_2_flag value = 1 } #USA
				}
				swap_ideas = {
					remove_idea = SOV_gosproyektstroy_2_usa
					add_idea = SOV_gosproyektstroy_3_usa_civ
				}
			}
			else_if = {
				limit = {
					has_country_flag = { flag = SOV_gosproyektstroy_level_2_flag value = 2 } #ENG
				}
				swap_ideas = {
					remove_idea = SOV_gosproyektstroy_2_eng
					add_idea = SOV_gosproyektstroy_3_eng_civ
				}
			}
			else_if = {
				limit = {
					has_country_flag = { flag = SOV_gosproyektstroy_level_2_flag value = 3 } #GER
				}
				swap_ideas = {
					remove_idea = SOV_gosproyektstroy_2_ger
					add_idea = SOV_gosproyektstroy_3_ger_civ
				}
			}
			else_if = {
				limit = {
					has_country_flag = { flag = SOV_gosproyektstroy_level_2_flag value = 4 } #JAP
				}
				swap_ideas = {
					remove_idea = SOV_gosproyektstroy_2_jap
					add_idea = SOV_gosproyektstroy_3_jap_civ
				}
			}

			clr_country_flag = SOV_gosproyektstroy_upgrade_in_progress_flag
		}
	}

	SOV_gosproyektstroy_focus_mil = {
		priority = 12

		icon = generic_industry

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				OR = {
					has_war = yes
					any_other_country = {
						OR ={
							is_justifying_wargoal_against = ROOT
							ROOT = { is_justifying_wargoal_against = PREV }
						}
					}
				}
			}
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			OR = {
				has_idea = SOV_gosproyektstroy_2_usa #Done like this for tooltip purposes
				hidden_trigger = {
					OR = {
						has_idea = SOV_gosproyektstroy_2_eng
						has_idea = SOV_gosproyektstroy_2_ger
						has_idea = SOV_gosproyektstroy_2_jap
					}
				}
			}
			NOT = { has_country_flag = SOV_gosproyektstroy_upgrade_in_progress_flag }
		}

		days_remove = SOV_gosproyektstroy_decision_time

		fire_only_once = yes

		visible = {
			OR = {
				has_idea = SOV_gosproyektstroy_2_usa
				has_idea = SOV_gosproyektstroy_2_eng
				has_idea = SOV_gosproyektstroy_2_ger
				has_idea = SOV_gosproyektstroy_2_jap
			}
			NOT = { has_country_flag = SOV_gosproyektstroy_level_3_flag }
		}

		cost = SOV_gosproyektstroy_decision_cost

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			set_country_flag = SOV_gosproyektstroy_upgrade_in_progress_flag
		}

		remove_effect = {
			set_country_flag = { flag = SOV_gosproyektstroy_level_3_flag value = 2 } #MIL
			if = {
				limit = {
					has_country_flag = { flag = SOV_gosproyektstroy_level_2_flag value = 1 } #USA
				}
				swap_ideas = {
					remove_idea = SOV_gosproyektstroy_2_usa
					add_idea = SOV_gosproyektstroy_3_usa_mil
				}
			}
			else_if = {
				limit = {
					has_country_flag = { flag = SOV_gosproyektstroy_level_2_flag value = 2 } #ENG
				}
				swap_ideas = {
					remove_idea = SOV_gosproyektstroy_2_eng
					add_idea = SOV_gosproyektstroy_3_eng_mil
				}
			}
			else_if = {
				limit = {
					has_country_flag = { flag = SOV_gosproyektstroy_level_2_flag value = 3 } #GER
				}
				swap_ideas = {
					remove_idea = SOV_gosproyektstroy_2_ger
					add_idea = SOV_gosproyektstroy_3_ger_mil
				}
			}
			else_if = {
				limit = {
					has_country_flag = { flag = SOV_gosproyektstroy_level_2_flag value = 4 } #JAP
				}
				swap_ideas = {
					remove_idea = SOV_gosproyektstroy_2_jap
					add_idea = SOV_gosproyektstroy_3_jap_mil
				}
			}

			clr_country_flag = SOV_gosproyektstroy_upgrade_in_progress_flag
		}
	}

	SOV_gosproyektstroy_focus_dock = {
		priority = 11

		icon = GFX_decision_generic_naval


		allowed = {
			original_tag = SOV
		}

		available = {
			OR = {
				has_idea = SOV_gosproyektstroy_2_usa #Done like this for tooltip purposes
				hidden_trigger = {
					OR = {
						has_idea = SOV_gosproyektstroy_2_eng
						has_idea = SOV_gosproyektstroy_2_ger
						has_idea = SOV_gosproyektstroy_2_jap
					}
				}
			}
			NOT = { has_country_flag = SOV_gosproyektstroy_upgrade_in_progress_flag }
		}

		days_remove = SOV_gosproyektstroy_decision_time

		fire_only_once = yes

		visible = {
			OR = {
				has_idea = SOV_gosproyektstroy_2_usa
				has_idea = SOV_gosproyektstroy_2_eng
				has_idea = SOV_gosproyektstroy_2_ger
				has_idea = SOV_gosproyektstroy_2_jap
			}
			NOT = { has_country_flag = SOV_gosproyektstroy_level_3_flag }
		}

		cost = SOV_gosproyektstroy_decision_cost

		modifier = {
			civilian_factory_use = 3
		}

		complete_effect = {
			set_country_flag = SOV_gosproyektstroy_upgrade_in_progress_flag
		}

		remove_effect = {
			set_country_flag = { flag = SOV_gosproyektstroy_level_3_flag value = 3 } #DOCK
			if = {
				limit = {
					has_country_flag = { flag = SOV_gosproyektstroy_level_2_flag value = 1 } #USA
				}
				swap_ideas = {
					remove_idea = SOV_gosproyektstroy_2_usa
					add_idea = SOV_gosproyektstroy_3_usa_dock
				}
			}
			else_if = {
				limit = {
					has_country_flag = { flag = SOV_gosproyektstroy_level_2_flag value = 2 } #ENG
				}
				swap_ideas = {
					remove_idea = SOV_gosproyektstroy_2_eng
					add_idea = SOV_gosproyektstroy_3_eng_dock
				}
			}
			else_if = {
				limit = {
					has_country_flag = { flag = SOV_gosproyektstroy_level_2_flag value = 3 } #GER
				}
				swap_ideas = {
					remove_idea = SOV_gosproyektstroy_2_ger
					add_idea = SOV_gosproyektstroy_3_ger_dock
				}
			}
			else_if = {
				limit = {
					has_country_flag = { flag = SOV_gosproyektstroy_level_2_flag value = 4 } #JAP
				}
				swap_ideas = {
					remove_idea = SOV_gosproyektstroy_2_jap
					add_idea = SOV_gosproyektstroy_3_jap_dock
				}
			}

			clr_country_flag = SOV_gosproyektstroy_upgrade_in_progress_flag
		}
	}
}

##     ## ######## ########   ######   ########    ########  ########  ######  ####  ######   ##    ## ######## ########   ######
###   ### ##       ##     ## ##    ##  ##          ##     ## ##       ##    ##  ##  ##    ##  ###   ## ##       ##     ## ##    ##
#### #### ##       ##     ## ##        ##          ##     ## ##       ##        ##  ##        ####  ## ##       ##     ## ##
## ### ## ######   ########  ##   #### ######      ##     ## ######    ######   ##  ##   #### ## ## ## ######   ########   ######
##     ## ##       ##   ##   ##    ##  ##          ##     ## ##             ##  ##  ##    ##  ##  #### ##       ##   ##         ##
##     ## ##       ##    ##  ##    ##  ##          ##     ## ##       ##    ##  ##  ##    ##  ##   ### ##       ##    ##  ##    ##
##     ## ######## ##     ##  ######   ########    ########  ########  ######  ####  ######   ##    ## ######## ##     ##  ######


SOV_merge_designers_dec_cat = {

	SOV_debug_merge_designers_FASTER_AND_FREE = {
		priority = 999

		icon = eng_ally_imperialist_coup

		ai_will_do = {
			base = 0
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			always = yes
		}

		visible = {
			OR = {
				has_completed_focus = SOV_merge_tank_and_materiel_plants
				has_completed_focus = SOV_merge_aircraft_plants
			}
			NOT = {
				has_country_flag = SOV_debug_fast_merge_desingers_flag
			}
			is_debug = yes
		}

		cost = 0

		complete_effect = {
			set_country_flag = SOV_debug_fast_merge_desingers_flag
			set_variable = { SOV_merge_designers_cost = 0 }
			set_variable = { SOV_merge_designers_time = 3 }
		}
	}

	SOV_debug_merge_designers_BACK_TO_REGULAR_STUFF = {
		priority = 999

		icon = eng_ally_imperialist_coup

		ai_will_do = {
			base = 0
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			always = yes
		}

		visible = {
			OR = {
				has_completed_focus = SOV_merge_tank_and_materiel_plants
				has_completed_focus = SOV_merge_aircraft_plants
			}
			has_country_flag = SOV_debug_fast_merge_desingers_flag
			is_debug = yes
		}

		cost = 0

		complete_effect = {
			clr_country_flag = SOV_debug_fast_merge_desingers_flag
			set_variable = { SOV_merge_designers_cost = 50 }
			set_variable = { SOV_merge_designers_time = 90 }
		}
	}

	#####################
	### TANK DESIGNER ###
	#####################
	SOV_merge_tank_plant = {
		priority = 53

		icon = GFX_decision_generic_merge_plant_tank

		ai_will_do = {
			base = 0.5
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_full_control_of_state = 195 #LENINGRAD
			num_of_civilian_factories_available_for_projects > 0
			SOV_has_active_tank_designer_any = yes
			NOT = { has_country_flag = SOV_merge_tank_decision_ongoing_flag }
		}

		visible = {
			has_completed_focus = SOV_merge_tank_and_materiel_plants
			SOV_has_tank_merged_1 = no
		}

		cancel_trigger = {
			OR = {
				SOV_has_active_tank_designer_any = no
				NOT = { has_full_control_of_state = 195 } #LENINGRAD
			}
		}

		cancel_effect = {
			clr_country_flag = SOV_merge_tank_decision_ongoing_flag
		}

		cost = SOV_merge_designers_cost

		days_remove = SOV_merge_designers_time

		modifier = {
			civilian_factory_use = 1
		}

		complete_effect = {
			set_country_flag = SOV_merge_tank_decision_ongoing_flag
		}

		remove_effect = {
			clr_country_flag = SOV_merge_tank_decision_ongoing_flag

			custom_effect_tooltip = SOV_merge_tank_plant_tt
			hidden_effect = {
				SOV_upgrade_appropriate_tank_designer_1_effect = yes
			}
		}
	}

	SOV_merge_tank_plant_2 = {
		priority = 52

		icon = GFX_decision_generic_merge_plant_tank

		ai_will_do = {
			base = 0.5
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_full_control_of_state = 252 #GORKY
			num_of_civilian_factories_available_for_projects > 0
			SOV_has_active_tank_designer_any = yes
			NOT = { has_country_flag = SOV_merge_tank_decision_ongoing_flag }
		}

		visible = {
			has_completed_focus = SOV_merge_tank_and_materiel_plants
			SOV_has_tank_merged_2 = no
		}

		cancel_trigger = {
			OR = {
				SOV_has_active_tank_designer_any = no
				NOT = { has_full_control_of_state = 252 } #GORKY
			}
		}

		cancel_effect = {
			clr_country_flag = SOV_merge_tank_decision_ongoing_flag
		}

		cost = SOV_merge_designers_cost

		days_remove = SOV_merge_designers_time

		modifier = {
			civilian_factory_use = 1
		}

		complete_effect = {
			set_country_flag = SOV_merge_tank_decision_ongoing_flag
		}

		remove_effect = {
			clr_country_flag = SOV_merge_tank_decision_ongoing_flag

			custom_effect_tooltip = SOV_merge_tank_plant_2_tt
			hidden_effect = {
				SOV_upgrade_appropriate_tank_designer_2_effect = yes
			}
		}
	}

	SOV_merge_tank_plant_3 = {
		priority = 51

		icon = GFX_decision_generic_merge_plant_tank

		ai_will_do = {
			base = 0.5
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_full_control_of_state = 653 #SVERDLOVSK
			num_of_civilian_factories_available_for_projects > 0
			SOV_has_active_tank_designer_any = yes
			NOT = { has_country_flag = SOV_merge_tank_decision_ongoing_flag }
		}

		visible = {
			has_completed_focus = SOV_merge_tank_and_materiel_plants
			SOV_has_tank_merged_3 = no
		}

		cancel_trigger = {
			OR = {
				SOV_has_active_tank_designer_any = no
				NOT = { has_full_control_of_state = 653 } #SVERDLOVSK
			}
		}

		cancel_effect = {
			clr_country_flag = SOV_merge_tank_decision_ongoing_flag
		}

		cost = SOV_merge_designers_cost

		days_remove = SOV_merge_designers_time

		modifier = {
			civilian_factory_use = 1
		}

		complete_effect = {
			set_country_flag = SOV_merge_tank_decision_ongoing_flag
		}

		remove_effect = {
			clr_country_flag = SOV_merge_tank_decision_ongoing_flag

			custom_effect_tooltip = SOV_merge_tank_plant_3_tt
			hidden_effect = {
				SOV_upgrade_appropriate_tank_designer_3_effect = yes
			}
		}
	}


	#########################
	### AIRCRAFT DESIGNER ###
	#########################
	SOV_merge_aircraft_plant_1 = {
		priority = 33

		icon = GFX_decision_generic_merge_plant_aircraft

		ai_will_do = {
			base = 0.5
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_full_control_of_state = 251 #KUYBYSHEV
			num_of_civilian_factories_available_for_projects > 0
			SOV_has_active_aircraft_designer_any = yes
			NOT = { has_country_flag = SOV_merge_aircraft_decision_ongoing_flag }
		}

		visible = {
			has_completed_focus = SOV_merge_aircraft_plants
			SOV_has_aircraft_merged_1 = no
		}

		cancel_trigger = {
			OR = {
				SOV_has_active_aircraft_designer_any = no
				NOT = { has_full_control_of_state = 251 } #KUYBYSHEV
			}
		}

		cancel_effect = {
			clr_country_flag = SOV_merge_aircraft_decision_ongoing_flag
		}

		cost = SOV_merge_designers_cost

		days_remove = SOV_merge_designers_time

		modifier = {
			civilian_factory_use = 1
		}

		complete_effect = {
			set_country_flag = SOV_merge_aircraft_decision_ongoing_flag
		}

		remove_effect = {
			clr_country_flag = SOV_merge_aircraft_decision_ongoing_flag

			custom_effect_tooltip = SOV_merge_aircraft_plant_1_tt
			hidden_effect = {
				SOV_upgrade_appropriate_aircraft_designer_1_effect = yes
			}
		}
	}

	SOV_merge_aircraft_plant_2 = {
		priority = 32

		icon = GFX_decision_generic_merge_plant_aircraft

		ai_will_do = {
			base = 0.5
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_full_control_of_state = 219 #MOSCOW
			num_of_civilian_factories_available_for_projects > 0
			SOV_has_active_aircraft_designer_any = yes
			NOT = { has_country_flag = SOV_merge_aircraft_decision_ongoing_flag }
		}

		visible = {
			has_completed_focus = SOV_merge_aircraft_plants
			SOV_has_aircraft_merged_2 = no
		}

		cancel_trigger = {
			OR = {
				SOV_has_active_aircraft_designer_any = no
				NOT = { has_full_control_of_state = 219 } #MOSCOW
			}
		}

		cancel_effect = {
			clr_country_flag = SOV_merge_aircraft_decision_ongoing_flag
		}

		cost = SOV_merge_designers_cost

		days_remove = SOV_merge_designers_time

		modifier = {
			civilian_factory_use = 1
		}

		complete_effect = {
			set_country_flag = SOV_merge_aircraft_decision_ongoing_flag
		}

		remove_effect = {
			clr_country_flag = SOV_merge_aircraft_decision_ongoing_flag

			custom_effect_tooltip = SOV_merge_aircraft_plant_2_tt
			hidden_effect = {
				SOV_upgrade_appropriate_aircraft_designer_2_effect = yes
			}

			add_resource = {
				type = aluminium
				amount = 3
				state = 219
			}
		}
	}

	SOV_merge_aircraft_plant_3 = {
		priority = 31

		icon = GFX_decision_generic_merge_plant_aircraft

		ai_will_do = {
			base = 0.5
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_full_control_of_state = 808 #RIGA
			num_of_civilian_factories_available_for_projects > 0
			SOV_has_active_aircraft_designer_any = yes
			NOT = { has_country_flag = SOV_merge_aircraft_decision_ongoing_flag }
		}

		visible = {
			has_completed_focus = SOV_merge_aircraft_plants
			SOV_has_aircraft_merged_3 = no
		}

		cancel_trigger = {
			OR = {
				SOV_has_active_aircraft_designer_any = no
				NOT = { has_full_control_of_state = 808 } #RIGA
			}
		}

		cancel_effect = {
			clr_country_flag = SOV_merge_aircraft_decision_ongoing_flag
		}

		cost = SOV_merge_designers_cost

		days_remove = SOV_merge_designers_time

		modifier = {
			civilian_factory_use = 1
		}

		complete_effect = {
			set_country_flag = SOV_merge_aircraft_decision_ongoing_flag
		}

		remove_effect = {
			clr_country_flag = SOV_merge_aircraft_decision_ongoing_flag

			custom_effect_tooltip = SOV_merge_aircraft_plant_3_tt
			hidden_effect = {
				SOV_upgrade_appropriate_aircraft_designer_3_effect = yes
			}
		}
	}


	#########################
	### MATERIEL DESIGNER ###
	#########################
	SOV_merge_materiel_plant_1_artillery = {
		priority = 45

		icon = GFX_decision_generic_merge_plant_materiel

		ai_will_do = {
			base = 0.5
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_full_control_of_state = 398 #PERM
			num_of_civilian_factories_available_for_projects > 0
			SOV_has_active_materiel_designer_grabin = yes
			NOT = { has_country_flag = SOV_merge_materiel_decision_ongoing_flag }
		}

		visible = {
			has_completed_focus = SOV_merge_tank_and_materiel_plants
			SOV_has_materiel_merged_1_artillery = no
			SOV_has_active_materiel_designer_tula = no
			SOV_has_active_materiel_designer_gaz = no
		}

		cancel_trigger = {
			OR = {
				SOV_has_active_materiel_designer_grabin = no
				NOT = { has_full_control_of_state = 398 } #PERM
			}
		}

		cancel_effect = {
			clr_country_flag = SOV_merge_materiel_decision_ongoing_flag
		}

		cost = SOV_merge_designers_cost

		days_remove = SOV_merge_designers_time

		modifier = {
			civilian_factory_use = 1
		}

		complete_effect = {
			set_country_flag = SOV_merge_materiel_decision_ongoing_flag
		}

		remove_effect = {
			clr_country_flag = SOV_merge_materiel_decision_ongoing_flag

			custom_effect_tooltip = SOV_merge_materiel_plant_1_artillery_tt
			hidden_effect = {
				SOV_upgrade_appropriate_materiel_designer_1_artillery_effect = yes
			}
		}
	}

	SOV_merge_materiel_plant_1_infantry = {
		priority = 44

		icon = GFX_decision_generic_merge_plant_materiel

		ai_will_do = {
			base = 0.5
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_full_control_of_state = 399 #UDMURTIA (Izhevsk)
			num_of_civilian_factories_available_for_projects > 0
			SOV_has_active_materiel_designer_tula = yes
			NOT = { has_country_flag = SOV_merge_materiel_decision_ongoing_flag }
		}

		visible = {
			has_completed_focus = SOV_merge_tank_and_materiel_plants
			SOV_has_materiel_merged_1_infantry = no
			SOV_has_active_materiel_designer_grabin = no
			SOV_has_active_materiel_designer_gaz = no
		}

		cancel_trigger = {
			OR = {
				SOV_has_active_materiel_designer_tula = no
				NOT = { has_full_control_of_state = 399 } #UDMURTIA (Izhevsk)
			}
		}

		cancel_effect = {
			clr_country_flag = SOV_merge_materiel_decision_ongoing_flag
		}

		cost = SOV_merge_designers_cost

		days_remove = SOV_merge_designers_time

		modifier = {
			civilian_factory_use = 1
		}

		complete_effect = {
			set_country_flag = SOV_merge_materiel_decision_ongoing_flag
		}

		remove_effect = {
			clr_country_flag = SOV_merge_materiel_decision_ongoing_flag

			custom_effect_tooltip = SOV_merge_materiel_plant_1_infantry_tt
			hidden_effect = {
				SOV_upgrade_appropriate_materiel_designer_1_infantry_effect = yes
			}
		}
	}

	SOV_merge_materiel_plant_1_motorized = {
		priority = 43

		icon = GFX_decision_generic_merge_plant_materiel

		ai_will_do = {
			base = 0.5
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_full_control_of_state = 252 #GORKY
			num_of_civilian_factories_available_for_projects > 0
			SOV_has_active_materiel_designer_gaz = yes
			NOT = { has_country_flag = SOV_merge_materiel_decision_ongoing_flag }
		}

		visible = {
			has_completed_focus = SOV_merge_tank_and_materiel_plants
			SOV_has_materiel_merged_1_motorized = no
			SOV_has_active_materiel_designer_grabin = no
			SOV_has_active_materiel_designer_tula = no
		}

		cancel_trigger = {
			OR = {
				SOV_has_active_materiel_designer_gaz = no
				NOT = { has_full_control_of_state = 252 } #GORKY
			}
		}

		cancel_effect = {
			clr_country_flag = SOV_merge_materiel_decision_ongoing_flag
		}

		cost = SOV_merge_designers_cost

		days_remove = SOV_merge_designers_time

		modifier = {
			civilian_factory_use = 1
		}

		complete_effect = {
			set_country_flag = SOV_merge_materiel_decision_ongoing_flag
		}

		remove_effect = {
			clr_country_flag = SOV_merge_materiel_decision_ongoing_flag

			custom_effect_tooltip = SOV_merge_materiel_plant_1_motorized_tt
			hidden_effect = {
				SOV_upgrade_appropriate_materiel_designer_1_motorized_effect = yes
			}
		}
	}

	SOV_merge_materiel_plant_2 = {
		priority = 42

		icon = GFX_decision_generic_merge_plant_materiel

		ai_will_do = {
			base = 0.5
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_full_control_of_state = 227 #STALINO
			num_of_civilian_factories_available_for_projects > 0
			SOV_has_active_materiel_designer_any = yes
			NOT = { has_country_flag = SOV_merge_materiel_decision_ongoing_flag }
		}

		visible = {
			has_completed_focus = SOV_merge_tank_and_materiel_plants
			SOV_has_materiel_merged_2 = no
		}

		cancel_trigger = {
			OR = {
				SOV_has_active_materiel_designer_any = no
				NOT = { has_full_control_of_state = 227 } #STALINO
			}
		}

		cancel_effect = {
			clr_country_flag = SOV_merge_materiel_decision_ongoing_flag
		}

		cost = SOV_merge_designers_cost

		days_remove = SOV_merge_designers_time

		modifier = {
			civilian_factory_use = 1
		}

		complete_effect = {
			set_country_flag = SOV_merge_materiel_decision_ongoing_flag
		}

		remove_effect = {
			clr_country_flag = SOV_merge_materiel_decision_ongoing_flag

			custom_effect_tooltip = SOV_merge_materiel_plant_2_tt
			hidden_effect = {
				SOV_upgrade_appropriate_materiel_designer_2_effect = yes
			}
		}
	}

	SOV_merge_materiel_plant_3 = {
		priority = 41

		icon = GFX_decision_generic_merge_plant_materiel

		ai_will_do = {
			base = 0.5
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			has_full_control_of_state = 582 #MAGNITOGORSK
			num_of_civilian_factories_available_for_projects > 0
			SOV_has_active_materiel_designer_any = yes
			NOT = { has_country_flag = SOV_merge_materiel_decision_ongoing_flag }
		}

		visible = {
			has_completed_focus = SOV_merge_tank_and_materiel_plants
			SOV_has_materiel_merged_3 = no
		}

		cancel_trigger = {
			OR = {
				SOV_has_active_materiel_designer_any = no
				NOT = { has_full_control_of_state = 582 } #MAGNITOGORSK
			}
		}

		cancel_effect = {
			clr_country_flag = SOV_merge_materiel_decision_ongoing_flag
		}

		cost = SOV_merge_designers_cost

		days_remove = SOV_merge_designers_time

		modifier = {
			civilian_factory_use = 1
		}

		complete_effect = {
			set_country_flag = SOV_merge_materiel_decision_ongoing_flag
		}

		remove_effect = {
			clr_country_flag = SOV_merge_materiel_decision_ongoing_flag

			custom_effect_tooltip = SOV_merge_materiel_plant_3_tt
			hidden_effect = {
				SOV_upgrade_appropriate_materiel_designer_3_effect = yes
			}
		}
	}
}


 ######   ########  ########    ###    ########    ########     ###    ######## ########  ####  #######  ######## ####  ######     ##      ##    ###    ########
##    ##  ##     ## ##         ## ##      ##       ##     ##   ## ##      ##    ##     ##  ##  ##     ##    ##     ##  ##    ##    ##  ##  ##   ## ##   ##     ##
##        ##     ## ##        ##   ##     ##       ##     ##  ##   ##     ##    ##     ##  ##  ##     ##    ##     ##  ##          ##  ##  ##  ##   ##  ##     ##
##   #### ########  ######   ##     ##    ##       ########  ##     ##    ##    ########   ##  ##     ##    ##     ##  ##          ##  ##  ## ##     ## ########
##    ##  ##   ##   ##       #########    ##       ##        #########    ##    ##   ##    ##  ##     ##    ##     ##  ##          ##  ##  ## ######### ##   ##
##    ##  ##    ##  ##       ##     ##    ##       ##        ##     ##    ##    ##    ##   ##  ##     ##    ##     ##  ##    ##    ##  ##  ## ##     ## ##    ##
 ######   ##     ## ######## ##     ##    ##       ##        ##     ##    ##    ##     ## ####  #######     ##    ####  ######      ###  ###  ##     ## ##     ##


SOV_great_patriotic_war = {

	SOV_staggered_retreat = {
		priority = 31

		icon = GFX_decision_generic_military

		ai_will_do = {
			base = 0.5
		}

		allowed = {
			original_tag = SOV
		}
		fire_only_once = yes
		available = {
			has_completed_focus = SOV_desperate_measures
			surrender_progress > 0.15
		}

		visible = {
			any_enemy_country = { SOV_is_major_not_original_sov = yes }
			NOT = { has_country_flag = SOV_order_227_flag }
		}

		ai_hint_pp_cost = 15
		custom_cost_trigger = {
			command_power > 49
			has_political_power > 14
		}
		custom_cost_text = decision_cost_CP_50_pp_15

		days_remove = 210

		cancel_trigger = {
			surrender_progress < 0.05
		}



		modifier = {
			dig_in_speed_factor = 0.5
			army_defence_factor = 0.05
			out_of_supply_factor = -0.25
			pocket_penalty = -0.25
			no_supply_grace = 168
		}

		complete_effect = {
			set_country_flag = SOV_order_270_flag
			hidden_effect = {
				complete_national_focus = SOV_order_270_focus
			}
			news_event = { id = news.5003 days = 0 }
		}

	}

	SOV_order_227 = {
		priority = 101

		icon = generic_army_support

		ai_will_do = {
			factor = 1
			modifier = {
				surrender_progress > 0.25
				factor = 10
			}
		}

		available = {
			has_completed_focus = SOV_lessons_of_war
			custom_trigger_tooltip = { 
				tooltip = SOV_order_227_trigger_tt 			
				has_country_flag = {
					flag = SOV_order_270_flag
					days > 210
				} 
			} 
		}

		ai_hint_pp_cost = 50
		custom_cost_trigger = {
			command_power > 49
			has_political_power > 49
		}
		custom_cost_text = decision_cost_CP_50_pp_50

		fire_only_once = yes
		visible = {

		}

		days_remove = 720


		modifier = {
			pocket_penalty = -0.2
			out_of_supply_factor = -0.25
			army_defence_factor = 0.1
			dig_in_speed_factor = 0.5
			no_supply_grace = 336
		}

		complete_effect = {
			hidden_effect = { add_political_power = -50 }
			hidden_effect = { complete_national_focus = SOV_order_227_focus}
			news_event = { id = news.5004 days = 0 }
			set_country_flag = SOV_order_227_flag
			custom_effect_tooltip = SOV_order_227_decisions_tt
		}
	}

	SOV_military_offensive_ongoing = {

		icon = hol_draw_up_staff_plans

		allowed = {
			original_tag = SOV
		}

		fire_only_once = yes

		days_mission_timeout = 30

		is_good = no

		activation = {
			always = no
		}

		cancel_trigger = {
			hidden_trigger = {
				has_war = no
			}
		}

		cancel_effect = {
			#log = "Mission cancelled"
			hidden_effect = {
				SOV_clean_military_offensive_effect = yes
			}
		}

		visible = {
			has_completed_focus = SOV_the_glory_of_the_red_army

			has_country_flag = SOV_military_offensive_in_progress_flag
		}

		available = { #Conditions to succeed in the offensive
			custom_trigger_tooltip = {
				tooltip = SOV_military_offensive_ongoing_trigger_tt
				all_of_scopes = {
					array = SOV_military_offensive_states
					is_controlled_by = ROOT
				}
			}
		}

		timeout_effect = { #FAIL
			#log = "Var = [?SOV_offensive_main_objective.GetName] // Array = [?SOV_military_offensive_states^0.GetName]" #Debug
			if = {
				limit = {
					#var:SOV.SOV_military_offensive_states^0 = {
					var:SOV_offensive_main_objective = {
						is_controlled_by = ROOT
					}
				}
				custom_effect_tooltip = SOV_military_offensive_ongoing_holding_main_objective_tt
			}
			else = {
				custom_effect_tooltip = SOV_military_offensive_ongoing_not_holding_main_objective_tt
				hidden_effect = {
					add_war_support = -0.1
					add_political_power = -75
				}
			}

			custom_effect_tooltip = SOV_military_offensive_ongoing_failing_main_objective_tt
			effect_tooltip = {
				add_war_support = -0.1
				add_political_power = -75
			}

			SOV_clean_military_offensive_effect = yes
		}

		complete_effect = { #SUCCESS
			SOV_clean_military_offensive_effect = yes

			add_war_support = 0.1
			add_political_power = 50
		}
	}

	SOV_military_offensive = {
		priority = 30

		icon = GFX_decision_generic_operation

		ai_will_do = {
			base = 0.5
		}

		state_target = yes

		target_trigger = {
			FROM = {
				SOV_is_military_offensive_main_objective = yes
			}
		}

		target_root_trigger = {
			has_war = yes
			has_completed_focus = SOV_the_glory_of_the_red_army

		}

		on_map_mode = map_and_decisions_view

		allowed = {
			original_tag = SOV
		}

		available = {
			NOT = { has_country_flag = SOV_military_offensive_in_progress_flag }
			command_power > 49
		}

		visible = {
			 FROM = {
			 	controller = {
			 		has_war_with = ROOT
			 	}
			 	any_neighbor_state = {
			 		is_controlled_by = ROOT
			 	}
			 }
		}

		cancel_if_not_visible = yes

		cancel_effect = {
			#log = "Preparations cancelled"
			hidden_effect = {
				SOV_clean_military_offensive_effect = yes
			}
		}

		ai_hint_pp_cost = 15
		custom_cost_trigger = {
			command_power > 49
			has_political_power > 14
		}
		custom_cost_text = decision_cost_CP_50_pp_15

		days_remove = 14

		modifier = {
			command_power_gain_mult = -0.5
		}

		complete_effect = {
			hidden_effect = {
				add_command_power = -50
				add_political_power = -15
			}
			set_country_flag = SOV_military_offensive_in_progress_flag
		}

		remove_effect = {
			custom_effect_tooltip = SOV_military_offensive_scope_tt
			custom_effect_tooltip = SOV_military_offensive_current_scope_main_objective_tt
			effect_tooltip = {
				FROM = { #RZHEV
					custom_effect_tooltip = SOV_military_offensive_current_scope_negihbors_tt
					every_neighbor_state = { #NEIGHBOR STATES
						limit = {
							controller = { has_war_with = ROOT }
						}
					}
				}
			}

			hidden_effect = {
				set_variable = { SOV_offensive_main_objective = FROM } #This variable exists because trying to scope to the element 0 of an array causes an error :D (!)
				FROM = {
					ROOT = { add_to_array = { SOV_military_offensive_states = PREV } }
					every_neighbor_state = { #NEIGHBOR STATES
						limit = {
							controller = { has_war_with = ROOT }
						}
						ROOT = { add_to_array = { SOV_military_offensive_states = PREV } }
					}
				}
				SOV_set_military_offensive_effect = yes

				activate_mission = SOV_military_offensive_ongoing
			}
			custom_effect_tooltip = SOV_military_offensive_activate_decision_tt
		}
	}

	SOV_operation_iskra_ongoing = {

		icon = hol_draw_up_staff_plans

		allowed = {
			original_tag = SOV
		}

		fire_only_once = yes

		days_mission_timeout = 30

		is_good = no

		activation = {
			always = no
		}

		cancel_trigger = {
			hidden_trigger = {
				has_war = no
			}
		}

		cancel_effect = {
			hidden_effect = {
				SOV_clean_military_offensive_effect = yes
			}
		}

		visible = {
			has_completed_focus = SOV_the_glory_of_the_red_army

			has_war = yes
			has_country_flag = SOV_military_offensive_in_progress_flag
		}

		available = { #You succeed by having Leningrad being connected to the rest of the country at the end of the mission
			custom_trigger_tooltip = {
				tooltip = SOV_operation_iskra_ongoing_objective_tt
				195 = { is_in_home_area = yes }
			}
		}

		timeout_effect = {  #FAIL
			custom_effect_tooltip = SOV_operation_iskra_ongoing_success_effects_tt
			effect_tooltip = {
				add_war_support = 0.1
				add_political_power = 50
			}
			custom_effect_tooltip = SOV_operation_iskra_ongoing_failure_effects_tt
			effect_tooltip = {
				add_war_support = -0.1
				add_political_power = -75
			}

			if = {
				limit = {
					195 = { is_in_home_area = yes }
				}
				custom_effect_tooltip = SOV_operation_iskra_ongoing_success_tt
				hidden_effect = {
					add_war_support = 0.1
					add_political_power = 50
				}
			}
			else = {
				custom_effect_tooltip = SOV_operation_iskra_ongoing_failure_tt
				hidden_effect = {
					add_war_support = -0.1
					add_political_power = -75
				}
			}
			SOV_clean_military_offensive_effect = yes
		}

		complete_effect = {
			SOV_clean_military_offensive_effect = yes
		}
	}

	SOV_operation_iskra = { #SPECIAL OFFENSIVE - LENINGRAD HAS NOT FALLEN BUT IT IS SURROUNDED
		priority = 30

		icon = GFX_decision_generic_operation

		ai_will_do = {
			base = 1
		}

		highlight_states = {
			highlight_state_targets = {
				state = 208 #LUGA
				state = 244 #VOLKHOV
			}
		}

		on_map_mode = map_and_decisions_view

		allowed = {
			original_tag = SOV
		}

		available = {
			NOT = { has_country_flag = SOV_military_offensive_in_progress_flag }
			command_power > 49
			OR = {
				controls_state = 263 #NOVGOROD
				controls_state = 264 #TIKHVIN
			}
		}

		visible = {
			has_war = yes
			has_completed_focus = SOV_the_glory_of_the_red_army
			244 = {
				controller = { has_war_with = ROOT }
			}
			208 = {
				controller = { has_war_with = ROOT }
			}
			195 = { is_controlled_by = ROOT }
		}

		ai_hint_pp_cost = 15
		custom_cost_trigger = {
			command_power > 49
			has_political_power > 14
		}
		custom_cost_text = decision_cost_CP_50_pp_15

		fire_only_once = yes

		days_remove = 14

		modifier = {
			command_power_gain_mult = -0.5
		}

		complete_effect = {
			hidden_effect = {
				add_command_power = -50
				add_political_power = -15
			}
			set_country_flag = SOV_military_offensive_in_progress_flag
		}

		remove_effect = {
			custom_effect_tooltip = SOV_operation_iskra_tt
			hidden_effect = {
				195 = {
					ROOT = { add_to_array = { SOV_military_offensive_states = PREV } }
				}
				208 = {
					ROOT = { add_to_array = { SOV_military_offensive_states = PREV } }
				}
				244 = {
					ROOT = { add_to_array = { SOV_military_offensive_states = PREV } }
				}
				SOV_set_military_offensive_effect = yes

				activate_mission = SOV_operation_iskra_ongoing
			}
			custom_effect_tooltip = SOV_operation_iskra_activate_decision_tt
		}
	}

	SOV_the_rush_for_berlin = {
		priority = 100

		icon = GFX_decision_generic_nationalism

		ai_will_do = {
			base = 1
		}

		allowed = {
			original_tag = SOV
		}

		available = {
			any_controlled_state = {
				is_core_of = GER
				NOT = { state = 763 }
				NOT = { state = 5 }
				NOT = { state = 85 }
			}
			any_other_country = {
				is_major = yes
				NOT = { is_in_faction_with = ROOT }
				has_war_with = GER
				any_controlled_state = {
					is_core_of = GER
				}
			}
			has_completed_focus = SOV_lessons_of_war
			has_country_flag = SOV_great_patriotic_war_flag
		}

		visible = {
			has_war_with = GER
			any_controlled_state = {
				is_core_of = GER
			}
			any_other_country = {
				is_major = yes
				NOT = { is_in_faction_with = ROOT }
				has_war_with = GER
			}
		}

		fire_only_once = yes

		ai_hint_pp_cost = 50
		custom_cost_trigger = {
			command_power > 49
			has_political_power > 49
		}
		custom_cost_text = decision_cost_CP_50_pp_50

		complete_effect = {
			hidden_effect = {
				add_command_power = -50
				add_political_power = -50
			}
			add_timed_idea = {
				idea = SOV_the_rush_for_berlin
				days = 365
			}
		}
	}

	#217 "Stalingrad"
	SOV_hold_stalingrad = {

		icon = generic_civil_support

		allowed = {
			original_tag = SOV
		}

		#Fail trigger
		available = {
			NOT = { controls_state = 217 }
		}

		days_mission_timeout = 180

		fire_only_once = yes

		is_good = yes

		activation = {
			has_war = yes
			has_civil_war = no
			217 = {
				is_controlled_by = ROOT
				OR = {
					any_neighbor_state = {
						CONTROLLER = {
							has_war_with = ROOT
						}
						OWNER = { tag = ROOT }
					}
					NOT = { is_fully_controlled_by = ROOT }
				}
			}
		}

		#Success
		timeout_effect = {
			add_stability = 0.05
			add_war_support = 0.05
			217 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.1
		}
		#Fail
		complete_effect = {
			217 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.2
		}
	}

	#195 "Leningrad"
	SOV_hold_leningrad = {

		icon = generic_civil_support

		allowed = {
			original_tag = SOV
		}

		#Fail trigger
		available = {
			NOT = { controls_state = 195 }
		}

		days_mission_timeout = 180

		fire_only_once = yes

		is_good = yes

		activation = {
			has_war = yes
			has_civil_war = no
			any_enemy_country = {
				is_major = yes
			}
			195 = {
				is_controlled_by = ROOT
				OR = {
					any_neighbor_state = {
						CONTROLLER = {
							has_war_with = ROOT
						}
						OWNER = { tag = ROOT }
					}
					NOT = { is_fully_controlled_by = ROOT }
				}
			}
		}

		#Success
		timeout_effect = {
			add_stability = 0.05
			add_war_support = 0.05
			195 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.3
		}
		#Fail
		complete_effect = {
			195 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.4
		}
	}

	#219 "Moscow"
	SOV_hold_moscow = {

		icon = generic_civil_support

		allowed = {
			original_tag = SOV
		}

		#Fail trigger
		available = {
			NOT = { controls_state = 219 }
		}

		days_mission_timeout = 180

		fire_only_once = yes

		is_good = yes

		activation = {
			has_war = yes
			has_civil_war = no
			219 = {
				is_controlled_by = ROOT
				OR = {
					any_neighbor_state = {
						CONTROLLER = {
							has_war_with = ROOT
						}
						OWNER = { tag = ROOT }
					}
					NOT = { is_fully_controlled_by = ROOT }
				}
			}
		}

		#Success
		timeout_effect = {
			add_stability = 0.05
			add_war_support = 0.05
			219 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.5
		}
		#Fail
		complete_effect = {
			219 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.6
		}
	}

	SOV_relocation= {
		allowed = {	original_tag = SOV }

		icon = GFX_decision_generic_construction

		available = { date > 1950.1.1 }

		days_mission_timeout = 7

		fire_only_once = no
		is_good = yes

		activation = { always = no }

		timeout_effect = {
			SOV_relocate_mil = yes		
			SOV_relocate_mil = yes
			SOV_relocate_mil = yes		
			SOV_relocate_mil = yes
			SOV_relocate_civ = yes		
			SOV_relocate_civ = yes				
			SOV_relocate_civ_moscow = yes
			SOV_relocate_mil_moscow = yes
			activate_mission = SOV_relocation2
		}

		complete_effect = {
		
		}
	}
	
	SOV_relocation2= {
		allowed = {original_tag=SOV	}
		icon = GFX_decision_generic_construction
		available = { date > 1950.1.1 }
		days_mission_timeout = 7
		fire_only_once = no
		is_good = yes
		activation = {	always=no}
		
		timeout_effect = {
			SOV_relocate_mil = yes		
			SOV_relocate_mil = yes
			SOV_relocate_mil = yes		
			SOV_relocate_mil = yes	
			SOV_relocate_civ = yes
			SOV_relocate_civ = yes		
			SOV_relocate_civ = yes
			SOV_relocate_civ_moscow = yes
			SOV_relocate_mil_moscow = yes		
			activate_mission = SOV_relocation
		}
		
		complete_effect = {
		
		}
	}
}